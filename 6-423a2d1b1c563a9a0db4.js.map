{"version":3,"sources":["webpack:///./node_modules/react-pts-canvas/dist/index.es.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/get.js","webpack:///./node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///./node_modules/pts/dist/es2015/Util.js","webpack:///./node_modules/pts/dist/es2015/LinearAlgebra.js","webpack:///./node_modules/pts/dist/es2015/Op.js","webpack:///./node_modules/pts/dist/es2015/Num.js","webpack:///./node_modules/pts/dist/es2015/Pt.js","webpack:///./node_modules/pts/dist/es2015/UI.js","webpack:///./node_modules/pts/dist/es2015/Space.js","webpack:///./node_modules/pts/dist/es2015/Form.js","webpack:///./node_modules/pts/dist/es2015/Create.js","webpack:///./node_modules/pts/dist/es2015/Color.js","webpack:///./node_modules/pts/dist/es2015/Dom.js","webpack:///./node_modules/pts/dist/es2015/Svg.js","webpack:///./node_modules/pts/dist/es2015/Physics.js","webpack:///./src/components/CanvasAnimation.js"],"names":["classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","possibleConstructorReturn","self","call","ReferenceError","_React$Component","PtsCanvas","this","_this","getPrototypeOf","canvRef","createRef","space","form","_touch","init","_update","dispose","play","playOnce","touch","bindMouse","bindTouch","time","ftime","point","pointer","bound","size","evt","type","px","py","setup","bgcolor","background","resize","retina","getForm","add","_this2","createElement","className","name","style","ref","c","canvasStyle","Component","defaultProps","QuickStartCanvas","_PtsCanvas","apply","arguments","onAnimate","onStart","onResize","onAction","_classCallCheck","undefined","_getPrototypeOf","o","property","receiver","Reflect","get","base","object","hasOwnProperty","desc","getOwnPropertyDescriptor","_setPrototypeOf","p","_inherits","_possibleConstructorReturn","assertThisInitialized","_isNativeReflectConstruct","construct","sham","Proxy","Date","toString","e","Parent","args","Class","a","push","Function","bind","_cache","Map","fn","indexOf","has","set","Wrapper","Const","xy","yz","xz","xyz","horizontal","vertical","identical","right","bottom_right","bottom","bottom_left","left","top_left","top","top_right","epsilon","max","Number","MAX_VALUE","min","MIN_VALUE","pi","Math","PI","two_pi","half_pi","quarter_pi","one_degree","rad_to_deg","deg_to_rad","gravity","newton","gaussian","Util","lv","_warnLevel","pos","isArray","Array","ArrayBuffer","isView","slice","message","defaultReturn","warnLevel","Error","console","warn","range","start","floor","random","pts","stride","loopBack","matchSize","chunks","part","st","index","k","flattenAsGroup","arr","concat","b","op","result","len","lenB","arrays","z","callback","step","temp","url","request","XMLHttpRequest","open","onload","status","responseText","onerror","send","avgFrames","last","now","avg","shift","reduce","list","Symbol","iterator","Vec","_i","_len","_i2","_len2","_i3","_len3","_i4","_len4","d","sqrt","dot","magnitude","m","make","divide","map","abs","ceil","round","s","Mat","g","isNum","$add","transposed","elementwise","ai","alen","$multiply","transpose","_ai","_alen","bi","blen","_ai2","_alen2","defaultValue","useLongest","ps","zipSlice","zip","pt","x","y","cosA","sinA","tanX","tanY","sx","sy","at","scale2DMatrix","rotate2DMatrix","shear2DMatrix","p1","p2","intercept","yi","ang2","atan","slope","cos","sin","obj","param","Line","anchor","angle","toAngle","xi","line","p3","threshold","to","$subtract","$cross","equals","magnitudeSq","asProjection","proj","$project","projectionVector","perpendicularFromPt","la","lb","pa","pb","y1","_y","intersectRay2D","withinBound","ray","lineOrRay","poly","sourceIsRay","intersectLineWithRay2D","intersectLine2D","next","lines1","lines2","isRay","group","lenk","_ip","gridPt","t","subtract","intersectGridWithRay2D","gg","rect","box","boundingBox","fromPtArray","hasIntersectRect2D","intersectLines2D","sides","num","interpolate","cropAsCircle","tdx","ls","unit","multiply","fromCenter","sideIdx","graphic","atTail","h","perpendicular","$min","$max","Rectangle","topLeft","widthOrSize","height","fromTopLeft","center","half","within","fromRect","enclose","maxValue","minValue","p0","_Rectangle$corners","corners","_Rectangle$corners2","rects","merged","flatten","_center","ratio","asRows","mid","lerp","rect1","rect2","resetBoundingBox","Circle","r","circumcircle","incircle","radius","f","disc","discSqrt","t1","t2","circle","dv","dr2","dr","ar","br","ar2","br2","clone","ang","inc","Triangle","toTriangle","fromCircle","midpoints","opp","oppositeSide","altitude","bisector","incenter","area","perimeter","total","md","medial","circumcenter","Polygon","centroid","idx","closePath","sp","split","lines","mids","gs","adjacentSides","mag","segments","det","sorted","sort","dq","bot","hull","originIndex","_near","_item","unitAxis","n","poly1","poly2","projectAxis","ln","lineAt","info","which","dist","normal","edge","vertex","minDist","MAX_SAFE_INTEGER","axis","_axisOverlap","plen","b1","b2","c1","c2","smallest","lp","ins","intersectPolygon2D","polys","boxes","unshift","Curve","steps","ts","copyStart","_index","ctrls","params","getSteps","controlPoints","catmullRomStep","cp","_calcPt","tension","cardinalStep","h2","h3","bezierStep","bsplineTensionStep","bsplineStep","Num","val","sum","method","sineInOut","currA","currB","targetA","targetB","normalizeValue","Geom","boundValue","radian","minPt","maxPt","average","ptOrIndex","direction","boundPt1","boundPt2","bounds","da","db","$cross2D","_scale","scs","lenP","rotateAt2DMatrix","$take","transform2D","scale","shearAt2DMatrix","tanx","tan","tany","mat","reflectAt2DMatrix","Float64Array","table","rad","boundAngle","toDegree","Shaping","dt","pow","t4","t6","bounceOut","bounceIn","exp","A","B","C","om2a","curve","tt","_key","_createSuper","Derived","hasNativeReflectConstruct","Super","NewTarget","_Float32Array","Pt","_super","getArgs","_key2","_this$clone","anchorFromPt","change","_key3","fns","_ops","_key4","toArray","_len5","_key5","_this$clone2","_len6","_key6","_this$clone3","_len7","_key7","_this$clone4","_len8","_key8","_this$clone5","_len9","_key9","_len10","_key10","cross2D","_len11","_key11","cross","_len12","_key12","_len13","_key13","atan2","boundRadian","rotate2D","shear2D","reflect2D","join","_id","dimensions","randomize","Float32Array","fill","_Array","Group","_super2","_len14","_key14","chunkSize","splice","count","pts_per_segment","_len15","_key15","clamp","chunk","tc","_len16","_key16","moveBy","_scale2","dim","ptFn","_len17","_key17","_this$i","_len18","_key18","forEachPt","_len19","_key19","_len20","_key20","_len21","_key21","from","_Group","Bound","_super3","_len22","_key22","_size","_topLeft","_bottomRight","_inited","_updateSize","_updateCenter","_updatePosFromTop","_updatePosFromCenter","w","width","UIShape","UIPointerActions","up","down","move","drag","uidrag","drop","uidrop","over","out","enter","leave","contextmenu","all","UI","shape","states","id","_holds","_group","fromArray","_shape","_counter","_states","_actions","_addHandler","_removeHandler","_within","values","_trigger","newKey","keys","delete","clear","hasIntersectPoint","ui","uis","listen","_Space","MultiTouchSpace","_pressed","_dragged","_hasMouse","_hasTouch","_canvas","addEventListener","removeEventListener","_bind","bindCanvas","_mouseDown","_mouseUp","_mouseOver","_mouseOut","_mouseMove","_contextMenu","unbindCanvas","_touchStart","_touchMove","item","pageX","pageY","MouseEvent","players","v","outerBound","action","_k","_v","changedTouches","_pointer","_mouseAction","preventDefault","Space","_time","prev","diff","end","playerCount","_animID","_pause","_refresh","_isReady","_playing","player","animate","pid","animateID","inited","requestAnimationFrame","playItems","err","cancelAnimationFrame","toggle","duration","stop","context","_renderFunc","_Form","VisualForm","_filled","_stroked","_font","groups","rest","stroke","linejoin","linecap","_multiple","Form","_ready","required","Font","face","weight","lineHeight","Create","depth","subpoints","columns","rows","orientation","$divide","offset","angleOffset","dx","dy","seed","np","initNoise","__noise_grad3","__noise_permTable","_Pt","Noise","perm","_n","j","n00","n01","n10","n11","_fade","tx","Delaunay","_mesh","_this3","triangleOnly","indices","_superTriangle","opened","_circum","closed","tris","edges","circum","triangle","_dedupe","vs","neighborPts","cs","sortEdges","dmax","tri","_triangle","Color","_mode","_isNorm","toMode","mode","convert","fname","toUpperCase","toNorm","ranges","mapToRange","normalize","format","_hex","alpha","hex","substr","substring","hexVal","parseInt","rgb","normalizedInput","normalizedOutput","_ref","$normalize","_ref2","l","hsl","_hsl","q","sc","_ref3","_ref4","hsb","_hsb","pick","XYZtoLAB","RGBtoXYZ","lab","XYZtoRGB","LABtoXYZ","LABtoLCH","RGBtoLAB","lch","LABtoRGB","LCHtoLAB","XYZtoLUV","luv","LUVtoXYZ","cc","_ref5","_ref6","D65","cy","nnn","_ref7","_ref8","u","refU","refV","L","_ref9","_ref10","cubeY","toRadian","_MultiTouchSpace","DOMSpace","elem","_autoResize","_bgcolor","_css","_selector","Element","document","querySelector","_container","parentElement","appendChild","body","setTimeout","_resizeHandler","dispatchEvent","Event","refresh","opt","autoResize","styles","fromBoundingRect","getBoundingClientRect","bg","innerHTML","update","_styles","window","removeAll","auto","backgroundColor","appendTo","setAttribute","data","str","_DOMSpace","HTMLSpace","querySelectorAll","scopeID","forEach","el","parentNode","removeChild","parent","autoClass","_VisualForm","HTMLForm","_style","_ctx","groupID","groupCount","currentID","currentClass","_space","element","assign","styleTo","sizeOrFont","family","group_id","nextID","updateScope","halfsize","square","txt","text","startAngle","endAngle","ctx","domID","setAttr","htmlElement","getID","class","rectStyle","_checkSize","textContent","textStyle","SVGSpace","nodeName","toLowerCase","svgElement","createElementNS","SVGForm","arc","polygon","cx","largeArc","sweep","_poly","x1","x2","y2","points","createLines","distributeRandom","Canvas","useState","setLines","setSpace","useCallback","log","inPath","inLine","fillOnly"],"mappings":"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wB,GAuG7Bc,GAAgB,CAAC,CAAC,EAAG,EAAG,GAAI,EAAE,EAAG,EAAG,GAAI,CAAC,GAAI,EAAG,GAAI,EAAE,GAAI,EAAG,GAAI,CAAC,EAAG,EAAG,GAAI,EAAE,EAAG,EAAG,GAAI,CAAC,EAAG,GAAI,GAAI,EAAE,EAAG,GAAI,GAAI,CAAC,EAAG,EAAG,GAAI,CAAC,GAAI,EAAG,GAAI,CAAC,EAAG,GAAI,GAAI,CAAC,GAAI,GAAI,IAC7JC,GAAoB,CAAC,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,IAAK,GAAI,IAAK,GAAI,GAAI,GAAI,IAAK,IAAK,EAAG,IAAK,IAAK,GAAI,IAAK,GAAI,GAAI,IAAK,EAAG,GAAI,GAAI,IAAK,GAAI,GAAI,GAAI,IAAK,EAAG,IAAK,IAAK,IAAK,IAAK,GAAI,EAAG,GAAI,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,IAAK,GAAI,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,IAAK,GAAI,IAAK,IAAK,GAAI,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,EAAG,IAAK,GAAI,GAAI,IAAK,GAAI,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,GAAI,IAAK,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,EAAG,IAAK,GAAI,GAAI,IAAK,EAAG,GAAI,IAAK,IAAK,GAAI,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","file":"6-423a2d1b1c563a9a0db4.js","sourcesContent":["import React from 'react';\nimport { CanvasSpace } from 'pts/dist/es5';\n\nvar classCallCheck = function classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar inherits = function inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar PtsCanvas = function (_React$Component) {\n  inherits(PtsCanvas, _React$Component);\n\n  function PtsCanvas(props) {\n    classCallCheck(this, PtsCanvas);\n\n    var _this = possibleConstructorReturn(this, (PtsCanvas.__proto__ || Object.getPrototypeOf(PtsCanvas)).call(this, props));\n\n    _this.canvRef = React.createRef();\n    _this.space = null;\n    _this.form = null;\n    _this._touch = false;\n    return _this;\n  }\n\n  createClass(PtsCanvas, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.init();\n\n      this._update();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      this._update();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this.space.dispose();\n    }\n  }, {\n    key: '_update',\n    value: function _update() {\n      if (this.props.play) {\n        this.space.play();\n      } else {\n        this.space.playOnce(0);\n      }\n\n      if (this._touch !== this.props.touch) {\n        this._touch = this.props.touch;\n        this.space.bindMouse(this._touch).bindTouch(this._touch);\n      }\n    } // Required: Override this to use Pts' player `animate` callback\n    // See guide: https://ptsjs.org/guide/space-0500\n\n  }, {\n    key: 'animate',\n    value: function animate(time, ftime) {\n      this.form.point(this.space.pointer, 20, \"circle\");\n    } // Optional: Override this to use Pts' player `start` callback\n\n  }, {\n    key: 'start',\n    value: function start(bound, space) {} // Optional: Override this to use Pts' player `resize` callback\n\n  }, {\n    key: 'resize',\n    value: function resize(size, evt) {} // Optional: Override this to use Pts' player `action` callback\n\n  }, {\n    key: 'action',\n    value: function action(type, px, py, evt) {}\n  }, {\n    key: 'init',\n    value: function init() {\n      this.space = new CanvasSpace(this.canvRef).setup({\n        bgcolor: this.props.background,\n        resize: this.props.resize,\n        retina: this.props.retina\n      });\n      this.form = this.space.getForm();\n      this.space.add(this);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement('div', {\n        className: this.props.name || \"\",\n        style: this.props.style\n      }, React.createElement('canvas', {\n        className: this.props.name ? this.props.name + \"-canvas\" : \"\",\n        ref: function ref(c) {\n          return _this2.canvRef = c;\n        },\n        style: this.props.canvasStyle\n      }));\n    }\n  }]);\n  return PtsCanvas;\n}(React.Component);\n\nPtsCanvas.defaultProps = {\n  name: \"pts-react\",\n  // maps to className of the container div\n  background: \"#9ab\",\n  resize: true,\n  retina: true,\n  play: true,\n  touch: true,\n  style: {},\n  canvasStyle: {}\n};\n\nvar QuickStartCanvas = function (_PtsCanvas) {\n  inherits(QuickStartCanvas, _PtsCanvas);\n\n  function QuickStartCanvas() {\n    classCallCheck(this, QuickStartCanvas);\n    return possibleConstructorReturn(this, (QuickStartCanvas.__proto__ || Object.getPrototypeOf(QuickStartCanvas)).apply(this, arguments));\n  }\n\n  createClass(QuickStartCanvas, [{\n    key: 'animate',\n    value: function animate(time, ftime) {\n      if (this.props.onAnimate) this.props.onAnimate(this.space, this.form, time, ftime);\n    }\n  }, {\n    key: 'start',\n    value: function start(bound, space) {\n      if (this.props.onStart) this.props.onStart(bound, space);\n    }\n  }, {\n    key: 'resize',\n    value: function resize(size, evt) {\n      if (this.props.onResize) this.props.onResize(this.space, this.form, size, evt);\n    }\n  }, {\n    key: 'action',\n    value: function action(type, px, py, evt) {\n      if (this.props.onAction) this.props.onAction(this.space, this.form, type, px, py, evt);\n    }\n  }]);\n  return QuickStartCanvas;\n}(PtsCanvas);\n\nQuickStartCanvas.defaultProps = {\n  name: \"pts-react\",\n  // maps to className of the container div\n  background: \"#9ab\",\n  resize: true,\n  retina: true,\n  play: true,\n  touch: true,\n  style: {},\n  canvasStyle: {},\n  onStart: undefined,\n  onAnimate: undefined,\n  onResize: undefined,\n  onAction: undefined\n};\nexport { PtsCanvas, QuickStartCanvas };","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import superPropBase from \"@babel/runtime/helpers/esm/superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nimport isNativeFunction from \"@babel/runtime/helpers/esm/isNativeFunction\";\nimport construct from \"@babel/runtime/helpers/esm/construct\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import \"core-js/modules/es.array.reduce\";\nimport _classCallCheck from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/*! Source code licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\nimport { Group } from \"./Pt\";\nexport var Const = {\n  xy: \"xy\",\n  yz: \"yz\",\n  xz: \"xz\",\n  xyz: \"xyz\",\n  horizontal: 0,\n  vertical: 1,\n  identical: 0,\n  right: 4,\n  bottom_right: 5,\n  bottom: 6,\n  bottom_left: 7,\n  left: 8,\n  top_left: 1,\n  top: 2,\n  top_right: 3,\n  epsilon: 0.0001,\n  max: Number.MAX_VALUE,\n  min: Number.MIN_VALUE,\n  pi: Math.PI,\n  two_pi: 6.283185307179586,\n  half_pi: 1.5707963267948966,\n  quarter_pi: 0.7853981633974483,\n  one_degree: 0.017453292519943295,\n  rad_to_deg: 57.29577951308232,\n  deg_to_rad: 0.017453292519943295,\n  gravity: 9.81,\n  newton: 0.10197,\n  gaussian: 0.3989422804014327\n};\nexport var Util = /*#__PURE__*/function () {\n  function Util() {\n    _classCallCheck(this, Util);\n  }\n\n  _createClass(Util, null, [{\n    key: \"warnLevel\",\n    value: function warnLevel(lv) {\n      if (lv) {\n        Util._warnLevel = lv;\n      }\n\n      return Util._warnLevel;\n    }\n  }, {\n    key: \"getArgs\",\n    value: function getArgs(args) {\n      if (args.length < 1) return [];\n      var pos = [];\n      var isArray = Array.isArray(args[0]) || ArrayBuffer.isView(args[0]);\n\n      if (typeof args[0] === 'number') {\n        pos = Array.prototype.slice.call(args);\n      } else if (typeof args[0] === 'object' && !isArray) {\n        var a = [\"x\", \"y\", \"z\", \"w\"];\n        var p = args[0];\n\n        for (var i = 0; i < a.length; i++) {\n          if (p.length && i >= p.length || !(a[i] in p)) break;\n          pos.push(p[a[i]]);\n        }\n      } else if (isArray) {\n        pos = [].slice.call(args[0]);\n      }\n\n      return pos;\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      var message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"error\";\n      var defaultReturn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n      if (Util.warnLevel() == \"error\") {\n        throw new Error(message);\n      } else if (Util.warnLevel() == \"warn\") {\n        console.warn(message);\n      }\n\n      return defaultReturn;\n    }\n  }, {\n    key: \"randomInt\",\n    value: function randomInt(range) {\n      var start = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      return Math.floor(Math.random() * range) + start;\n    }\n  }, {\n    key: \"split\",\n    value: function split(pts, size, stride) {\n      var loopBack = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var matchSize = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      var chunks = [];\n      var part = [];\n      var st = stride || size;\n      var index = 0;\n      if (pts.length <= 0 || st <= 0) return [];\n\n      while (index < pts.length) {\n        part = [];\n\n        for (var k = 0; k < size; k++) {\n          if (loopBack) {\n            part.push(pts[(index + k) % pts.length]);\n          } else {\n            if (index + k >= pts.length) break;\n            part.push(pts[index + k]);\n          }\n        }\n\n        index += st;\n        if (!matchSize || matchSize && part.length === size) chunks.push(part);\n      }\n\n      return chunks;\n    }\n  }, {\n    key: \"flatten\",\n    value: function flatten(pts) {\n      var flattenAsGroup = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var arr = flattenAsGroup ? new Group() : new Array();\n      return arr.concat.apply(arr, pts);\n    }\n  }, {\n    key: \"combine\",\n    value: function combine(a, b, op) {\n      var result = [];\n\n      for (var i = 0, len = a.length; i < len; i++) {\n        for (var k = 0, lenB = b.length; k < lenB; k++) {\n          result.push(op(a[i], b[k]));\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"zip\",\n    value: function zip(arrays) {\n      var z = [];\n\n      for (var i = 0, len = arrays[0].length; i < len; i++) {\n        var p = [];\n\n        for (var k = 0; k < arrays.length; k++) {\n          p.push(arrays[k][i]);\n        }\n\n        z.push(p);\n      }\n\n      return z;\n    }\n  }, {\n    key: \"stepper\",\n    value: function stepper(max) {\n      var min = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var stride = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n      var callback = arguments.length > 3 ? arguments[3] : undefined;\n      var c = min;\n      return function () {\n        c += stride;\n\n        if (c >= max) {\n          c = min + (c - max);\n        }\n\n        if (callback) callback(c);\n        return c;\n      };\n    }\n  }, {\n    key: \"forRange\",\n    value: function forRange(fn, range) {\n      var start = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var step = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n      var temp = [];\n\n      for (var i = start, len = range; i < len; i += step) {\n        temp[i] = fn(i);\n      }\n\n      return temp;\n    }\n  }, {\n    key: \"load\",\n    value: function load(url, callback) {\n      var request = new XMLHttpRequest();\n      request.open('GET', url, true);\n\n      request.onload = function () {\n        if (request.status >= 200 && request.status < 400) {\n          callback(request.responseText, true);\n        } else {\n          callback(\"Server error (\".concat(request.status, \") when loading \\\"\").concat(url, \"\\\"\"), false);\n        }\n      };\n\n      request.onerror = function () {\n        callback(\"Unknown network error\", false);\n      };\n\n      request.send();\n    }\n  }, {\n    key: \"performance\",\n    value: function performance() {\n      var avgFrames = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;\n      var last = Date.now();\n      var avg = [];\n      return function () {\n        var now = Date.now();\n        avg.push(now - last);\n        if (avg.length >= avgFrames) avg.shift();\n        last = now;\n        return Math.floor(avg.reduce(function (a, b) {\n          return a + b;\n        }, 0) / avg.length);\n      };\n    }\n  }, {\n    key: \"iterFromPtLike\",\n    value: function iterFromPtLike(list) {\n      return Array.isArray(list) ? list[Symbol.iterator]() : list;\n    }\n  }, {\n    key: \"iterFromPt\",\n    value: function iterFromPt(list) {\n      return Array.isArray(list) ? list[Symbol.iterator]() : list;\n    }\n  }]);\n\n  return Util;\n}();\nUtil._warnLevel = \"mute\";","import \"core-js/modules/es.array.reduce\";\nimport _classCallCheck from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/*! Source code licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\nimport { Pt, Group } from \"./Pt\";\nimport { Line } from \"./Op\";\nexport var Vec = /*#__PURE__*/function () {\n  function Vec() {\n    _classCallCheck(this, Vec);\n  }\n\n  _createClass(Vec, null, [{\n    key: \"add\",\n    value: function add(a, b) {\n      if (typeof b == \"number\") {\n        for (var i = 0, len = a.length; i < len; i++) {\n          a[i] += b;\n        }\n      } else {\n        for (var _i = 0, _len = a.length; _i < _len; _i++) {\n          a[_i] += b[_i] || 0;\n        }\n      }\n\n      return a;\n    }\n  }, {\n    key: \"subtract\",\n    value: function subtract(a, b) {\n      if (typeof b == \"number\") {\n        for (var i = 0, len = a.length; i < len; i++) {\n          a[i] -= b;\n        }\n      } else {\n        for (var _i2 = 0, _len2 = a.length; _i2 < _len2; _i2++) {\n          a[_i2] -= b[_i2] || 0;\n        }\n      }\n\n      return a;\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(a, b) {\n      if (typeof b == \"number\") {\n        for (var i = 0, len = a.length; i < len; i++) {\n          a[i] *= b;\n        }\n      } else {\n        if (a.length != b.length) {\n          throw new Error(\"Cannot do element-wise multiply since the array lengths don't match: \".concat(a.toString(), \" multiply-with \").concat(b.toString()));\n        }\n\n        for (var _i3 = 0, _len3 = a.length; _i3 < _len3; _i3++) {\n          a[_i3] *= b[_i3];\n        }\n      }\n\n      return a;\n    }\n  }, {\n    key: \"divide\",\n    value: function divide(a, b) {\n      if (typeof b == \"number\") {\n        if (b === 0) throw new Error(\"Cannot divide by zero\");\n\n        for (var i = 0, len = a.length; i < len; i++) {\n          a[i] /= b;\n        }\n      } else {\n        if (a.length != b.length) {\n          throw new Error(\"Cannot do element-wise divide since the array lengths don't match. \".concat(a.toString(), \" divide-by \").concat(b.toString()));\n        }\n\n        for (var _i4 = 0, _len4 = a.length; _i4 < _len4; _i4++) {\n          a[_i4] /= b[_i4];\n        }\n      }\n\n      return a;\n    }\n  }, {\n    key: \"dot\",\n    value: function dot(a, b) {\n      if (a.length != b.length) throw new Error(\"Array lengths don't match\");\n      var d = 0;\n\n      for (var i = 0, len = a.length; i < len; i++) {\n        d += a[i] * b[i];\n      }\n\n      return d;\n    }\n  }, {\n    key: \"cross2D\",\n    value: function cross2D(a, b) {\n      return a[0] * b[1] - a[1] * b[0];\n    }\n  }, {\n    key: \"cross\",\n    value: function cross(a, b) {\n      return new Pt(a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]);\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude(a) {\n      return Math.sqrt(Vec.dot(a, a));\n    }\n  }, {\n    key: \"unit\",\n    value: function unit(a) {\n      var magnitude = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n      var m = magnitude === undefined ? Vec.magnitude(a) : magnitude;\n      if (m === 0) return Pt.make(a.length);\n      return Vec.divide(a, m);\n    }\n  }, {\n    key: \"abs\",\n    value: function abs(a) {\n      return Vec.map(a, Math.abs);\n    }\n  }, {\n    key: \"floor\",\n    value: function floor(a) {\n      return Vec.map(a, Math.floor);\n    }\n  }, {\n    key: \"ceil\",\n    value: function ceil(a) {\n      return Vec.map(a, Math.ceil);\n    }\n  }, {\n    key: \"round\",\n    value: function round(a) {\n      return Vec.map(a, Math.round);\n    }\n  }, {\n    key: \"max\",\n    value: function max(a) {\n      var m = Number.MIN_VALUE;\n      var index = 0;\n\n      for (var i = 0, len = a.length; i < len; i++) {\n        m = Math.max(m, a[i]);\n        if (m === a[i]) index = i;\n      }\n\n      return {\n        value: m,\n        index: index\n      };\n    }\n  }, {\n    key: \"min\",\n    value: function min(a) {\n      var m = Number.MAX_VALUE;\n      var index = 0;\n\n      for (var i = 0, len = a.length; i < len; i++) {\n        m = Math.min(m, a[i]);\n        if (m === a[i]) index = i;\n      }\n\n      return {\n        value: m,\n        index: index\n      };\n    }\n  }, {\n    key: \"sum\",\n    value: function sum(a) {\n      var s = 0;\n\n      for (var i = 0, len = a.length; i < len; i++) {\n        s += a[i];\n      }\n\n      return s;\n    }\n  }, {\n    key: \"map\",\n    value: function map(a, fn) {\n      for (var i = 0, len = a.length; i < len; i++) {\n        a[i] = fn(a[i], i, a);\n      }\n\n      return a;\n    }\n  }]);\n\n  return Vec;\n}();\nexport var Mat = /*#__PURE__*/function () {\n  function Mat() {\n    _classCallCheck(this, Mat);\n  }\n\n  _createClass(Mat, null, [{\n    key: \"add\",\n    value: function add(a, b) {\n      if (typeof b != \"number\") {\n        if (a[0].length != b[0].length) throw new Error(\"Cannot add matrix if rows' and columns' size don't match.\");\n        if (a.length != b.length) throw new Error(\"Cannot add matrix if rows' and columns' size don't match.\");\n      }\n\n      var g = new Group();\n      var isNum = typeof b == \"number\";\n\n      for (var i = 0, len = a.length; i < len; i++) {\n        g.push(a[i].$add(isNum ? b : b[i]));\n      }\n\n      return g;\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply(a, b) {\n      var transposed = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var elementwise = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var g = new Group();\n\n      if (typeof b != \"number\") {\n        if (elementwise) {\n          if (a.length != b.length) throw new Error(\"Cannot multiply matrix element-wise because the matrices' sizes don't match.\");\n\n          for (var ai = 0, alen = a.length; ai < alen; ai++) {\n            g.push(a[ai].$multiply(b[ai]));\n          }\n        } else {\n          if (!transposed && a[0].length != b.length) throw new Error(\"Cannot multiply matrix if rows in matrix-a don't match columns in matrix-b.\");\n          if (transposed && a[0].length != b[0].length) throw new Error(\"Cannot multiply matrix if transposed and the columns in both matrices don't match.\");\n          if (!transposed) b = Mat.transpose(b);\n\n          for (var _ai = 0, _alen = a.length; _ai < _alen; _ai++) {\n            var p = Pt.make(b.length, 0);\n\n            for (var bi = 0, blen = b.length; bi < blen; bi++) {\n              p[bi] = Vec.dot(a[_ai], b[bi]);\n            }\n\n            g.push(p);\n          }\n        }\n      } else {\n        for (var _ai2 = 0, _alen2 = a.length; _ai2 < _alen2; _ai2++) {\n          g.push(a[_ai2].$multiply(b));\n        }\n      }\n\n      return g;\n    }\n  }, {\n    key: \"zipSlice\",\n    value: function zipSlice(g, index) {\n      var defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var z = [];\n\n      for (var i = 0, len = g.length; i < len; i++) {\n        if (g[i].length - 1 < index && defaultValue === false) throw \"Index \".concat(index, \" is out of bounds\");\n        z.push(g[i][index] || defaultValue);\n      }\n\n      return new Pt(z);\n    }\n  }, {\n    key: \"zip\",\n    value: function zip(g) {\n      var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var useLongest = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var ps = new Group();\n      var len = useLongest ? g.reduce(function (a, b) {\n        return Math.max(a, b.length);\n      }, 0) : g[0].length;\n\n      for (var i = 0; i < len; i++) {\n        ps.push(Mat.zipSlice(g, i, defaultValue));\n      }\n\n      return ps;\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose(g) {\n      var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var useLongest = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      return Mat.zip(g, defaultValue, useLongest);\n    }\n  }, {\n    key: \"transform2D\",\n    value: function transform2D(pt, m) {\n      var x = pt[0] * m[0][0] + pt[1] * m[1][0] + m[2][0];\n      var y = pt[0] * m[0][1] + pt[1] * m[1][1] + m[2][1];\n      return new Pt(x, y);\n    }\n  }, {\n    key: \"scale2DMatrix\",\n    value: function scale2DMatrix(x, y) {\n      return new Group(new Pt(x, 0, 0), new Pt(0, y, 0), new Pt(0, 0, 1));\n    }\n  }, {\n    key: \"rotate2DMatrix\",\n    value: function rotate2DMatrix(cosA, sinA) {\n      return new Group(new Pt(cosA, sinA, 0), new Pt(-sinA, cosA, 0), new Pt(0, 0, 1));\n    }\n  }, {\n    key: \"shear2DMatrix\",\n    value: function shear2DMatrix(tanX, tanY) {\n      return new Group(new Pt(1, tanX, 0), new Pt(tanY, 1, 0), new Pt(0, 0, 1));\n    }\n  }, {\n    key: \"translate2DMatrix\",\n    value: function translate2DMatrix(x, y) {\n      return new Group(new Pt(1, 0, 0), new Pt(0, 1, 0), new Pt(x, y, 1));\n    }\n  }, {\n    key: \"scaleAt2DMatrix\",\n    value: function scaleAt2DMatrix(sx, sy, at) {\n      var m = Mat.scale2DMatrix(sx, sy);\n      m[2][0] = -at[0] * sx + at[0];\n      m[2][1] = -at[1] * sy + at[1];\n      return m;\n    }\n  }, {\n    key: \"rotateAt2DMatrix\",\n    value: function rotateAt2DMatrix(cosA, sinA, at) {\n      var m = Mat.rotate2DMatrix(cosA, sinA);\n      m[2][0] = at[0] * (1 - cosA) + at[1] * sinA;\n      m[2][1] = at[1] * (1 - cosA) - at[0] * sinA;\n      return m;\n    }\n  }, {\n    key: \"shearAt2DMatrix\",\n    value: function shearAt2DMatrix(tanX, tanY, at) {\n      var m = Mat.shear2DMatrix(tanX, tanY);\n      m[2][0] = -at[1] * tanY;\n      m[2][1] = -at[0] * tanX;\n      return m;\n    }\n  }, {\n    key: \"reflectAt2DMatrix\",\n    value: function reflectAt2DMatrix(p1, p2) {\n      var intercept = Line.intercept(p1, p2);\n\n      if (intercept == undefined) {\n        return [new Pt([-1, 0, 0]), new Pt([0, 1, 0]), new Pt([p1[0] + p2[0], 0, 1])];\n      } else {\n        var yi = intercept.yi;\n        var ang2 = Math.atan(intercept.slope) * 2;\n        var cosA = Math.cos(ang2);\n        var sinA = Math.sin(ang2);\n        return [new Pt([cosA, sinA, 0]), new Pt([sinA, -cosA, 0]), new Pt([-yi * sinA, yi + yi * cosA, 1])];\n      }\n    }\n  }]);\n\n  return Mat;\n}();","import \"core-js/modules/es.array.reduce\";\nimport _slicedToArray from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/*! Source code licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\nimport { Util } from \"./Util\";\nimport { Geom, Num } from \"./Num\";\nimport { Pt, Group } from \"./Pt\";\nimport { Mat } from \"./LinearAlgebra\";\n\nvar _errorLength = function _errorLength(obj) {\n  var param = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"expected\";\n  return Util.warn(\"Group's length is less than \" + param, obj);\n};\n\nvar _errorOutofBound = function _errorOutofBound(obj) {\n  var param = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n  return Util.warn(\"Index \".concat(param, \" is out of bound in Group\"), obj);\n};\n\nexport var Line = /*#__PURE__*/function () {\n  function Line() {\n    _classCallCheck(this, Line);\n  }\n\n  _createClass(Line, null, [{\n    key: \"fromAngle\",\n    value: function fromAngle(anchor, angle, magnitude) {\n      var g = new Group(new Pt(anchor), new Pt(anchor));\n      g[1].toAngle(angle, magnitude, true);\n      return g;\n    }\n  }, {\n    key: \"slope\",\n    value: function slope(p1, p2) {\n      return p2[0] - p1[0] === 0 ? undefined : (p2[1] - p1[1]) / (p2[0] - p1[0]);\n    }\n  }, {\n    key: \"intercept\",\n    value: function intercept(p1, p2) {\n      if (p2[0] - p1[0] === 0) {\n        return undefined;\n      } else {\n        var m = (p2[1] - p1[1]) / (p2[0] - p1[0]);\n        var c = p1[1] - m * p1[0];\n        return {\n          slope: m,\n          yi: c,\n          xi: m === 0 ? undefined : -c / m\n        };\n      }\n    }\n  }, {\n    key: \"sideOfPt2D\",\n    value: function sideOfPt2D(line, pt) {\n      return (line[1][0] - line[0][0]) * (pt[1] - line[0][1]) - (pt[0] - line[0][0]) * (line[1][1] - line[0][1]);\n    }\n  }, {\n    key: \"collinear\",\n    value: function collinear(p1, p2, p3) {\n      var threshold = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.01;\n      var a = new Pt(0, 0, 0).to(p1).$subtract(p2);\n      var b = new Pt(0, 0, 0).to(p1).$subtract(p3);\n      return a.$cross(b).divide(1000).equals(new Pt(0, 0, 0), threshold);\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude(line) {\n      return line.length >= 2 ? line[1].$subtract(line[0]).magnitude() : 0;\n    }\n  }, {\n    key: \"magnitudeSq\",\n    value: function magnitudeSq(line) {\n      return line.length >= 2 ? line[1].$subtract(line[0]).magnitudeSq() : 0;\n    }\n  }, {\n    key: \"perpendicularFromPt\",\n    value: function perpendicularFromPt(line, pt) {\n      var asProjection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      if (line[0].equals(line[1])) return undefined;\n      var a = line[0].$subtract(line[1]);\n      var b = line[1].$subtract(pt);\n      var proj = b.$subtract(a.$project(b));\n      return asProjection ? proj : proj.$add(pt);\n    }\n  }, {\n    key: \"distanceFromPt\",\n    value: function distanceFromPt(line, pt) {\n      var projectionVector = Line.perpendicularFromPt(line, pt, true);\n\n      if (projectionVector) {\n        return projectionVector.magnitude();\n      } else {\n        return line[0].$subtract(pt).magnitude();\n      }\n    }\n  }, {\n    key: \"intersectRay2D\",\n    value: function intersectRay2D(la, lb) {\n      var a = Line.intercept(la[0], la[1]);\n      var b = Line.intercept(lb[0], lb[1]);\n      var pa = la[0];\n      var pb = lb[0];\n\n      if (a == undefined) {\n        if (b == undefined) return undefined;\n        var y1 = -b.slope * (pb[0] - pa[0]) + pb[1];\n        return new Pt(pa[0], y1);\n      } else {\n        if (b == undefined) {\n          var _y = -a.slope * (pa[0] - pb[0]) + pa[1];\n\n          return new Pt(pb[0], _y);\n        } else if (b.slope != a.slope) {\n          var px = (a.slope * pa[0] - b.slope * pb[0] + pb[1] - pa[1]) / (a.slope - b.slope);\n          var py = a.slope * (px - pa[0]) + pa[1];\n          return new Pt(px, py);\n        } else {\n          if (a.yi == b.yi) {\n            return new Pt(pa[0], pa[1]);\n          } else {\n            return undefined;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"intersectLine2D\",\n    value: function intersectLine2D(la, lb) {\n      var pt = Line.intersectRay2D(la, lb);\n      return pt && Geom.withinBound(pt, la[0], la[1]) && Geom.withinBound(pt, lb[0], lb[1]) ? pt : undefined;\n    }\n  }, {\n    key: \"intersectLineWithRay2D\",\n    value: function intersectLineWithRay2D(line, ray) {\n      var pt = Line.intersectRay2D(line, ray);\n      return pt && Geom.withinBound(pt, line[0], line[1]) ? pt : undefined;\n    }\n  }, {\n    key: \"intersectPolygon2D\",\n    value: function intersectPolygon2D(lineOrRay, poly) {\n      var sourceIsRay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var fn = sourceIsRay ? Line.intersectLineWithRay2D : Line.intersectLine2D;\n      var pts = new Group();\n\n      for (var i = 0, len = poly.length; i < len; i++) {\n        var next = i === len - 1 ? 0 : i + 1;\n        var d = fn([poly[i], poly[next]], lineOrRay);\n        if (d) pts.push(d);\n      }\n\n      return pts.length > 0 ? pts : undefined;\n    }\n  }, {\n    key: \"intersectLines2D\",\n    value: function intersectLines2D(lines1, lines2) {\n      var isRay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var group = new Group();\n      var fn = isRay ? Line.intersectLineWithRay2D : Line.intersectLine2D;\n\n      for (var i = 0, len = lines1.length; i < len; i++) {\n        for (var k = 0, lenk = lines2.length; k < lenk; k++) {\n          var _ip = fn(lines1[i], lines2[k]);\n\n          if (_ip) group.push(_ip);\n        }\n      }\n\n      return group;\n    }\n  }, {\n    key: \"intersectGridWithRay2D\",\n    value: function intersectGridWithRay2D(ray, gridPt) {\n      var t = Line.intercept(new Pt(ray[0]).subtract(gridPt), new Pt(ray[1]).subtract(gridPt));\n      var g = new Group();\n      if (t && t.xi) g.push(new Pt(gridPt[0] + t.xi, gridPt[1]));\n      if (t && t.yi) g.push(new Pt(gridPt[0], gridPt[1] + t.yi));\n      return g;\n    }\n  }, {\n    key: \"intersectGridWithLine2D\",\n    value: function intersectGridWithLine2D(line, gridPt) {\n      var g = Line.intersectGridWithRay2D(line, gridPt);\n      var gg = new Group();\n\n      for (var i = 0, len = g.length; i < len; i++) {\n        if (Geom.withinBound(g[i], line[0], line[1])) gg.push(g[i]);\n      }\n\n      return gg;\n    }\n  }, {\n    key: \"intersectRect2D\",\n    value: function intersectRect2D(line, rect) {\n      var box = Geom.boundingBox(Group.fromPtArray(line));\n      if (!Rectangle.hasIntersectRect2D(box, rect)) return new Group();\n      return Line.intersectLines2D([line], Rectangle.sides(rect));\n    }\n  }, {\n    key: \"subpoints\",\n    value: function subpoints(line, num) {\n      var pts = new Group();\n\n      for (var i = 1; i <= num; i++) {\n        pts.push(Geom.interpolate(line[0], line[1], i / (num + 1)));\n      }\n\n      return pts;\n    }\n  }, {\n    key: \"crop\",\n    value: function crop(line, size) {\n      var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var cropAsCircle = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      var tdx = index === 0 ? 1 : 0;\n      var ls = line[tdx].$subtract(line[index]);\n      if (ls[0] === 0 || size[0] === 0) return line[index];\n\n      if (cropAsCircle) {\n        var d = ls.unit().multiply(size[1]);\n        return line[index].$add(d);\n      } else {\n        var rect = Rectangle.fromCenter(line[index], size);\n        var sides = Rectangle.sides(rect);\n        var sideIdx = 0;\n\n        if (Math.abs(ls[1] / ls[0]) > Math.abs(size[1] / size[0])) {\n          sideIdx = ls[1] < 0 ? 0 : 2;\n        } else {\n          sideIdx = ls[0] < 0 ? 3 : 1;\n        }\n\n        return Line.intersectRay2D(sides[sideIdx], line);\n      }\n    }\n  }, {\n    key: \"marker\",\n    value: function marker(line, size) {\n      var graphic = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"arrow\" || \"line\";\n      var atTail = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      var h = atTail ? 0 : 1;\n      var t = atTail ? 1 : 0;\n      var unit = line[h].$subtract(line[t]);\n      if (unit.magnitudeSq() === 0) return new Group();\n      unit.unit();\n      var ps = Geom.perpendicular(unit).multiply(size[0]).add(line[t]);\n\n      if (graphic == \"arrow\") {\n        ps.add(unit.$multiply(size[1]));\n        return new Group(line[t], ps[0], ps[1]);\n      } else {\n        return new Group(ps[0], ps[1]);\n      }\n    }\n  }, {\n    key: \"toRect\",\n    value: function toRect(line) {\n      return new Group(line[0].$min(line[1]), line[0].$max(line[1]));\n    }\n  }]);\n\n  return Line;\n}();\nexport var Rectangle = /*#__PURE__*/function () {\n  function Rectangle() {\n    _classCallCheck(this, Rectangle);\n  }\n\n  _createClass(Rectangle, null, [{\n    key: \"from\",\n    value: function from(topLeft, widthOrSize, height) {\n      return Rectangle.fromTopLeft(topLeft, widthOrSize, height);\n    }\n  }, {\n    key: \"fromTopLeft\",\n    value: function fromTopLeft(topLeft, widthOrSize, height) {\n      var size = typeof widthOrSize == \"number\" ? [widthOrSize, height || widthOrSize] : widthOrSize;\n      return new Group(new Pt(topLeft), new Pt(topLeft).add(size));\n    }\n  }, {\n    key: \"fromCenter\",\n    value: function fromCenter(center, widthOrSize, height) {\n      var half = typeof widthOrSize == \"number\" ? [widthOrSize / 2, (height || widthOrSize) / 2] : new Pt(widthOrSize).divide(2);\n      return new Group(new Pt(center).subtract(half), new Pt(center).add(half));\n    }\n  }, {\n    key: \"toCircle\",\n    value: function toCircle(pts) {\n      var within = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      return Circle.fromRect(pts, within);\n    }\n  }, {\n    key: \"toSquare\",\n    value: function toSquare(pts) {\n      var enclose = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var s = Rectangle.size(pts);\n      var m = enclose ? s.maxValue().value : s.minValue().value;\n      return Rectangle.fromCenter(Rectangle.center(pts), m, m);\n    }\n  }, {\n    key: \"size\",\n    value: function size(pts) {\n      return pts[0].$max(pts[1]).subtract(pts[0].$min(pts[1]));\n    }\n  }, {\n    key: \"center\",\n    value: function center(pts) {\n      var min = pts[0].$min(pts[1]);\n      var max = pts[0].$max(pts[1]);\n      return min.add(max.$subtract(min).divide(2));\n    }\n  }, {\n    key: \"corners\",\n    value: function corners(rect) {\n      var p0 = rect[0].$min(rect[1]);\n      var p2 = rect[0].$max(rect[1]);\n      return new Group(p0, new Pt(p2.x, p0.y), p2, new Pt(p0.x, p2.y));\n    }\n  }, {\n    key: \"sides\",\n    value: function sides(rect) {\n      var _Rectangle$corners = Rectangle.corners(rect),\n          _Rectangle$corners2 = _slicedToArray(_Rectangle$corners, 4),\n          p0 = _Rectangle$corners2[0],\n          p1 = _Rectangle$corners2[1],\n          p2 = _Rectangle$corners2[2],\n          p3 = _Rectangle$corners2[3];\n\n      return [new Group(p0, p1), new Group(p1, p2), new Group(p2, p3), new Group(p3, p0)];\n    }\n  }, {\n    key: \"boundingBox\",\n    value: function boundingBox(rects) {\n      var merged = Util.flatten(rects, false);\n      var min = Pt.make(2, Number.MAX_VALUE);\n      var max = Pt.make(2, Number.MIN_VALUE);\n\n      for (var i = 0, len = merged.length; i < len; i++) {\n        for (var k = 0; k < 2; k++) {\n          min[k] = Math.min(min[k], merged[i][k]);\n          max[k] = Math.max(max[k], merged[i][k]);\n        }\n      }\n\n      return new Group(min, max);\n    }\n  }, {\n    key: \"polygon\",\n    value: function polygon(rect) {\n      return Rectangle.corners(rect);\n    }\n  }, {\n    key: \"quadrants\",\n    value: function quadrants(rect, center) {\n      var corners = Rectangle.corners(rect);\n\n      var _center = center != undefined ? new Pt(center) : Rectangle.center(rect);\n\n      return corners.map(function (c) {\n        return new Group(c, _center).boundingBox();\n      });\n    }\n  }, {\n    key: \"halves\",\n    value: function halves(rect) {\n      var ratio = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.5;\n      var asRows = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var min = rect[0].$min(rect[1]);\n      var max = rect[0].$max(rect[1]);\n      var mid = asRows ? Num.lerp(min[1], max[1], ratio) : Num.lerp(min[0], max[0], ratio);\n      return asRows ? [new Group(min, new Pt(max[0], mid)), new Group(new Pt(min[0], mid), max)] : [new Group(min, new Pt(mid, max[1])), new Group(new Pt(mid, min[1]), max)];\n    }\n  }, {\n    key: \"withinBound\",\n    value: function withinBound(rect, pt) {\n      return Geom.withinBound(pt, rect[0], rect[1]);\n    }\n  }, {\n    key: \"hasIntersectRect2D\",\n    value: function hasIntersectRect2D(rect1, rect2) {\n      var resetBoundingBox = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (resetBoundingBox) {\n        rect1 = Geom.boundingBox(rect1);\n        rect2 = Geom.boundingBox(rect2);\n      }\n\n      if (rect1[0][0] > rect2[1][0] || rect2[0][0] > rect1[1][0]) return false;\n      if (rect1[0][1] > rect2[1][1] || rect2[0][1] > rect1[1][1]) return false;\n      return true;\n    }\n  }, {\n    key: \"intersectRect2D\",\n    value: function intersectRect2D(rect1, rect2) {\n      if (!Rectangle.hasIntersectRect2D(rect1, rect2)) return new Group();\n      return Line.intersectLines2D(Rectangle.sides(rect1), Rectangle.sides(rect2));\n    }\n  }]);\n\n  return Rectangle;\n}();\nexport var Circle = /*#__PURE__*/function () {\n  function Circle() {\n    _classCallCheck(this, Circle);\n  }\n\n  _createClass(Circle, null, [{\n    key: \"fromRect\",\n    value: function fromRect(pts) {\n      var enclose = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var r = 0;\n      var min = r = Rectangle.size(pts).minValue().value / 2;\n\n      if (enclose) {\n        var max = Rectangle.size(pts).maxValue().value / 2;\n        r = Math.sqrt(min * min + max * max);\n      } else {\n        r = min;\n      }\n\n      return new Group(Rectangle.center(pts), new Pt(r, r));\n    }\n  }, {\n    key: \"fromTriangle\",\n    value: function fromTriangle(pts) {\n      var enclose = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (enclose) {\n        return Triangle.circumcircle(pts);\n      } else {\n        return Triangle.incircle(pts);\n      }\n    }\n  }, {\n    key: \"fromCenter\",\n    value: function fromCenter(pt, radius) {\n      return new Group(new Pt(pt), new Pt(radius, radius));\n    }\n  }, {\n    key: \"withinBound\",\n    value: function withinBound(pts, pt) {\n      var threshold = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var d = pts[0].$subtract(pt);\n      return d.dot(d) + threshold < pts[1].x * pts[1].x;\n    }\n  }, {\n    key: \"intersectRay2D\",\n    value: function intersectRay2D(pts, ray) {\n      var d = ray[0].$subtract(ray[1]);\n      var f = pts[0].$subtract(ray[0]);\n      var a = d.dot(d);\n      var b = f.dot(d);\n      var c = f.dot(f) - pts[1].x * pts[1].x;\n      var p = b / a;\n      var q = c / a;\n      var disc = p * p - q;\n\n      if (disc < 0) {\n        return new Group();\n      } else {\n        var discSqrt = Math.sqrt(disc);\n        var t1 = -p + discSqrt;\n        var p1 = ray[0].$subtract(d.$multiply(t1));\n        if (disc === 0) return new Group(p1);\n        var t2 = -p - discSqrt;\n        var p2 = ray[0].$subtract(d.$multiply(t2));\n        return new Group(p1, p2);\n      }\n    }\n  }, {\n    key: \"intersectLine2D\",\n    value: function intersectLine2D(pts, line) {\n      var ps = Circle.intersectRay2D(pts, line);\n      var g = new Group();\n\n      if (ps.length > 0) {\n        for (var i = 0, len = ps.length; i < len; i++) {\n          if (Rectangle.withinBound(line, ps[i])) g.push(ps[i]);\n        }\n      }\n\n      return g;\n    }\n  }, {\n    key: \"intersectCircle2D\",\n    value: function intersectCircle2D(pts, circle) {\n      var dv = circle[0].$subtract(pts[0]);\n      var dr2 = dv.magnitudeSq();\n      var dr = Math.sqrt(dr2);\n      var ar = pts[1].x;\n      var br = circle[1].x;\n      var ar2 = ar * ar;\n      var br2 = br * br;\n\n      if (dr > ar + br) {\n        return new Group();\n      } else if (dr < Math.abs(ar - br)) {\n        return new Group(pts[0].clone());\n      } else {\n        var a = (ar2 - br2 + dr2) / (2 * dr);\n        var h = Math.sqrt(ar2 - a * a);\n        var p = dv.$multiply(a / dr).add(pts[0]);\n        return new Group(new Pt(p.x + h * dv.y / dr, p.y - h * dv.x / dr), new Pt(p.x - h * dv.y / dr, p.y + h * dv.x / dr));\n      }\n    }\n  }, {\n    key: \"intersectRect2D\",\n    value: function intersectRect2D(pts, rect) {\n      var sides = Rectangle.sides(rect);\n      var g = [];\n\n      for (var i = 0, len = sides.length; i < len; i++) {\n        var ps = Circle.intersectLine2D(pts, sides[i]);\n        if (ps.length > 0) g.push(ps);\n      }\n\n      return Util.flatten(g);\n    }\n  }, {\n    key: \"toRect\",\n    value: function toRect(pts) {\n      var within = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var r = pts[1][0];\n\n      if (within) {\n        var half = Math.sqrt(r * r) / 2;\n        return new Group(pts[0].$subtract(half), pts[0].$add(half));\n      } else {\n        return new Group(pts[0].$subtract(r), pts[0].$add(r));\n      }\n    }\n  }, {\n    key: \"toTriangle\",\n    value: function toTriangle(pts) {\n      var within = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (within) {\n        var ang = -Math.PI / 2;\n        var inc = Math.PI * 2 / 3;\n        var g = new Group();\n\n        for (var i = 0; i < 3; i++) {\n          g.push(pts[0].clone().toAngle(ang, pts[1][0], true));\n          ang += inc;\n        }\n\n        return g;\n      } else {\n        return Triangle.fromCenter(pts[0], pts[1][0]);\n      }\n    }\n  }]);\n\n  return Circle;\n}();\nexport var Triangle = /*#__PURE__*/function () {\n  function Triangle() {\n    _classCallCheck(this, Triangle);\n  }\n\n  _createClass(Triangle, null, [{\n    key: \"fromRect\",\n    value: function fromRect(rect) {\n      var top = rect[0].$add(rect[1]).divide(2);\n      top.y = rect[0][1];\n      var left = rect[1].clone();\n      left.x = rect[0][0];\n      return new Group(top, rect[1].clone(), left);\n    }\n  }, {\n    key: \"fromCircle\",\n    value: function fromCircle(circle) {\n      return Circle.toTriangle(circle, true);\n    }\n  }, {\n    key: \"fromCenter\",\n    value: function fromCenter(pt, size) {\n      return Triangle.fromCircle(Circle.fromCenter(pt, size));\n    }\n  }, {\n    key: \"medial\",\n    value: function medial(pts) {\n      if (pts.length < 3) return _errorLength(new Group(), 3);\n      return Polygon.midpoints(pts, true);\n    }\n  }, {\n    key: \"oppositeSide\",\n    value: function oppositeSide(pts, index) {\n      if (pts.length < 3) return _errorLength(new Group(), 3);\n\n      if (index === 0) {\n        return Group.fromPtArray([pts[1], pts[2]]);\n      } else if (index === 1) {\n        return Group.fromPtArray([pts[0], pts[2]]);\n      } else {\n        return Group.fromPtArray([pts[0], pts[1]]);\n      }\n    }\n  }, {\n    key: \"altitude\",\n    value: function altitude(pts, index) {\n      var opp = Triangle.oppositeSide(pts, index);\n\n      if (opp.length > 1) {\n        return new Group(pts[index], Line.perpendicularFromPt(opp, pts[index]));\n      } else {\n        return new Group();\n      }\n    }\n  }, {\n    key: \"orthocenter\",\n    value: function orthocenter(pts) {\n      if (pts.length < 3) return _errorLength(undefined, 3);\n      var a = Triangle.altitude(pts, 0);\n      var b = Triangle.altitude(pts, 1);\n      return Line.intersectRay2D(a, b);\n    }\n  }, {\n    key: \"incenter\",\n    value: function incenter(pts) {\n      if (pts.length < 3) return _errorLength(undefined, 3);\n      var a = Polygon.bisector(pts, 0).add(pts[0]);\n      var b = Polygon.bisector(pts, 1).add(pts[1]);\n      return Line.intersectRay2D(new Group(pts[0], a), new Group(pts[1], b));\n    }\n  }, {\n    key: \"incircle\",\n    value: function incircle(pts, center) {\n      var c = center ? center : Triangle.incenter(pts);\n      var area = Polygon.area(pts);\n      var perim = Polygon.perimeter(pts, true);\n      var r = 2 * area / perim.total;\n      return Circle.fromCenter(c, r);\n    }\n  }, {\n    key: \"circumcenter\",\n    value: function circumcenter(pts) {\n      var md = Triangle.medial(pts);\n      var a = [md[0], Geom.perpendicular(pts[0].$subtract(md[0])).p1.$add(md[0])];\n      var b = [md[1], Geom.perpendicular(pts[1].$subtract(md[1])).p1.$add(md[1])];\n      return Line.intersectRay2D(a, b);\n    }\n  }, {\n    key: \"circumcircle\",\n    value: function circumcircle(pts, center) {\n      var c = center ? center : Triangle.circumcenter(pts);\n      var r = pts[0].$subtract(c).magnitude();\n      return Circle.fromCenter(c, r);\n    }\n  }]);\n\n  return Triangle;\n}();\nexport var Polygon = /*#__PURE__*/function () {\n  function Polygon() {\n    _classCallCheck(this, Polygon);\n  }\n\n  _createClass(Polygon, null, [{\n    key: \"centroid\",\n    value: function centroid(pts) {\n      return Geom.centroid(pts);\n    }\n  }, {\n    key: \"rectangle\",\n    value: function rectangle(center, widthOrSize, height) {\n      return Rectangle.corners(Rectangle.fromCenter(center, widthOrSize, height));\n    }\n  }, {\n    key: \"fromCenter\",\n    value: function fromCenter(center, radius, sides) {\n      var g = new Group();\n\n      for (var i = 0; i < sides; i++) {\n        var ang = Math.PI * 2 * i / sides;\n        g.push(new Pt(Math.cos(ang) * radius, Math.sin(ang) * radius).add(center));\n      }\n\n      return g;\n    }\n  }, {\n    key: \"lineAt\",\n    value: function lineAt(pts, idx) {\n      if (idx < 0 || idx >= pts.length) throw new Error(\"index out of the Polygon's range\");\n      return new Group(pts[idx], idx === pts.length - 1 ? pts[0] : pts[idx + 1]);\n    }\n  }, {\n    key: \"lines\",\n    value: function lines(pts) {\n      var closePath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (pts.length < 2) return _errorLength(new Group(), 2);\n      var sp = Util.split(pts, 2, 1);\n      if (closePath) sp.push(new Group(pts[pts.length - 1], pts[0]));\n      return sp.map(function (g) {\n        return g;\n      });\n    }\n  }, {\n    key: \"midpoints\",\n    value: function midpoints(pts) {\n      var closePath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var t = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.5;\n      if (pts.length < 2) return _errorLength(new Group(), 2);\n      var sides = Polygon.lines(pts, closePath);\n      var mids = sides.map(function (s) {\n        return Geom.interpolate(s[0], s[1], t);\n      });\n      return mids;\n    }\n  }, {\n    key: \"adjacentSides\",\n    value: function adjacentSides(pts, index) {\n      var closePath = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      if (pts.length < 2) return _errorLength(new Group(), 2);\n      if (index < 0 || index >= pts.length) return _errorOutofBound(new Group(), index);\n      var gs = [];\n      var left = index - 1;\n      if (closePath && left < 0) left = pts.length - 1;\n      if (left >= 0) gs.push(new Group(pts[index], pts[left]));\n      var right = index + 1;\n      if (closePath && right > pts.length - 1) right = 0;\n      if (right <= pts.length - 1) gs.push(new Group(pts[index], pts[right]));\n      return gs;\n    }\n  }, {\n    key: \"bisector\",\n    value: function bisector(pts, index) {\n      var sides = Polygon.adjacentSides(pts, index, true);\n\n      if (sides.length >= 2) {\n        var a = sides[0][1].$subtract(sides[0][0]).unit();\n        var b = sides[1][1].$subtract(sides[1][0]).unit();\n        return a.add(b).divide(2);\n      } else {\n        return undefined;\n      }\n    }\n  }, {\n    key: \"perimeter\",\n    value: function perimeter(pts) {\n      var closePath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (pts.length < 2) return _errorLength(new Group(), 2);\n      var lines = Polygon.lines(pts, closePath);\n      var mag = 0;\n      var p = Pt.make(lines.length, 0);\n\n      for (var i = 0, len = lines.length; i < len; i++) {\n        var m = Line.magnitude(lines[i]);\n        mag += m;\n        p[i] = m;\n      }\n\n      return {\n        total: mag,\n        segments: p\n      };\n    }\n  }, {\n    key: \"area\",\n    value: function area(pts) {\n      if (pts.length < 3) return _errorLength(new Group(), 3);\n\n      var det = function det(a, b) {\n        return a[0] * b[1] - a[1] * b[0];\n      };\n\n      var area = 0;\n\n      for (var i = 0, len = pts.length; i < len; i++) {\n        if (i < pts.length - 1) {\n          area += det(pts[i], pts[i + 1]);\n        } else {\n          area += det(pts[i], pts[0]);\n        }\n      }\n\n      return Math.abs(area / 2);\n    }\n  }, {\n    key: \"convexHull\",\n    value: function convexHull(pts) {\n      var sorted = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (pts.length < 3) return _errorLength(new Group(), 3);\n\n      if (!sorted) {\n        pts = pts.slice();\n        pts.sort(function (a, b) {\n          return a[0] - b[0];\n        });\n      }\n\n      var left = function left(a, b, c) {\n        return (b[0] - a[0]) * (c[1] - a[1]) - (c[0] - a[0]) * (b[1] - a[1]) > 0;\n      };\n\n      var dq = [];\n      var bot = pts.length - 2;\n      var top = bot + 3;\n      dq[bot] = pts[2];\n      dq[top] = pts[2];\n\n      if (left(pts[0], pts[1], pts[2])) {\n        dq[bot + 1] = pts[0];\n        dq[bot + 2] = pts[1];\n      } else {\n        dq[bot + 1] = pts[1];\n        dq[bot + 2] = pts[0];\n      }\n\n      for (var i = 3, len = pts.length; i < len; i++) {\n        var pt = pts[i];\n\n        if (left(dq[bot], dq[bot + 1], pt) && left(dq[top - 1], dq[top], pt)) {\n          continue;\n        }\n\n        while (!left(dq[bot], dq[bot + 1], pt)) {\n          bot += 1;\n        }\n\n        bot -= 1;\n        dq[bot] = pt;\n\n        while (!left(dq[top - 1], dq[top], pt)) {\n          top -= 1;\n        }\n\n        top += 1;\n        dq[top] = pt;\n      }\n\n      var hull = new Group();\n\n      for (var h = 0; h < top - bot; h++) {\n        hull.push(dq[bot + h]);\n      }\n\n      return hull;\n    }\n  }, {\n    key: \"network\",\n    value: function network(pts) {\n      var originIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var g = [];\n\n      for (var i = 0, len = pts.length; i < len; i++) {\n        if (i != originIndex) g.push(new Group(pts[originIndex], pts[i]));\n      }\n\n      return g;\n    }\n  }, {\n    key: \"nearestPt\",\n    value: function nearestPt(pts, pt) {\n      var _near = Number.MAX_VALUE;\n\n      var _item = -1;\n\n      for (var i = 0, len = pts.length; i < len; i++) {\n        var d = pts[i].$subtract(pt).magnitudeSq();\n\n        if (d < _near) {\n          _near = d;\n          _item = i;\n        }\n      }\n\n      return _item;\n    }\n  }, {\n    key: \"projectAxis\",\n    value: function projectAxis(poly, unitAxis) {\n      var dot = unitAxis.dot(poly[0]);\n      var d = new Pt(dot, dot);\n\n      for (var n = 1, len = poly.length; n < len; n++) {\n        dot = unitAxis.dot(poly[n]);\n        d = new Pt(Math.min(dot, d[0]), Math.max(dot, d[1]));\n      }\n\n      return d;\n    }\n  }, {\n    key: \"_axisOverlap\",\n    value: function _axisOverlap(poly1, poly2, unitAxis) {\n      var pa = Polygon.projectAxis(poly1, unitAxis);\n      var pb = Polygon.projectAxis(poly2, unitAxis);\n      return pa[0] < pb[0] ? pb[0] - pa[1] : pa[0] - pb[1];\n    }\n  }, {\n    key: \"hasIntersectPoint\",\n    value: function hasIntersectPoint(poly, pt) {\n      var c = false;\n\n      for (var i = 0, len = poly.length; i < len; i++) {\n        var ln = Polygon.lineAt(poly, i);\n\n        if (ln[0][1] > pt[1] != ln[1][1] > pt[1] && pt[0] < (ln[1][0] - ln[0][0]) * (pt[1] - ln[0][1]) / (ln[1][1] - ln[0][1]) + ln[0][0]) {\n          c = !c;\n        }\n      }\n\n      return c;\n    }\n  }, {\n    key: \"hasIntersectCircle\",\n    value: function hasIntersectCircle(poly, circle) {\n      var info = {\n        which: -1,\n        dist: 0,\n        normal: null,\n        edge: null,\n        vertex: null\n      };\n      var c = circle[0];\n      var r = circle[1][0];\n      var minDist = Number.MAX_SAFE_INTEGER;\n\n      for (var i = 0, len = poly.length; i < len; i++) {\n        var edge = Polygon.lineAt(poly, i);\n        var axis = new Pt(edge[0].y - edge[1].y, edge[1].x - edge[0].x).unit();\n        var poly2 = new Group(c.$add(axis.$multiply(r)), c.$subtract(axis.$multiply(r)));\n\n        var dist = Polygon._axisOverlap(poly, poly2, axis);\n\n        if (dist > 0) {\n          return null;\n        } else if (Math.abs(dist) < minDist) {\n          var check = Rectangle.withinBound(edge, Line.perpendicularFromPt(edge, c)) || Circle.intersectLine2D(circle, edge).length > 0;\n\n          if (check) {\n            info.edge = edge;\n            info.normal = axis;\n            minDist = Math.abs(dist);\n            info.which = i;\n          }\n        }\n      }\n\n      if (!info.edge) return null;\n      var dir = c.$subtract(Polygon.centroid(poly)).dot(info.normal);\n      if (dir < 0) info.normal.multiply(-1);\n      info.dist = minDist;\n      info.vertex = c;\n      return info;\n    }\n  }, {\n    key: \"hasIntersectPolygon\",\n    value: function hasIntersectPolygon(poly1, poly2) {\n      var info = {\n        which: -1,\n        dist: 0,\n        normal: new Pt(),\n        edge: new Group(),\n        vertex: new Pt()\n      };\n      var minDist = Number.MAX_SAFE_INTEGER;\n\n      for (var i = 0, plen = poly1.length + poly2.length; i < plen; i++) {\n        var edge = i < poly1.length ? Polygon.lineAt(poly1, i) : Polygon.lineAt(poly2, i - poly1.length);\n        var axis = new Pt(edge[0].y - edge[1].y, edge[1].x - edge[0].x).unit();\n\n        var dist = Polygon._axisOverlap(poly1, poly2, axis);\n\n        if (dist > 0) {\n          return null;\n        } else if (Math.abs(dist) < minDist) {\n          info.edge = edge;\n          info.normal = axis;\n          minDist = Math.abs(dist);\n          info.which = i < poly1.length ? 0 : 1;\n        }\n      }\n\n      info.dist = minDist;\n      var b1 = info.which === 0 ? poly2 : poly1;\n      var b2 = info.which === 0 ? poly1 : poly2;\n      var c1 = Polygon.centroid(b1);\n      var c2 = Polygon.centroid(b2);\n      var dir = c1.$subtract(c2).dot(info.normal);\n      if (dir < 0) info.normal.multiply(-1);\n      var smallest = Number.MAX_SAFE_INTEGER;\n\n      for (var _i = 0, len = b1.length; _i < len; _i++) {\n        var d = info.normal.dot(b1[_i].$subtract(c2));\n\n        if (d < smallest) {\n          smallest = d;\n          info.vertex = b1[_i];\n        }\n      }\n\n      return info;\n    }\n  }, {\n    key: \"intersectPolygon2D\",\n    value: function intersectPolygon2D(poly1, poly2) {\n      var lp = Polygon.lines(poly1);\n      var g = [];\n\n      for (var i = 0, len = lp.length; i < len; i++) {\n        var ins = Line.intersectPolygon2D(lp[i], poly2, false);\n        if (ins) g.push(ins);\n      }\n\n      return Util.flatten(g, true);\n    }\n  }, {\n    key: \"toRects\",\n    value: function toRects(polys) {\n      var boxes = polys.map(function (g) {\n        return Geom.boundingBox(g);\n      });\n      var merged = Util.flatten(boxes, false);\n      boxes.unshift(Geom.boundingBox(merged));\n      return boxes;\n    }\n  }]);\n\n  return Polygon;\n}();\nexport var Curve = /*#__PURE__*/function () {\n  function Curve() {\n    _classCallCheck(this, Curve);\n  }\n\n  _createClass(Curve, null, [{\n    key: \"getSteps\",\n    value: function getSteps(steps) {\n      var ts = new Group();\n\n      for (var i = 0; i <= steps; i++) {\n        var t = i / steps;\n        ts.push(new Pt(t * t * t, t * t, t, 1));\n      }\n\n      return ts;\n    }\n  }, {\n    key: \"controlPoints\",\n    value: function controlPoints(pts) {\n      var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var copyStart = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      if (index > pts.length - 1) return new Group();\n\n      var _index = function _index(i) {\n        return i < pts.length - 1 ? i : pts.length - 1;\n      };\n\n      var p0 = pts[index];\n      index = copyStart ? index : index + 1;\n      return new Group(p0, pts[_index(index++)], pts[_index(index++)], pts[_index(index++)]);\n    }\n  }, {\n    key: \"_calcPt\",\n    value: function _calcPt(ctrls, params) {\n      var x = ctrls.reduce(function (a, c, i) {\n        return a + c.x * params[i];\n      }, 0);\n      var y = ctrls.reduce(function (a, c, i) {\n        return a + c.y * params[i];\n      }, 0);\n\n      if (ctrls[0].length > 2) {\n        var z = ctrls.reduce(function (a, c, i) {\n          return a + c.z * params[i];\n        }, 0);\n        return new Pt(x, y, z);\n      }\n\n      return new Pt(x, y);\n    }\n  }, {\n    key: \"catmullRom\",\n    value: function catmullRom(pts) {\n      var steps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n      if (pts.length < 2) return new Group();\n      var ps = new Group();\n      var ts = Curve.getSteps(steps);\n      var c = Curve.controlPoints(pts, 0, true);\n\n      for (var i = 0; i <= steps; i++) {\n        ps.push(Curve.catmullRomStep(ts[i], c));\n      }\n\n      var k = 0;\n\n      while (k < pts.length - 2) {\n        var cp = Curve.controlPoints(pts, k);\n\n        if (cp.length > 0) {\n          for (var _i2 = 0; _i2 <= steps; _i2++) {\n            ps.push(Curve.catmullRomStep(ts[_i2], cp));\n          }\n\n          k++;\n        }\n      }\n\n      return ps;\n    }\n  }, {\n    key: \"catmullRomStep\",\n    value: function catmullRomStep(step, ctrls) {\n      var m = new Group(new Pt(-0.5, 1, -0.5, 0), new Pt(1.5, -2.5, 0, 1), new Pt(-1.5, 2, 0.5, 0), new Pt(0.5, -0.5, 0, 0));\n      return Curve._calcPt(ctrls, Mat.multiply([step], m, true)[0]);\n    }\n  }, {\n    key: \"cardinal\",\n    value: function cardinal(pts) {\n      var steps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n      var tension = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.5;\n      if (pts.length < 2) return new Group();\n      var ps = new Group();\n      var ts = Curve.getSteps(steps);\n      var c = Curve.controlPoints(pts, 0, true);\n\n      for (var i = 0; i <= steps; i++) {\n        ps.push(Curve.cardinalStep(ts[i], c, tension));\n      }\n\n      var k = 0;\n\n      while (k < pts.length - 2) {\n        var cp = Curve.controlPoints(pts, k);\n\n        if (cp.length > 0) {\n          for (var _i3 = 0; _i3 <= steps; _i3++) {\n            ps.push(Curve.cardinalStep(ts[_i3], cp, tension));\n          }\n\n          k++;\n        }\n      }\n\n      return ps;\n    }\n  }, {\n    key: \"cardinalStep\",\n    value: function cardinalStep(step, ctrls) {\n      var tension = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.5;\n      var m = new Group(new Pt(-1, 2, -1, 0), new Pt(-1, 1, 0, 0), new Pt(1, -2, 1, 0), new Pt(1, -1, 0, 0));\n      var h = Mat.multiply([step], m, true)[0].multiply(tension);\n      var h2 = 2 * step[0] - 3 * step[1] + 1;\n      var h3 = -2 * step[0] + 3 * step[1];\n\n      var pt = Curve._calcPt(ctrls, h);\n\n      pt.x += h2 * ctrls[1].x + h3 * ctrls[2].x;\n      pt.y += h2 * ctrls[1].y + h3 * ctrls[2].y;\n      if (pt.length > 2) pt.z += h2 * ctrls[1].z + h3 * ctrls[2].z;\n      return pt;\n    }\n  }, {\n    key: \"bezier\",\n    value: function bezier(pts) {\n      var steps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n      if (pts.length < 4) return new Group();\n      var ps = new Group();\n      var ts = Curve.getSteps(steps);\n      var k = 0;\n\n      while (k < pts.length - 3) {\n        var c = Curve.controlPoints(pts, k);\n\n        if (c.length > 0) {\n          for (var i = 0; i <= steps; i++) {\n            ps.push(Curve.bezierStep(ts[i], c));\n          }\n\n          k += 3;\n        }\n      }\n\n      return ps;\n    }\n  }, {\n    key: \"bezierStep\",\n    value: function bezierStep(step, ctrls) {\n      var m = new Group(new Pt(-1, 3, -3, 1), new Pt(3, -6, 3, 0), new Pt(-3, 3, 0, 0), new Pt(1, 0, 0, 0));\n      return Curve._calcPt(ctrls, Mat.multiply([step], m, true)[0]);\n    }\n  }, {\n    key: \"bspline\",\n    value: function bspline(pts) {\n      var steps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n      var tension = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n      if (pts.length < 2) return new Group();\n      var ps = new Group();\n      var ts = Curve.getSteps(steps);\n      var k = 0;\n\n      while (k < pts.length - 3) {\n        var c = Curve.controlPoints(pts, k);\n\n        if (c.length > 0) {\n          if (tension !== 1) {\n            for (var i = 0; i <= steps; i++) {\n              ps.push(Curve.bsplineTensionStep(ts[i], c, tension));\n            }\n          } else {\n            for (var _i4 = 0; _i4 <= steps; _i4++) {\n              ps.push(Curve.bsplineStep(ts[_i4], c));\n            }\n          }\n\n          k++;\n        }\n      }\n\n      return ps;\n    }\n  }, {\n    key: \"bsplineStep\",\n    value: function bsplineStep(step, ctrls) {\n      var m = new Group(new Pt(-0.16666666666666666, 0.5, -0.5, 0.16666666666666666), new Pt(0.5, -1, 0, 0.6666666666666666), new Pt(-0.5, 0.5, 0.5, 0.16666666666666666), new Pt(0.16666666666666666, 0, 0, 0));\n      return Curve._calcPt(ctrls, Mat.multiply([step], m, true)[0]);\n    }\n  }, {\n    key: \"bsplineTensionStep\",\n    value: function bsplineTensionStep(step, ctrls) {\n      var tension = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n      var m = new Group(new Pt(-0.16666666666666666, 0.5, -0.5, 0.16666666666666666), new Pt(-1.5, 2, 0, -0.3333333333333333), new Pt(1.5, -2.5, 0.5, 0.16666666666666666), new Pt(0.16666666666666666, 0, 0, 0));\n      var h = Mat.multiply([step], m, true)[0].multiply(tension);\n      var h2 = 2 * step[0] - 3 * step[1] + 1;\n      var h3 = -2 * step[0] + 3 * step[1];\n\n      var pt = Curve._calcPt(ctrls, h);\n\n      pt.x += h2 * ctrls[1].x + h3 * ctrls[2].x;\n      pt.y += h2 * ctrls[1].y + h3 * ctrls[2].y;\n      if (pt.length > 2) pt.z += h2 * ctrls[1].z + h3 * ctrls[2].z;\n      return pt;\n    }\n  }]);\n\n  return Curve;\n}();","import \"core-js/modules/es.array.reduce\";\nimport _classCallCheck from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/createClass\";\n\n/*! Source code licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\nimport { Const } from \"./Util\";\nimport { Curve } from \"./Op\";\nimport { Pt, Group } from \"./Pt\";\nimport { Vec, Mat } from \"./LinearAlgebra\";\nexport var Num = /*#__PURE__*/function () {\n  function Num() {\n    _classCallCheck(this, Num);\n  }\n\n  _createClass(Num, null, [{\n    key: \"equals\",\n    value: function equals(a, b) {\n      var threshold = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.00001;\n      return Math.abs(a - b) < threshold;\n    }\n  }, {\n    key: \"lerp\",\n    value: function lerp(a, b, t) {\n      return (1 - t) * a + t * b;\n    }\n  }, {\n    key: \"clamp\",\n    value: function clamp(val, min, max) {\n      return Math.max(min, Math.min(max, val));\n    }\n  }, {\n    key: \"boundValue\",\n    value: function boundValue(val, min, max) {\n      var len = Math.abs(max - min);\n      var a = val % len;\n      if (a > max) a -= len;else if (a < min) a += len;\n      return a;\n    }\n  }, {\n    key: \"within\",\n    value: function within(p, a, b) {\n      return p >= Math.min(a, b) && p <= Math.max(a, b);\n    }\n  }, {\n    key: \"randomRange\",\n    value: function randomRange(a) {\n      var b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var r = a > b ? a - b : b - a;\n      return a + Math.random() * r;\n    }\n  }, {\n    key: \"normalizeValue\",\n    value: function normalizeValue(n, a, b) {\n      var min = Math.min(a, b);\n      var max = Math.max(a, b);\n      return (n - min) / (max - min);\n    }\n  }, {\n    key: \"sum\",\n    value: function sum(pts) {\n      var c = new Pt(pts[0]);\n\n      for (var i = 1, len = pts.length; i < len; i++) {\n        Vec.add(c, pts[i]);\n      }\n\n      return c;\n    }\n  }, {\n    key: \"average\",\n    value: function average(pts) {\n      return Num.sum(pts).divide(pts.length);\n    }\n  }, {\n    key: \"cycle\",\n    value: function cycle(t) {\n      var method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Shaping.sineInOut;\n      return method(t > 0.5 ? 2 - t * 2 : t * 2);\n    }\n  }, {\n    key: \"mapToRange\",\n    value: function mapToRange(n, currA, currB, targetA, targetB) {\n      if (currA == currB) throw new Error(\"[currMin, currMax] must define a range that is not zero\");\n      var min = Math.min(targetA, targetB);\n      var max = Math.max(targetA, targetB);\n      return Num.normalizeValue(n, currA, currB) * (max - min) + min;\n    }\n  }]);\n\n  return Num;\n}();\nexport var Geom = /*#__PURE__*/function () {\n  function Geom() {\n    _classCallCheck(this, Geom);\n  }\n\n  _createClass(Geom, null, [{\n    key: \"boundAngle\",\n    value: function boundAngle(angle) {\n      return Num.boundValue(angle, 0, 360);\n    }\n  }, {\n    key: \"boundRadian\",\n    value: function boundRadian(radian) {\n      return Num.boundValue(radian, 0, Const.two_pi);\n    }\n  }, {\n    key: \"toRadian\",\n    value: function toRadian(angle) {\n      return angle * Const.deg_to_rad;\n    }\n  }, {\n    key: \"toDegree\",\n    value: function toDegree(radian) {\n      return radian * Const.rad_to_deg;\n    }\n  }, {\n    key: \"boundingBox\",\n    value: function boundingBox(pts) {\n      var minPt = pts.reduce(function (a, p) {\n        return a.$min(p);\n      });\n      var maxPt = pts.reduce(function (a, p) {\n        return a.$max(p);\n      });\n      return new Group(minPt, maxPt);\n    }\n  }, {\n    key: \"centroid\",\n    value: function centroid(pts) {\n      return Num.average(pts);\n    }\n  }, {\n    key: \"anchor\",\n    value: function anchor(pts) {\n      var ptOrIndex = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var direction = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"to\";\n      var method = direction == \"to\" ? \"subtract\" : \"add\";\n\n      for (var i = 0, len = pts.length; i < len; i++) {\n        if (typeof ptOrIndex == \"number\") {\n          if (ptOrIndex !== i) pts[i][method](pts[ptOrIndex]);\n        } else {\n          pts[i][method](ptOrIndex);\n        }\n      }\n    }\n  }, {\n    key: \"interpolate\",\n    value: function interpolate(a, b) {\n      var t = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.5;\n      var len = Math.min(a.length, b.length);\n      var d = Pt.make(len);\n\n      for (var i = 0; i < len; i++) {\n        d[i] = a[i] * (1 - t) + b[i] * t;\n      }\n\n      return d;\n    }\n  }, {\n    key: \"perpendicular\",\n    value: function perpendicular(pt) {\n      var axis = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Const.xy;\n      var y = axis[1];\n      var x = axis[0];\n      var p = new Pt(pt);\n      var pa = new Pt(p);\n      pa[x] = -p[y];\n      pa[y] = p[x];\n      var pb = new Pt(p);\n      pb[x] = p[y];\n      pb[y] = -p[x];\n      return new Group(pa, pb);\n    }\n  }, {\n    key: \"isPerpendicular\",\n    value: function isPerpendicular(p1, p2) {\n      return new Pt(p1).dot(p2) === 0;\n    }\n  }, {\n    key: \"withinBound\",\n    value: function withinBound(pt, boundPt1, boundPt2) {\n      for (var i = 0, len = Math.min(pt.length, boundPt1.length, boundPt2.length); i < len; i++) {\n        if (!Num.within(pt[i], boundPt1[i], boundPt2[i])) return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"sortEdges\",\n    value: function sortEdges(pts) {\n      var bounds = Geom.boundingBox(pts);\n      var center = bounds[1].add(bounds[0]).divide(2);\n\n      var fn = function fn(a, b) {\n        if (a.length < 2 || b.length < 2) throw new Error(\"Pt dimension cannot be less than 2\");\n        var da = a.$subtract(center);\n        var db = b.$subtract(center);\n        if (da[0] >= 0 && db[0] < 0) return 1;\n        if (da[0] < 0 && db[0] >= 0) return -1;\n\n        if (da[0] == 0 && db[0] == 0) {\n          if (da[1] >= 0 || db[1] >= 0) return da[1] > db[1] ? 1 : -1;\n          return db[1] > da[1] ? 1 : -1;\n        }\n\n        var det = da.$cross2D(db);\n        if (det < 0) return 1;\n        if (det > 0) return -1;\n        return da[0] * da[0] + da[1] * da[1] > db[0] * db[0] + db[1] * db[1] ? 1 : -1;\n      };\n\n      return pts.sort(fn);\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(ps, _scale, anchor) {\n      var pts = !Array.isArray(ps) ? [ps] : ps;\n      var scs = typeof _scale == \"number\" ? Pt.make(pts[0].length, _scale) : _scale;\n      if (!anchor) anchor = Pt.make(pts[0].length, 0);\n\n      for (var i = 0, len = pts.length; i < len; i++) {\n        var p = pts[i];\n\n        for (var k = 0, lenP = p.length; k < lenP; k++) {\n          p[k] = anchor && anchor[k] ? anchor[k] + (p[k] - anchor[k]) * scs[k] : p[k] * scs[k];\n        }\n      }\n\n      return Geom;\n    }\n  }, {\n    key: \"rotate2D\",\n    value: function rotate2D(ps, angle, anchor, axis) {\n      var pts = !Array.isArray(ps) ? [ps] : ps;\n      var fn = anchor ? Mat.rotateAt2DMatrix : Mat.rotate2DMatrix;\n      if (!anchor) anchor = Pt.make(pts[0].length, 0);\n      var cos = Math.cos(angle);\n      var sin = Math.sin(angle);\n\n      for (var i = 0, len = pts.length; i < len; i++) {\n        var p = axis ? pts[i].$take(axis) : pts[i];\n        p.to(Mat.transform2D(p, fn(cos, sin, anchor)));\n\n        if (axis) {\n          for (var k = 0; k < axis.length; k++) {\n            pts[i][axis[k]] = p[k];\n          }\n        }\n      }\n\n      return Geom;\n    }\n  }, {\n    key: \"shear2D\",\n    value: function shear2D(ps, scale, anchor, axis) {\n      var pts = !Array.isArray(ps) ? [ps] : ps;\n      var s = typeof scale == \"number\" ? [scale, scale] : scale;\n      if (!anchor) anchor = Pt.make(pts[0].length, 0);\n      var fn = anchor ? Mat.shearAt2DMatrix : Mat.shear2DMatrix;\n      var tanx = Math.tan(s[0]);\n      var tany = Math.tan(s[1]);\n\n      for (var i = 0, len = pts.length; i < len; i++) {\n        var p = axis ? pts[i].$take(axis) : pts[i];\n        p.to(Mat.transform2D(p, fn(tanx, tany, anchor)));\n\n        if (axis) {\n          for (var k = 0; k < axis.length; k++) {\n            pts[i][axis[k]] = p[k];\n          }\n        }\n      }\n\n      return Geom;\n    }\n  }, {\n    key: \"reflect2D\",\n    value: function reflect2D(ps, line, axis) {\n      var pts = !Array.isArray(ps) ? [ps] : ps;\n      var mat = Mat.reflectAt2DMatrix(line[0], line[1]);\n\n      for (var i = 0, len = pts.length; i < len; i++) {\n        var p = axis ? pts[i].$take(axis) : pts[i];\n        p.to(Mat.transform2D(p, mat));\n\n        if (axis) {\n          for (var k = 0; k < axis.length; k++) {\n            pts[i][axis[k]] = p[k];\n          }\n        }\n      }\n\n      return Geom;\n    }\n  }, {\n    key: \"cosTable\",\n    value: function cosTable() {\n      var cos = new Float64Array(360);\n\n      for (var i = 0; i < 360; i++) {\n        cos[i] = Math.cos(i * Math.PI / 180);\n      }\n\n      var find = function find(rad) {\n        return cos[Math.floor(Geom.boundAngle(Geom.toDegree(rad)))];\n      };\n\n      return {\n        table: cos,\n        cos: find\n      };\n    }\n  }, {\n    key: \"sinTable\",\n    value: function sinTable() {\n      var sin = new Float64Array(360);\n\n      for (var i = 0; i < 360; i++) {\n        sin[i] = Math.sin(i * Math.PI / 180);\n      }\n\n      var find = function find(rad) {\n        return sin[Math.floor(Geom.boundAngle(Geom.toDegree(rad)))];\n      };\n\n      return {\n        table: sin,\n        sin: find\n      };\n    }\n  }]);\n\n  return Geom;\n}();\nexport var Shaping = /*#__PURE__*/function () {\n  function Shaping() {\n    _classCallCheck(this, Shaping);\n  }\n\n  _createClass(Shaping, null, [{\n    key: \"linear\",\n    value: function linear(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      return c * t;\n    }\n  }, {\n    key: \"quadraticIn\",\n    value: function quadraticIn(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      return c * t * t;\n    }\n  }, {\n    key: \"quadraticOut\",\n    value: function quadraticOut(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      return -c * t * (t - 2);\n    }\n  }, {\n    key: \"quadraticInOut\",\n    value: function quadraticInOut(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var dt = t * 2;\n      return t < 0.5 ? c / 2 * t * t * 4 : -c / 2 * ((dt - 1) * (dt - 3) - 1);\n    }\n  }, {\n    key: \"cubicIn\",\n    value: function cubicIn(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      return c * t * t * t;\n    }\n  }, {\n    key: \"cubicOut\",\n    value: function cubicOut(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var dt = t - 1;\n      return c * (dt * dt * dt + 1);\n    }\n  }, {\n    key: \"cubicInOut\",\n    value: function cubicInOut(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var dt = t * 2;\n      return t < 0.5 ? c / 2 * dt * dt * dt : c / 2 * ((dt - 2) * (dt - 2) * (dt - 2) + 2);\n    }\n  }, {\n    key: \"exponentialIn\",\n    value: function exponentialIn(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var p = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.25;\n      return c * Math.pow(t, 1 / p);\n    }\n  }, {\n    key: \"exponentialOut\",\n    value: function exponentialOut(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var p = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.25;\n      return c * Math.pow(t, p);\n    }\n  }, {\n    key: \"sineIn\",\n    value: function sineIn(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      return -c * Math.cos(t * Const.half_pi) + c;\n    }\n  }, {\n    key: \"sineOut\",\n    value: function sineOut(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      return c * Math.sin(t * Const.half_pi);\n    }\n  }, {\n    key: \"sineInOut\",\n    value: function sineInOut(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      return -c / 2 * (Math.cos(Math.PI * t) - 1);\n    }\n  }, {\n    key: \"cosineApprox\",\n    value: function cosineApprox(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var t2 = t * t;\n      var t4 = t2 * t2;\n      var t6 = t4 * t2;\n      return c * (4 * t6 / 9 - 17 * t4 / 9 + 22 * t2 / 9);\n    }\n  }, {\n    key: \"circularIn\",\n    value: function circularIn(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      return -c * (Math.sqrt(1 - t * t) - 1);\n    }\n  }, {\n    key: \"circularOut\",\n    value: function circularOut(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var dt = t - 1;\n      return c * Math.sqrt(1 - dt * dt);\n    }\n  }, {\n    key: \"circularInOut\",\n    value: function circularInOut(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var dt = t * 2;\n      return t < 0.5 ? -c / 2 * (Math.sqrt(1 - dt * dt) - 1) : c / 2 * (Math.sqrt(1 - (dt - 2) * (dt - 2)) + 1);\n    }\n  }, {\n    key: \"elasticIn\",\n    value: function elasticIn(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var p = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.7;\n      var dt = t - 1;\n      var s = p / Const.two_pi * 1.5707963267948966;\n      return c * (-Math.pow(2, 10 * dt) * Math.sin((dt - s) * Const.two_pi / p));\n    }\n  }, {\n    key: \"elasticOut\",\n    value: function elasticOut(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var p = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.7;\n      var s = p / Const.two_pi * 1.5707963267948966;\n      return c * (Math.pow(2, -10 * t) * Math.sin((t - s) * Const.two_pi / p)) + c;\n    }\n  }, {\n    key: \"elasticInOut\",\n    value: function elasticInOut(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var p = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.6;\n      var dt = t * 2;\n      var s = p / Const.two_pi * 1.5707963267948966;\n\n      if (t < 0.5) {\n        dt -= 1;\n        return c * (-0.5 * (Math.pow(2, 10 * dt) * Math.sin((dt - s) * Const.two_pi / p)));\n      } else {\n        dt -= 1;\n        return c * (0.5 * (Math.pow(2, -10 * dt) * Math.sin((dt - s) * Const.two_pi / p))) + c;\n      }\n    }\n  }, {\n    key: \"bounceIn\",\n    value: function bounceIn(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      return c - Shaping.bounceOut(1 - t, c);\n    }\n  }, {\n    key: \"bounceOut\",\n    value: function bounceOut(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      if (t < 1 / 2.75) {\n        return c * (7.5625 * t * t);\n      } else if (t < 2 / 2.75) {\n        t -= 1.5 / 2.75;\n        return c * (7.5625 * t * t + 0.75);\n      } else if (t < 2.5 / 2.75) {\n        t -= 2.25 / 2.75;\n        return c * (7.5625 * t * t + 0.9375);\n      } else {\n        t -= 2.625 / 2.75;\n        return c * (7.5625 * t * t + 0.984375);\n      }\n    }\n  }, {\n    key: \"bounceInOut\",\n    value: function bounceInOut(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      return t < 0.5 ? Shaping.bounceIn(t * 2, c) / 2 : Shaping.bounceOut(t * 2 - 1, c) / 2 + c / 2;\n    }\n  }, {\n    key: \"sigmoid\",\n    value: function sigmoid(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var p = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n      var d = p * (t - 0.5);\n      return c / (1 + Math.exp(-d));\n    }\n  }, {\n    key: \"logSigmoid\",\n    value: function logSigmoid(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var p = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.7;\n      p = Math.max(Const.epsilon, Math.min(1 - Const.epsilon, p));\n      p = 1 / (1 - p);\n      var A = 1 / (1 + Math.exp((t - 0.5) * p * -2));\n      var B = 1 / (1 + Math.exp(p));\n      var C = 1 / (1 + Math.exp(-p));\n      return c * (A - B) / (C - B);\n    }\n  }, {\n    key: \"seat\",\n    value: function seat(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var p = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.5;\n\n      if (t < 0.5) {\n        return c * Math.pow(2 * t, 1 - p) / 2;\n      } else {\n        return c * (1 - Math.pow(2 * (1 - t), 1 - p) / 2);\n      }\n    }\n  }, {\n    key: \"quadraticBezier\",\n    value: function quadraticBezier(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var p = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0.05, 0.95];\n      var a = typeof p != \"number\" ? p[0] : p;\n      var b = typeof p != \"number\" ? p[1] : 0.5;\n      var om2a = 1 - 2 * a;\n\n      if (om2a === 0) {\n        om2a = Const.epsilon;\n      }\n\n      var d = (Math.sqrt(a * a + om2a * t) - a) / om2a;\n      return c * ((1 - 2 * b) * (d * d) + 2 * b * d);\n    }\n  }, {\n    key: \"cubicBezier\",\n    value: function cubicBezier(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var p1 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0.1, 0.7];\n      var p2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [0.9, 0.2];\n      var curve = new Group(new Pt(0, 0), new Pt(p1), new Pt(p2), new Pt(1, 1));\n      return c * Curve.bezierStep(new Pt(t * t * t, t * t, t, 1), Curve.controlPoints(curve)).y;\n    }\n  }, {\n    key: \"quadraticTarget\",\n    value: function quadraticTarget(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var p1 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0.2, 0.35];\n      var a = Math.min(1 - Const.epsilon, Math.max(Const.epsilon, p1[0]));\n      var b = Math.min(1, Math.max(0, p1[1]));\n      var A = (1 - b) / (1 - a) - b / a;\n      var B = (A * (a * a) - b) / a;\n      var y = A * (t * t) - B * t;\n      return c * Math.min(1, Math.max(0, y));\n    }\n  }, {\n    key: \"cliff\",\n    value: function cliff(t) {\n      var c = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var p = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.5;\n      return t > p ? c : 0;\n    }\n  }, {\n    key: \"step\",\n    value: function step(fn, steps, t, c) {\n      var s = 1 / steps;\n      var tt = Math.floor(t / s) * s;\n\n      for (var _len = arguments.length, args = new Array(_len > 4 ? _len - 4 : 0), _key = 4; _key < _len; _key++) {\n        args[_key - 4] = arguments[_key];\n      }\n\n      return fn.apply(void 0, [tt, c].concat(args));\n    }\n  }]);\n\n  return Shaping;\n}();\nexport var Range = /*#__PURE__*/function () {\n  function Range(g) {\n    _classCallCheck(this, Range);\n\n    this._dims = 0;\n    this._source = Group.fromPtArray(g);\n    this.calc();\n  }\n\n  _createClass(Range, [{\n    key: \"calc\",\n    value: function calc() {\n      if (!this._source) return;\n      var dims = this._source[0].length;\n      this._dims = dims;\n      var max = new Pt(dims);\n      var min = new Pt(dims);\n      var mag = new Pt(dims);\n\n      for (var i = 0; i < dims; i++) {\n        max[i] = Const.min;\n        min[i] = Const.max;\n        mag[i] = 0;\n\n        var s = this._source.zipSlice(i);\n\n        for (var k = 0, len = s.length; k < len; k++) {\n          max[i] = Math.max(max[i], s[k]);\n          min[i] = Math.min(min[i], s[k]);\n          mag[i] = max[i] - min[i];\n        }\n      }\n\n      this._max = max;\n      this._min = min;\n      this._mag = mag;\n      return this;\n    }\n  }, {\n    key: \"mapTo\",\n    value: function mapTo(min, max, exclude) {\n      var target = new Group();\n\n      for (var i = 0, len = this._source.length; i < len; i++) {\n        var g = this._source[i];\n        var n = new Pt(this._dims);\n\n        for (var k = 0; k < this._dims; k++) {\n          n[k] = exclude && exclude[k] ? g[k] : Num.mapToRange(g[k], this._min[k], this._max[k], min, max);\n        }\n\n        target.push(n);\n      }\n\n      return target;\n    }\n  }, {\n    key: \"append\",\n    value: function append(g) {\n      var update = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (g[0].length !== this._dims) throw new Error(\"Dimensions don't match. \".concat(this._dims, \" dimensions in Range and \").concat(g[0].length, \" provided in parameter. \"));\n      this._source = this._source.concat(g);\n      if (update) this.calc();\n      return this;\n    }\n  }, {\n    key: \"ticks\",\n    value: function ticks(count) {\n      var g = new Group();\n\n      for (var i = 0; i <= count; i++) {\n        var p = new Pt(this._dims);\n\n        for (var k = 0, len = this._max.length; k < len; k++) {\n          p[k] = Num.lerp(this._min[k], this._max[k], i / count);\n        }\n\n        g.push(p);\n      }\n\n      return g;\n    }\n  }, {\n    key: \"max\",\n    get: function get() {\n      return this._max.clone();\n    }\n  }, {\n    key: \"min\",\n    get: function get() {\n      return this._min.clone();\n    }\n  }, {\n    key: \"magnitude\",\n    get: function get() {\n      return this._mag.clone();\n    }\n  }]);\n\n  return Range;\n}();","import \"core-js/modules/es.array.reduce\";\nimport _toConsumableArray from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _wrapNativeSuper from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/wrapNativeSuper\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*! Source code licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\nimport { Util, Const } from \"./Util\";\nimport { Geom, Num } from \"./Num\";\nimport { Vec, Mat } from \"./LinearAlgebra\";\nexport var Pt = /*#__PURE__*/function (_Float32Array) {\n  _inherits(Pt, _Float32Array);\n\n  var _super = _createSuper(Pt);\n\n  function Pt() {\n    var _this;\n\n    _classCallCheck(this, Pt);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (args.length === 1 && typeof args[0] == \"number\") {\n      _this = _super.call(this, args[0]);\n    } else {\n      _this = _super.call(this, args.length > 0 ? Util.getArgs(args) : [0, 0]);\n    }\n\n    return _possibleConstructorReturn(_this);\n  }\n\n  _createClass(Pt, [{\n    key: \"clone\",\n    value: function clone() {\n      return new Pt(this);\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(p) {\n      var threshold = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.000001;\n\n      for (var i = 0, len = this.length; i < len; i++) {\n        if (Math.abs(this[i] - p[i]) > threshold) return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"to\",\n    value: function to() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      var p = Util.getArgs(args);\n\n      for (var i = 0, len = Math.min(this.length, p.length); i < len; i++) {\n        this[i] = p[i];\n      }\n\n      return this;\n    }\n  }, {\n    key: \"$to\",\n    value: function $to() {\n      var _this$clone;\n\n      return (_this$clone = this.clone()).to.apply(_this$clone, arguments);\n    }\n  }, {\n    key: \"toAngle\",\n    value: function toAngle(radian, magnitude) {\n      var anchorFromPt = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var m = magnitude != undefined ? magnitude : this.magnitude();\n      var change = [Math.cos(radian) * m, Math.sin(radian) * m];\n      return anchorFromPt ? this.add(change) : this.to(change);\n    }\n  }, {\n    key: \"op\",\n    value: function op(fn) {\n      var self = this;\n      return function () {\n        for (var _len3 = arguments.length, params = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          params[_key3] = arguments[_key3];\n        }\n\n        return fn.apply(void 0, [self].concat(params));\n      };\n    }\n  }, {\n    key: \"ops\",\n    value: function ops(fns) {\n      var _ops = [];\n\n      for (var i = 0, len = fns.length; i < len; i++) {\n        _ops.push(this.op(fns[i]));\n      }\n\n      return _ops;\n    }\n  }, {\n    key: \"$take\",\n    value: function $take(axis) {\n      var p = [];\n\n      for (var i = 0, len = axis.length; i < len; i++) {\n        p.push(this[axis[i]] || 0);\n      }\n\n      return new Pt(p);\n    }\n  }, {\n    key: \"$concat\",\n    value: function $concat() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return new Pt(this.toArray().concat(Util.getArgs(args)));\n    }\n  }, {\n    key: \"add\",\n    value: function add() {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n\n      args.length === 1 && typeof args[0] == \"number\" ? Vec.add(this, args[0]) : Vec.add(this, Util.getArgs(args));\n      return this;\n    }\n  }, {\n    key: \"$add\",\n    value: function $add() {\n      var _this$clone2;\n\n      return (_this$clone2 = this.clone()).add.apply(_this$clone2, arguments);\n    }\n  }, {\n    key: \"subtract\",\n    value: function subtract() {\n      for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n        args[_key6] = arguments[_key6];\n      }\n\n      args.length === 1 && typeof args[0] == \"number\" ? Vec.subtract(this, args[0]) : Vec.subtract(this, Util.getArgs(args));\n      return this;\n    }\n  }, {\n    key: \"$subtract\",\n    value: function $subtract() {\n      var _this$clone3;\n\n      return (_this$clone3 = this.clone()).subtract.apply(_this$clone3, arguments);\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n        args[_key7] = arguments[_key7];\n      }\n\n      args.length === 1 && typeof args[0] == \"number\" ? Vec.multiply(this, args[0]) : Vec.multiply(this, Util.getArgs(args));\n      return this;\n    }\n  }, {\n    key: \"$multiply\",\n    value: function $multiply() {\n      var _this$clone4;\n\n      return (_this$clone4 = this.clone()).multiply.apply(_this$clone4, arguments);\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n        args[_key8] = arguments[_key8];\n      }\n\n      args.length === 1 && typeof args[0] == \"number\" ? Vec.divide(this, args[0]) : Vec.divide(this, Util.getArgs(args));\n      return this;\n    }\n  }, {\n    key: \"$divide\",\n    value: function $divide() {\n      var _this$clone5;\n\n      return (_this$clone5 = this.clone()).divide.apply(_this$clone5, arguments);\n    }\n  }, {\n    key: \"magnitudeSq\",\n    value: function magnitudeSq() {\n      return Vec.dot(this, this);\n    }\n  }, {\n    key: \"magnitude\",\n    value: function magnitude() {\n      return Vec.magnitude(this);\n    }\n  }, {\n    key: \"unit\",\n    value: function unit() {\n      var magnitude = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n      Vec.unit(this, magnitude);\n      return this;\n    }\n  }, {\n    key: \"$unit\",\n    value: function $unit() {\n      var magnitude = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n      return this.clone().unit(magnitude);\n    }\n  }, {\n    key: \"dot\",\n    value: function dot() {\n      for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n        args[_key9] = arguments[_key9];\n      }\n\n      return Vec.dot(this, Util.getArgs(args));\n    }\n  }, {\n    key: \"$cross2D\",\n    value: function $cross2D() {\n      for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {\n        args[_key10] = arguments[_key10];\n      }\n\n      return Vec.cross2D(this, Util.getArgs(args));\n    }\n  }, {\n    key: \"$cross\",\n    value: function $cross() {\n      for (var _len11 = arguments.length, args = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {\n        args[_key11] = arguments[_key11];\n      }\n\n      return Vec.cross(this, Util.getArgs(args));\n    }\n  }, {\n    key: \"$project\",\n    value: function $project() {\n      return this.$multiply(this.dot.apply(this, arguments) / this.magnitudeSq());\n    }\n  }, {\n    key: \"projectScalar\",\n    value: function projectScalar() {\n      return this.dot.apply(this, arguments) / this.magnitude();\n    }\n  }, {\n    key: \"abs\",\n    value: function abs() {\n      Vec.abs(this);\n      return this;\n    }\n  }, {\n    key: \"$abs\",\n    value: function $abs() {\n      return this.clone().abs();\n    }\n  }, {\n    key: \"floor\",\n    value: function floor() {\n      Vec.floor(this);\n      return this;\n    }\n  }, {\n    key: \"$floor\",\n    value: function $floor() {\n      return this.clone().floor();\n    }\n  }, {\n    key: \"ceil\",\n    value: function ceil() {\n      Vec.ceil(this);\n      return this;\n    }\n  }, {\n    key: \"$ceil\",\n    value: function $ceil() {\n      return this.clone().ceil();\n    }\n  }, {\n    key: \"round\",\n    value: function round() {\n      Vec.round(this);\n      return this;\n    }\n  }, {\n    key: \"$round\",\n    value: function $round() {\n      return this.clone().round();\n    }\n  }, {\n    key: \"minValue\",\n    value: function minValue() {\n      return Vec.min(this);\n    }\n  }, {\n    key: \"maxValue\",\n    value: function maxValue() {\n      return Vec.max(this);\n    }\n  }, {\n    key: \"$min\",\n    value: function $min() {\n      for (var _len12 = arguments.length, args = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {\n        args[_key12] = arguments[_key12];\n      }\n\n      var p = Util.getArgs(args);\n      var m = this.clone();\n\n      for (var i = 0, len = Math.min(this.length, p.length); i < len; i++) {\n        m[i] = Math.min(this[i], p[i]);\n      }\n\n      return m;\n    }\n  }, {\n    key: \"$max\",\n    value: function $max() {\n      for (var _len13 = arguments.length, args = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {\n        args[_key13] = arguments[_key13];\n      }\n\n      var p = Util.getArgs(args);\n      var m = this.clone();\n\n      for (var i = 0, len = Math.min(this.length, p.length); i < len; i++) {\n        m[i] = Math.max(this[i], p[i]);\n      }\n\n      return m;\n    }\n  }, {\n    key: \"angle\",\n    value: function angle() {\n      var axis = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Const.xy;\n      return Math.atan2(this[axis[1]], this[axis[0]]);\n    }\n  }, {\n    key: \"angleBetween\",\n    value: function angleBetween(p) {\n      var axis = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Const.xy;\n      return Geom.boundRadian(this.angle(axis)) - Geom.boundRadian(p.angle(axis));\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(_scale, anchor) {\n      Geom.scale(this, _scale, anchor || Pt.make(this.length, 0));\n      return this;\n    }\n  }, {\n    key: \"rotate2D\",\n    value: function rotate2D(angle, anchor, axis) {\n      Geom.rotate2D(this, angle, anchor || Pt.make(this.length, 0), axis);\n      return this;\n    }\n  }, {\n    key: \"shear2D\",\n    value: function shear2D(scale, anchor, axis) {\n      Geom.shear2D(this, scale, anchor || Pt.make(this.length, 0), axis);\n      return this;\n    }\n  }, {\n    key: \"reflect2D\",\n    value: function reflect2D(line, axis) {\n      Geom.reflect2D(this, line, axis);\n      return this;\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return \"Pt(\".concat(this.join(\", \"), \")\");\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray() {\n      return [].slice.call(this);\n    }\n  }, {\n    key: \"toGroup\",\n    value: function toGroup() {\n      return new Group(Pt.make(this.length), this.clone());\n    }\n  }, {\n    key: \"toBound\",\n    value: function toBound() {\n      return new Bound(Pt.make(this.length), this.clone());\n    }\n  }, {\n    key: \"id\",\n    get: function get() {\n      return this._id;\n    },\n    set: function set(s) {\n      this._id = s;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(n) {\n      this[0] = n;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(n) {\n      this[1] = n;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(n) {\n      this[2] = n;\n    }\n  }, {\n    key: \"w\",\n    get: function get() {\n      return this[3];\n    },\n    set: function set(n) {\n      this[3] = n;\n    }\n  }], [{\n    key: \"make\",\n    value: function make(dimensions) {\n      var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var randomize = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var p = new Float32Array(dimensions);\n      if (defaultValue) p.fill(defaultValue);\n\n      if (randomize) {\n        for (var i = 0, len = p.length; i < len; i++) {\n          p[i] = p[i] * Math.random();\n        }\n      }\n\n      return new Pt(p);\n    }\n  }]);\n\n  return Pt;\n}( /*#__PURE__*/_wrapNativeSuper(Float32Array));\nexport var Group = /*#__PURE__*/function (_Array) {\n  _inherits(Group, _Array);\n\n  var _super2 = _createSuper(Group);\n\n  function Group() {\n    _classCallCheck(this, Group);\n\n    for (var _len14 = arguments.length, args = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {\n      args[_key14] = arguments[_key14];\n    }\n\n    return _super2.call.apply(_super2, [this].concat(args));\n  }\n\n  _createClass(Group, [{\n    key: \"clone\",\n    value: function clone() {\n      var group = new Group();\n\n      for (var i = 0, len = this.length; i < len; i++) {\n        group.push(this[i].clone());\n      }\n\n      return group;\n    }\n  }, {\n    key: \"split\",\n    value: function split(chunkSize, stride) {\n      var loopBack = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var sp = Util.split(this, chunkSize, stride, loopBack);\n      return sp;\n    }\n  }, {\n    key: \"insert\",\n    value: function insert(pts) {\n      var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      Group.prototype.splice.apply(this, [index, 0].concat(_toConsumableArray(pts)));\n      return this;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var count = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var param = index < 0 ? [index * -1 - 1, count] : [index, count];\n      return Group.prototype.splice.apply(this, param);\n    }\n  }, {\n    key: \"segments\",\n    value: function segments() {\n      var pts_per_segment = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 2;\n      var stride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var loopBack = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      return this.split(pts_per_segment, stride, loopBack);\n    }\n  }, {\n    key: \"lines\",\n    value: function lines() {\n      return this.segments(2, 1);\n    }\n  }, {\n    key: \"centroid\",\n    value: function centroid() {\n      return Geom.centroid(this);\n    }\n  }, {\n    key: \"boundingBox\",\n    value: function boundingBox() {\n      return Geom.boundingBox(this);\n    }\n  }, {\n    key: \"anchorTo\",\n    value: function anchorTo() {\n      var ptOrIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      Geom.anchor(this, ptOrIndex, \"to\");\n    }\n  }, {\n    key: \"anchorFrom\",\n    value: function anchorFrom() {\n      var ptOrIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      Geom.anchor(this, ptOrIndex, \"from\");\n    }\n  }, {\n    key: \"op\",\n    value: function op(fn) {\n      var self = this;\n      return function () {\n        for (var _len15 = arguments.length, params = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) {\n          params[_key15] = arguments[_key15];\n        }\n\n        return fn.apply(void 0, [self].concat(params));\n      };\n    }\n  }, {\n    key: \"ops\",\n    value: function ops(fns) {\n      var _ops = [];\n\n      for (var i = 0, len = fns.length; i < len; i++) {\n        _ops.push(this.op(fns[i]));\n      }\n\n      return _ops;\n    }\n  }, {\n    key: \"interpolate\",\n    value: function interpolate(t) {\n      t = Num.clamp(t, 0, 1);\n      var chunk = this.length - 1;\n      var tc = 1 / (this.length - 1);\n      var idx = Math.floor(t / tc);\n      return Geom.interpolate(this[idx], this[Math.min(this.length - 1, idx + 1)], (t - idx * tc) * chunk);\n    }\n  }, {\n    key: \"moveBy\",\n    value: function moveBy() {\n      return this.add.apply(this, arguments);\n    }\n  }, {\n    key: \"moveTo\",\n    value: function moveTo() {\n      for (var _len16 = arguments.length, args = new Array(_len16), _key16 = 0; _key16 < _len16; _key16++) {\n        args[_key16] = arguments[_key16];\n      }\n\n      var d = new Pt(Util.getArgs(args)).subtract(this[0]);\n      this.moveBy(d);\n      return this;\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(_scale2, anchor) {\n      for (var i = 0, len = this.length; i < len; i++) {\n        Geom.scale(this[i], _scale2, anchor || this[0]);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"rotate2D\",\n    value: function rotate2D(angle, anchor, axis) {\n      for (var i = 0, len = this.length; i < len; i++) {\n        Geom.rotate2D(this[i], angle, anchor || this[0], axis);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"shear2D\",\n    value: function shear2D(scale, anchor, axis) {\n      for (var i = 0, len = this.length; i < len; i++) {\n        Geom.shear2D(this[i], scale, anchor || this[0], axis);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"reflect2D\",\n    value: function reflect2D(line, axis) {\n      for (var i = 0, len = this.length; i < len; i++) {\n        Geom.reflect2D(this[i], line, axis);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"sortByDimension\",\n    value: function sortByDimension(dim) {\n      var desc = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return this.sort(function (a, b) {\n        return desc ? b[dim] - a[dim] : a[dim] - b[dim];\n      });\n    }\n  }, {\n    key: \"forEachPt\",\n    value: function forEachPt(ptFn) {\n      if (!this[0][ptFn]) {\n        Util.warn(\"\".concat(ptFn, \" is not a function of Pt\"));\n        return this;\n      }\n\n      for (var _len17 = arguments.length, args = new Array(_len17 > 1 ? _len17 - 1 : 0), _key17 = 1; _key17 < _len17; _key17++) {\n        args[_key17 - 1] = arguments[_key17];\n      }\n\n      for (var i = 0, len = this.length; i < len; i++) {\n        var _this$i;\n\n        this[i] = (_this$i = this[i])[ptFn].apply(_this$i, args);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"add\",\n    value: function add() {\n      for (var _len18 = arguments.length, args = new Array(_len18), _key18 = 0; _key18 < _len18; _key18++) {\n        args[_key18] = arguments[_key18];\n      }\n\n      return this.forEachPt.apply(this, [\"add\"].concat(args));\n    }\n  }, {\n    key: \"subtract\",\n    value: function subtract() {\n      for (var _len19 = arguments.length, args = new Array(_len19), _key19 = 0; _key19 < _len19; _key19++) {\n        args[_key19] = arguments[_key19];\n      }\n\n      return this.forEachPt.apply(this, [\"subtract\"].concat(args));\n    }\n  }, {\n    key: \"multiply\",\n    value: function multiply() {\n      for (var _len20 = arguments.length, args = new Array(_len20), _key20 = 0; _key20 < _len20; _key20++) {\n        args[_key20] = arguments[_key20];\n      }\n\n      return this.forEachPt.apply(this, [\"multiply\"].concat(args));\n    }\n  }, {\n    key: \"divide\",\n    value: function divide() {\n      for (var _len21 = arguments.length, args = new Array(_len21), _key21 = 0; _key21 < _len21; _key21++) {\n        args[_key21] = arguments[_key21];\n      }\n\n      return this.forEachPt.apply(this, [\"divide\"].concat(args));\n    }\n  }, {\n    key: \"$matrixAdd\",\n    value: function $matrixAdd(g) {\n      return Mat.add(this, g);\n    }\n  }, {\n    key: \"$matrixMultiply\",\n    value: function $matrixMultiply(g) {\n      var transposed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var elementwise = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      return Mat.multiply(this, g, transposed, elementwise);\n    }\n  }, {\n    key: \"zipSlice\",\n    value: function zipSlice(index) {\n      var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return Mat.zipSlice(this, index, defaultValue);\n    }\n  }, {\n    key: \"$zip\",\n    value: function $zip() {\n      var defaultValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n      var useLongest = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      return Mat.zip(this, defaultValue, useLongest);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return \"Group[ \" + this.reduce(function (p, c) {\n        return p + c.toString() + \" \";\n      }, \"\") + \" ]\";\n    }\n  }, {\n    key: \"id\",\n    get: function get() {\n      return this._id;\n    },\n    set: function set(s) {\n      this._id = s;\n    }\n  }, {\n    key: \"p1\",\n    get: function get() {\n      return this[0];\n    }\n  }, {\n    key: \"p2\",\n    get: function get() {\n      return this[1];\n    }\n  }, {\n    key: \"p3\",\n    get: function get() {\n      return this[2];\n    }\n  }, {\n    key: \"p4\",\n    get: function get() {\n      return this[3];\n    }\n  }, {\n    key: \"q1\",\n    get: function get() {\n      return this[this.length - 1];\n    }\n  }, {\n    key: \"q2\",\n    get: function get() {\n      return this[this.length - 2];\n    }\n  }, {\n    key: \"q3\",\n    get: function get() {\n      return this[this.length - 3];\n    }\n  }, {\n    key: \"q4\",\n    get: function get() {\n      return this[this.length - 4];\n    }\n  }], [{\n    key: \"fromArray\",\n    value: function fromArray(list) {\n      var g = new Group();\n\n      for (var i = 0, len = list.length; i < len; i++) {\n        var p = list[i] instanceof Pt ? list[i] : new Pt(list[i]);\n        g.push(p);\n      }\n\n      return g;\n    }\n  }, {\n    key: \"fromPtArray\",\n    value: function fromPtArray(list) {\n      return Group.from(list);\n    }\n  }]);\n\n  return Group;\n}( /*#__PURE__*/_wrapNativeSuper(Array));\nexport var Bound = /*#__PURE__*/function (_Group) {\n  _inherits(Bound, _Group);\n\n  var _super3 = _createSuper(Bound);\n\n  function Bound() {\n    var _this2;\n\n    _classCallCheck(this, Bound);\n\n    for (var _len22 = arguments.length, args = new Array(_len22), _key22 = 0; _key22 < _len22; _key22++) {\n      args[_key22] = arguments[_key22];\n    }\n\n    _this2 = _super3.call.apply(_super3, [this].concat(args));\n    _this2._center = new Pt();\n    _this2._size = new Pt();\n    _this2._topLeft = new Pt();\n    _this2._bottomRight = new Pt();\n    _this2._inited = false;\n\n    _this2.init();\n\n    return _this2;\n  }\n\n  _createClass(Bound, [{\n    key: \"init\",\n    value: function init() {\n      if (this.p1) {\n        this._size = this.p1.clone();\n        this._inited = true;\n      }\n\n      if (this.p1 && this.p2) {\n        var a = this.p1;\n        var b = this.p2;\n        this.topLeft = a.$min(b);\n        this._bottomRight = a.$max(b);\n\n        this._updateSize();\n\n        this._inited = true;\n      }\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new Bound(this._topLeft.clone(), this._bottomRight.clone());\n    }\n  }, {\n    key: \"_updateSize\",\n    value: function _updateSize() {\n      this._size = this._bottomRight.$subtract(this._topLeft).abs();\n\n      this._updateCenter();\n    }\n  }, {\n    key: \"_updateCenter\",\n    value: function _updateCenter() {\n      this._center = this._size.$multiply(0.5).add(this._topLeft);\n    }\n  }, {\n    key: \"_updatePosFromTop\",\n    value: function _updatePosFromTop() {\n      this._bottomRight = this._topLeft.$add(this._size);\n\n      this._updateCenter();\n    }\n  }, {\n    key: \"_updatePosFromBottom\",\n    value: function _updatePosFromBottom() {\n      this._topLeft = this._bottomRight.$subtract(this._size);\n\n      this._updateCenter();\n    }\n  }, {\n    key: \"_updatePosFromCenter\",\n    value: function _updatePosFromCenter() {\n      var half = this._size.$multiply(0.5);\n\n      this._topLeft = this._center.$subtract(half);\n      this._bottomRight = this._center.$add(half);\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      this._topLeft = this[0];\n      this._bottomRight = this[1];\n\n      this._updateSize();\n\n      return this;\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return new Pt(this._size);\n    },\n    set: function set(p) {\n      this._size = new Pt(p);\n\n      this._updatePosFromTop();\n    }\n  }, {\n    key: \"center\",\n    get: function get() {\n      return new Pt(this._center);\n    },\n    set: function set(p) {\n      this._center = new Pt(p);\n\n      this._updatePosFromCenter();\n    }\n  }, {\n    key: \"topLeft\",\n    get: function get() {\n      return new Pt(this._topLeft);\n    },\n    set: function set(p) {\n      this._topLeft = new Pt(p);\n      this[0] = this._topLeft;\n\n      this._updateSize();\n    }\n  }, {\n    key: \"bottomRight\",\n    get: function get() {\n      return new Pt(this._bottomRight);\n    },\n    set: function set(p) {\n      this._bottomRight = new Pt(p);\n      this[1] = this._bottomRight;\n\n      this._updateSize();\n    }\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this._size.length > 0 ? this._size.x : 0;\n    },\n    set: function set(w) {\n      this._size.x = w;\n\n      this._updatePosFromTop();\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this._size.length > 1 ? this._size.y : 0;\n    },\n    set: function set(h) {\n      this._size.y = h;\n\n      this._updatePosFromTop();\n    }\n  }, {\n    key: \"depth\",\n    get: function get() {\n      return this._size.length > 2 ? this._size.z : 0;\n    },\n    set: function set(d) {\n      this._size.z = d;\n\n      this._updatePosFromTop();\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this.topLeft.x;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this.topLeft.y;\n    }\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this.topLeft.z;\n    }\n  }, {\n    key: \"inited\",\n    get: function get() {\n      return this._inited;\n    }\n  }], [{\n    key: \"fromBoundingRect\",\n    value: function fromBoundingRect(rect) {\n      var b = new Bound(new Pt(rect.left || 0, rect.top || 0), new Pt(rect.right || 0, rect.bottom || 0));\n      if (rect.width && rect.height) b.size = new Pt(rect.width, rect.height);\n      return b;\n    }\n  }, {\n    key: \"fromGroup\",\n    value: function fromGroup(g) {\n      if (g.length < 2) throw new Error(\"Cannot create a Bound from a group that has less than 2 Pt\");\n      return new Bound(g[0], g[g.length - 1]);\n    }\n  }]);\n\n  return Bound;\n}(Group);","import _assertThisInitialized from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _toConsumableArray from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*! Source code licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\nimport { Pt, Group } from \"./Pt\";\nimport { Rectangle, Circle, Polygon } from \"./Op\";\nexport var UIShape = {\n  rectangle: \"rectangle\",\n  circle: \"circle\",\n  polygon: \"polygon\",\n  polyline: \"polyline\",\n  line: \"line\"\n};\nexport var UIPointerActions = {\n  up: \"up\",\n  down: \"down\",\n  move: \"move\",\n  drag: \"drag\",\n  uidrag: \"uidrag\",\n  drop: \"drop\",\n  uidrop: \"uidrop\",\n  over: \"over\",\n  out: \"out\",\n  enter: \"enter\",\n  leave: \"leave\",\n  contextmenu: \"contextmenu\",\n  all: \"all\"\n};\nexport var UI = /*#__PURE__*/function () {\n  function UI(group, shape) {\n    var states = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var id = arguments.length > 3 ? arguments[3] : undefined;\n\n    _classCallCheck(this, UI);\n\n    this._holds = new Map();\n    this._group = Group.fromArray(group);\n    this._shape = shape;\n    this._id = id === undefined ? \"ui_\".concat(UI._counter++) : id;\n    this._states = states;\n    this._actions = {};\n  }\n\n  _createClass(UI, [{\n    key: \"state\",\n    value: function state(key, value) {\n      if (!key) return null;\n\n      if (value !== undefined) {\n        this._states[key] = value;\n        return this;\n      }\n\n      return this._states[key];\n    }\n  }, {\n    key: \"on\",\n    value: function on(type, fn) {\n      if (!this._actions[type]) this._actions[type] = [];\n      return UI._addHandler(this._actions[type], fn);\n    }\n  }, {\n    key: \"off\",\n    value: function off(type, which) {\n      if (!this._actions[type]) return false;\n\n      if (which === undefined) {\n        delete this._actions[type];\n        return true;\n      } else {\n        return UI._removeHandler(this._actions[type], which);\n      }\n    }\n  }, {\n    key: \"listen\",\n    value: function listen(type, p, evt) {\n      if (this._actions[type] !== undefined) {\n        if (this._within(p) || Array.from(this._holds.values()).indexOf(type) >= 0) {\n          UI._trigger(this._actions[type], this, p, type, evt);\n\n          return true;\n        } else if (this._actions['all']) {\n          UI._trigger(this._actions['all'], this, p, type, evt);\n\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"hold\",\n    value: function hold(type) {\n      var newKey = Math.max.apply(Math, [0].concat(_toConsumableArray(Array.from(this._holds.keys())))) + 1;\n\n      this._holds.set(newKey, type);\n\n      return newKey;\n    }\n  }, {\n    key: \"unhold\",\n    value: function unhold(key) {\n      if (key !== undefined) {\n        this._holds.delete(key);\n      } else {\n        this._holds.clear();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render(fn) {\n      fn(this._group, this._states);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return \"UI \".concat(this.group.toString);\n    }\n  }, {\n    key: \"_within\",\n    value: function _within(p) {\n      var fn = null;\n\n      if (this._shape === UIShape.rectangle) {\n        fn = Rectangle.withinBound;\n      } else if (this._shape === UIShape.circle) {\n        fn = Circle.withinBound;\n      } else if (this._shape === UIShape.polygon) {\n        fn = Polygon.hasIntersectPoint;\n      } else {\n        return false;\n      }\n\n      return fn(this._group, p);\n    }\n  }, {\n    key: \"id\",\n    get: function get() {\n      return this._id;\n    },\n    set: function set(d) {\n      this._id = d;\n    }\n  }, {\n    key: \"group\",\n    get: function get() {\n      return this._group;\n    },\n    set: function set(d) {\n      this._group = d;\n    }\n  }, {\n    key: \"shape\",\n    get: function get() {\n      return this._shape;\n    },\n    set: function set(d) {\n      this._shape = d;\n    }\n  }], [{\n    key: \"fromRectangle\",\n    value: function fromRectangle(group, states, id) {\n      return new this(group, UIShape.rectangle, states, id);\n    }\n  }, {\n    key: \"fromCircle\",\n    value: function fromCircle(group, states, id) {\n      return new this(group, UIShape.circle, states, id);\n    }\n  }, {\n    key: \"fromPolygon\",\n    value: function fromPolygon(group, states, id) {\n      return new this(group, UIShape.polygon, states, id);\n    }\n  }, {\n    key: \"fromUI\",\n    value: function fromUI(ui, states, id) {\n      return new this(ui.group, ui.shape, states || ui._states, id);\n    }\n  }, {\n    key: \"track\",\n    value: function track(uis, type, p, evt) {\n      for (var i = 0, len = uis.length; i < len; i++) {\n        uis[i].listen(type, p, evt);\n      }\n    }\n  }, {\n    key: \"_trigger\",\n    value: function _trigger(fns, target, pt, type, evt) {\n      if (fns) {\n        for (var i = 0, len = fns.length; i < len; i++) {\n          if (fns[i]) fns[i](target, pt, type, evt);\n        }\n      }\n    }\n  }, {\n    key: \"_addHandler\",\n    value: function _addHandler(fns, fn) {\n      if (fn) {\n        fns.push(fn);\n        return fns.length - 1;\n      } else {\n        return -1;\n      }\n    }\n  }, {\n    key: \"_removeHandler\",\n    value: function _removeHandler(fns, index) {\n      if (index >= 0 && index < fns.length) {\n        var temp = fns.length;\n        fns.splice(index, 1);\n        return temp > fns.length;\n      } else {\n        return false;\n      }\n    }\n  }]);\n\n  return UI;\n}();\nUI._counter = 0;\nexport var UIButton = /*#__PURE__*/function (_UI) {\n  _inherits(UIButton, _UI);\n\n  var _super = _createSuper(UIButton);\n\n  function UIButton(group, shape) {\n    var _this;\n\n    var states = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var id = arguments.length > 3 ? arguments[3] : undefined;\n\n    _classCallCheck(this, UIButton);\n\n    _this = _super.call(this, group, shape, states, id);\n    _this._hoverID = -1;\n    if (states.hover === undefined) _this._states['hover'] = false;\n    if (states.clicks === undefined) _this._states['clicks'] = 0;\n    var UA = UIPointerActions;\n\n    _this.on(UA.up, function (target, pt, type, evt) {\n      _this.state('clicks', _this._states.clicks + 1);\n    });\n\n    _this.on(UA.move, function (target, pt, type, evt) {\n      var hover = _this._within(pt);\n\n      if (hover && !_this._states.hover) {\n        _this.state('hover', true);\n\n        UI._trigger(_this._actions[UA.enter], _assertThisInitialized(_this), pt, UA.enter, evt);\n\n        var _capID = _this.hold(UA.move);\n\n        _this._hoverID = _this.on(UA.move, function (t, p) {\n          if (!_this._within(p) && !_this.state('dragging')) {\n            _this.state('hover', false);\n\n            UI._trigger(_this._actions[UA.leave], _assertThisInitialized(_this), pt, UA.leave, evt);\n\n            _this.off(UA.move, _this._hoverID);\n\n            _this.unhold(_capID);\n          }\n        });\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(UIButton, [{\n    key: \"onClick\",\n    value: function onClick(fn) {\n      return this.on(UIPointerActions.up, fn);\n    }\n  }, {\n    key: \"offClick\",\n    value: function offClick(id) {\n      return this.off(UIPointerActions.up, id);\n    }\n  }, {\n    key: \"onContextMenu\",\n    value: function onContextMenu(fn) {\n      return this.on(UIPointerActions.contextmenu, fn);\n    }\n  }, {\n    key: \"offContextMenu\",\n    value: function offContextMenu(id) {\n      return this.off(UIPointerActions.contextmenu, id);\n    }\n  }, {\n    key: \"onHover\",\n    value: function onHover(enter, leave) {\n      var ids = [undefined, undefined];\n      if (enter) ids[0] = this.on(UIPointerActions.enter, enter);\n      if (leave) ids[1] = this.on(UIPointerActions.leave, leave);\n      return ids;\n    }\n  }, {\n    key: \"offHover\",\n    value: function offHover(enterID, leaveID) {\n      var s = [false, false];\n      if (enterID === undefined || enterID >= 0) s[0] = this.off(UIPointerActions.enter, enterID);\n      if (leaveID === undefined || leaveID >= 0) s[1] = this.off(UIPointerActions.leave, leaveID);\n      return s;\n    }\n  }]);\n\n  return UIButton;\n}(UI);\nexport var UIDragger = /*#__PURE__*/function (_UIButton) {\n  _inherits(UIDragger, _UIButton);\n\n  var _super2 = _createSuper(UIDragger);\n\n  function UIDragger(group, shape) {\n    var _this2;\n\n    var states = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var id = arguments.length > 3 ? arguments[3] : undefined;\n\n    _classCallCheck(this, UIDragger);\n\n    _this2 = _super2.call(this, group, shape, states, id);\n    _this2._draggingID = -1;\n    _this2._moveHoldID = -1;\n    _this2._dropHoldID = -1;\n    _this2._upHoldID = -1;\n    if (states.dragging === undefined) _this2._states['dragging'] = false;\n    if (states.moved === undefined) _this2._states['moved'] = false;\n    if (states.offset === undefined) _this2._states['offset'] = new Pt();\n    var UA = UIPointerActions;\n\n    _this2.on(UA.down, function (target, pt, type, evt) {\n      if (_this2._moveHoldID === -1) {\n        _this2.state('dragging', true);\n\n        _this2.state('offset', new Pt(pt).subtract(target.group[0]));\n\n        _this2._moveHoldID = _this2.hold(UA.move);\n      }\n\n      if (_this2._dropHoldID === -1) {\n        _this2._dropHoldID = _this2.hold(UA.drop);\n      }\n\n      if (_this2._upHoldID === -1) {\n        _this2._upHoldID = _this2.hold(UA.up);\n      }\n\n      if (_this2._draggingID === -1) {\n        _this2._draggingID = _this2.on(UA.move, function (t, p) {\n          if (_this2.state('dragging')) {\n            UI._trigger(_this2._actions[UA.uidrag], t, p, UA.uidrag, evt);\n\n            _this2.state('moved', true);\n          }\n        });\n      }\n    });\n\n    var endDrag = function endDrag(target, pt, type, evt) {\n      _this2.state('dragging', false);\n\n      _this2.off(UA.move, _this2._draggingID);\n\n      _this2._draggingID = -1;\n\n      _this2.unhold(_this2._moveHoldID);\n\n      _this2._moveHoldID = -1;\n\n      _this2.unhold(_this2._dropHoldID);\n\n      _this2._dropHoldID = -1;\n\n      _this2.unhold(_this2._upHoldID);\n\n      _this2._upHoldID = -1;\n\n      if (_this2.state('moved')) {\n        UI._trigger(_this2._actions[UA.uidrop], target, pt, UA.uidrop, evt);\n\n        _this2.state('moved', false);\n      }\n    };\n\n    _this2.on(UA.drop, endDrag);\n\n    _this2.on(UA.up, endDrag);\n\n    _this2.on(UA.out, endDrag);\n\n    return _this2;\n  }\n\n  _createClass(UIDragger, [{\n    key: \"onDrag\",\n    value: function onDrag(fn) {\n      return this.on(UIPointerActions.uidrag, fn);\n    }\n  }, {\n    key: \"offDrag\",\n    value: function offDrag(id) {\n      return this.off(UIPointerActions.uidrag, id);\n    }\n  }, {\n    key: \"onDrop\",\n    value: function onDrop(fn) {\n      return this.on(UIPointerActions.uidrop, fn);\n    }\n  }, {\n    key: \"offDrop\",\n    value: function offDrop(id) {\n      return this.off(UIPointerActions.uidrop, id);\n    }\n  }]);\n\n  return UIDragger;\n}(UIButton);","import _inherits from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _classCallCheck from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*! Source code licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\nimport { Pt, Bound } from \"./Pt\";\nimport { UIPointerActions as UIA } from \"./UI\";\nexport var Space = /*#__PURE__*/function () {\n  function Space() {\n    _classCallCheck(this, Space);\n\n    this.id = \"space\";\n    this.bound = new Bound();\n    this._time = {\n      prev: 0,\n      diff: 0,\n      end: -1\n    };\n    this.players = {};\n    this.playerCount = 0;\n    this._animID = -1;\n    this._pause = false;\n    this._refresh = undefined;\n    this._pointer = new Pt();\n    this._isReady = false;\n    this._playing = false;\n  }\n\n  _createClass(Space, [{\n    key: \"refresh\",\n    value: function refresh(b) {\n      this._refresh = b;\n      return this;\n    }\n  }, {\n    key: \"add\",\n    value: function add(p) {\n      var player = typeof p == \"function\" ? {\n        animate: p\n      } : p;\n      var k = this.playerCount++;\n      var pid = this.id + k;\n      this.players[pid] = player;\n      player.animateID = pid;\n      if (player.resize && this.bound.inited) player.resize(this.bound);\n      if (this._refresh === undefined) this._refresh = true;\n      return this;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(player) {\n      delete this.players[player.animateID];\n      return this;\n    }\n  }, {\n    key: \"removeAll\",\n    value: function removeAll() {\n      this.players = {};\n      return this;\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n      if (time === 0 && this._animID !== -1) {\n        return;\n      }\n\n      this._animID = requestAnimationFrame(this.play.bind(this));\n      if (this._pause) return this;\n      this._time.diff = time - this._time.prev;\n      this._time.prev = time;\n\n      try {\n        this.playItems(time);\n      } catch (err) {\n        cancelAnimationFrame(this._animID);\n        this._animID = -1;\n        this._playing = false;\n        throw err;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"replay\",\n    value: function replay() {\n      this._time.end = -1;\n      this.play();\n    }\n  }, {\n    key: \"playItems\",\n    value: function playItems(time) {\n      this._playing = true;\n      if (this._refresh) this.clear();\n\n      if (this._isReady) {\n        for (var k in this.players) {\n          if (this.players[k].animate) this.players[k].animate(time, this._time.diff, this);\n        }\n      }\n\n      if (this._time.end >= 0 && time > this._time.end) {\n        cancelAnimationFrame(this._animID);\n        this._animID = -1;\n        this._playing = false;\n      }\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      var toggle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      this._pause = toggle ? !this._pause : true;\n      return this;\n    }\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      this._pause = false;\n      return this;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      this._time.end = t;\n      return this;\n    }\n  }, {\n    key: \"playOnce\",\n    value: function playOnce() {\n      var duration = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 5000;\n      this.play();\n      this.stop(duration);\n      return this;\n    }\n  }, {\n    key: \"render\",\n    value: function render(context) {\n      if (this._renderFunc) this._renderFunc(context, this);\n      return this;\n    }\n  }, {\n    key: \"customRendering\",\n    set: function set(f) {\n      this._renderFunc = f;\n    },\n    get: function get() {\n      return this._renderFunc;\n    }\n  }, {\n    key: \"isPlaying\",\n    get: function get() {\n      return this._playing;\n    }\n  }, {\n    key: \"outerBound\",\n    get: function get() {\n      return this.bound.clone();\n    }\n  }, {\n    key: \"innerBound\",\n    get: function get() {\n      return new Bound(Pt.make(this.size.length, 0), this.size.clone());\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return this.bound.size.clone();\n    }\n  }, {\n    key: \"center\",\n    get: function get() {\n      return this.size.divide(2);\n    }\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this.bound.width;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this.bound.height;\n    }\n  }]);\n\n  return Space;\n}();\nexport var MultiTouchSpace = /*#__PURE__*/function (_Space) {\n  _inherits(MultiTouchSpace, _Space);\n\n  var _super = _createSuper(MultiTouchSpace);\n\n  function MultiTouchSpace() {\n    var _this;\n\n    _classCallCheck(this, MultiTouchSpace);\n\n    _this = _super.apply(this, arguments);\n    _this._pressed = false;\n    _this._dragged = false;\n    _this._hasMouse = false;\n    _this._hasTouch = false;\n    return _this;\n  }\n\n  _createClass(MultiTouchSpace, [{\n    key: \"bindCanvas\",\n    value: function bindCanvas(evt, callback) {\n      this._canvas.addEventListener(evt, callback);\n    }\n  }, {\n    key: \"unbindCanvas\",\n    value: function unbindCanvas(evt, callback) {\n      this._canvas.removeEventListener(evt, callback);\n    }\n  }, {\n    key: \"bindMouse\",\n    value: function bindMouse() {\n      var _bind = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      if (_bind) {\n        this.bindCanvas(\"mousedown\", this._mouseDown.bind(this));\n        this.bindCanvas(\"mouseup\", this._mouseUp.bind(this));\n        this.bindCanvas(\"mouseover\", this._mouseOver.bind(this));\n        this.bindCanvas(\"mouseout\", this._mouseOut.bind(this));\n        this.bindCanvas(\"mousemove\", this._mouseMove.bind(this));\n        this.bindCanvas(\"contextmenu\", this._contextMenu.bind(this));\n        this._hasMouse = true;\n      } else {\n        this.unbindCanvas(\"mousedown\", this._mouseDown.bind(this));\n        this.unbindCanvas(\"mouseup\", this._mouseUp.bind(this));\n        this.unbindCanvas(\"mouseover\", this._mouseOver.bind(this));\n        this.unbindCanvas(\"mouseout\", this._mouseOut.bind(this));\n        this.unbindCanvas(\"mousemove\", this._mouseMove.bind(this));\n        this.unbindCanvas(\"contextmenu\", this._contextMenu.bind(this));\n        this._hasMouse = false;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"bindTouch\",\n    value: function bindTouch() {\n      var _bind = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      if (_bind) {\n        this.bindCanvas(\"touchstart\", this._touchStart.bind(this));\n        this.bindCanvas(\"touchend\", this._mouseUp.bind(this));\n        this.bindCanvas(\"touchmove\", this._touchMove.bind(this));\n        this.bindCanvas(\"touchcancel\", this._mouseOut.bind(this));\n        this._hasTouch = true;\n      } else {\n        this.unbindCanvas(\"touchstart\", this._touchStart.bind(this));\n        this.unbindCanvas(\"touchend\", this._mouseUp.bind(this));\n        this.unbindCanvas(\"touchmove\", this._touchMove.bind(this));\n        this.unbindCanvas(\"touchcancel\", this._mouseOut.bind(this));\n        this._hasTouch = false;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"touchesToPoints\",\n    value: function touchesToPoints(evt) {\n      var which = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"touches\";\n      if (!evt || !evt[which]) return [];\n      var ts = [];\n\n      for (var i = 0; i < evt[which].length; i++) {\n        var t = evt[which].item(i);\n        ts.push(new Pt(t.pageX - this.bound.topLeft.x, t.pageY - this.bound.topLeft.y));\n      }\n\n      return ts;\n    }\n  }, {\n    key: \"_mouseAction\",\n    value: function _mouseAction(type, evt) {\n      var px = 0,\n          py = 0;\n\n      if (evt instanceof MouseEvent) {\n        for (var k in this.players) {\n          if (this.players.hasOwnProperty(k)) {\n            var v = this.players[k];\n            px = evt.pageX - this.outerBound.x;\n            py = evt.pageY - this.outerBound.y;\n            if (v.action) v.action(type, px, py, evt);\n          }\n        }\n      } else {\n        for (var _k in this.players) {\n          if (this.players.hasOwnProperty(_k)) {\n            var _v = this.players[_k];\n            var c = evt.changedTouches && evt.changedTouches.length > 0;\n            var touch = evt.changedTouches.item(0);\n            px = c ? touch.pageX - this.outerBound.x : 0;\n            py = c ? touch.pageY - this.outerBound.y : 0;\n            if (_v.action) _v.action(type, px, py, evt);\n          }\n        }\n      }\n\n      if (type) {\n        this._pointer.to(px, py);\n\n        this._pointer.id = type;\n      }\n    }\n  }, {\n    key: \"_mouseDown\",\n    value: function _mouseDown(evt) {\n      this._mouseAction(UIA.down, evt);\n\n      this._pressed = true;\n      return false;\n    }\n  }, {\n    key: \"_mouseUp\",\n    value: function _mouseUp(evt) {\n      if (this._dragged) {\n        this._mouseAction(UIA.drop, evt);\n      } else {\n        this._mouseAction(UIA.up, evt);\n      }\n\n      this._pressed = false;\n      this._dragged = false;\n      return false;\n    }\n  }, {\n    key: \"_mouseMove\",\n    value: function _mouseMove(evt) {\n      this._mouseAction(UIA.move, evt);\n\n      if (this._pressed) {\n        this._dragged = true;\n\n        this._mouseAction(UIA.drag, evt);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"_mouseOver\",\n    value: function _mouseOver(evt) {\n      this._mouseAction(UIA.over, evt);\n\n      return false;\n    }\n  }, {\n    key: \"_mouseOut\",\n    value: function _mouseOut(evt) {\n      this._mouseAction(UIA.out, evt);\n\n      if (this._dragged) this._mouseAction(UIA.drop, evt);\n      this._dragged = false;\n      return false;\n    }\n  }, {\n    key: \"_contextMenu\",\n    value: function _contextMenu(evt) {\n      this._mouseAction(UIA.contextmenu, evt);\n\n      return false;\n    }\n  }, {\n    key: \"_touchMove\",\n    value: function _touchMove(evt) {\n      this._mouseMove(evt);\n\n      evt.preventDefault();\n      return false;\n    }\n  }, {\n    key: \"_touchStart\",\n    value: function _touchStart(evt) {\n      this._mouseDown(evt);\n\n      evt.preventDefault();\n      return false;\n    }\n  }, {\n    key: \"pointer\",\n    get: function get() {\n      var p = this._pointer.clone();\n\n      p.id = this._pointer.id;\n      return p;\n    }\n  }]);\n\n  return MultiTouchSpace;\n}(Space);","import _inherits from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _classCallCheck from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*! Source code licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\nimport { Util } from \"./Util\";\nexport var Form = /*#__PURE__*/function () {\n  function Form() {\n    _classCallCheck(this, Form);\n\n    this._ready = false;\n  }\n\n  _createClass(Form, [{\n    key: \"ready\",\n    get: function get() {\n      return this._ready;\n    }\n  }], [{\n    key: \"_checkSize\",\n    value: function _checkSize(pts) {\n      var required = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n\n      if (pts.length < required) {\n        Util.warn(\"Requires 2 or more Pts in this Group.\");\n        return false;\n      }\n\n      return true;\n    }\n  }]);\n\n  return Form;\n}();\nexport var VisualForm = /*#__PURE__*/function (_Form) {\n  _inherits(VisualForm, _Form);\n\n  var _super = _createSuper(VisualForm);\n\n  function VisualForm() {\n    var _this;\n\n    _classCallCheck(this, VisualForm);\n\n    _this = _super.apply(this, arguments);\n    _this._filled = true;\n    _this._stroked = true;\n    _this._font = new Font(14, \"sans-serif\");\n    return _this;\n  }\n\n  _createClass(VisualForm, [{\n    key: \"_multiple\",\n    value: function _multiple(groups, shape) {\n      if (!groups) return this;\n\n      for (var _len = arguments.length, rest = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        rest[_key - 2] = arguments[_key];\n      }\n\n      for (var i = 0, len = groups.length; i < len; i++) {\n        this[shape].apply(this, [groups[i]].concat(rest));\n      }\n\n      return this;\n    }\n  }, {\n    key: \"alpha\",\n    value: function alpha(a) {\n      return this;\n    }\n  }, {\n    key: \"fill\",\n    value: function fill(c) {\n      return this;\n    }\n  }, {\n    key: \"fillOnly\",\n    value: function fillOnly(c) {\n      this.stroke(false);\n      return this.fill(c);\n    }\n  }, {\n    key: \"stroke\",\n    value: function stroke(c, width, linejoin, linecap) {\n      return this;\n    }\n  }, {\n    key: \"strokeOnly\",\n    value: function strokeOnly(c, width, linejoin, linecap) {\n      this.fill(false);\n      return this.stroke(c, width, linejoin, linecap);\n    }\n  }, {\n    key: \"points\",\n    value: function points(pts, radius, shape) {\n      if (!pts) return;\n\n      for (var i = 0, len = pts.length; i < len; i++) {\n        this.point(pts[i], radius, shape);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"circles\",\n    value: function circles(groups) {\n      return this._multiple(groups, \"circle\");\n    }\n  }, {\n    key: \"squares\",\n    value: function squares(groups) {\n      return this._multiple(groups, \"square\");\n    }\n  }, {\n    key: \"lines\",\n    value: function lines(groups) {\n      return this._multiple(groups, \"line\");\n    }\n  }, {\n    key: \"polygons\",\n    value: function polygons(groups) {\n      return this._multiple(groups, \"polygon\");\n    }\n  }, {\n    key: \"rects\",\n    value: function rects(groups) {\n      return this._multiple(groups, \"rect\");\n    }\n  }, {\n    key: \"filled\",\n    get: function get() {\n      return this._filled;\n    },\n    set: function set(b) {\n      this._filled = b;\n    }\n  }, {\n    key: \"stroked\",\n    get: function get() {\n      return this._stroked;\n    },\n    set: function set(b) {\n      this._stroked = b;\n    }\n  }, {\n    key: \"currentFont\",\n    get: function get() {\n      return this._font;\n    }\n  }]);\n\n  return VisualForm;\n}(Form);\nexport var Font = /*#__PURE__*/function () {\n  function Font() {\n    var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 12;\n    var face = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"sans-serif\";\n    var weight = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n    var style = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"\";\n    var lineHeight = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1.5;\n\n    _classCallCheck(this, Font);\n\n    this.size = size;\n    this.face = face;\n    this.style = style;\n    this.weight = weight;\n    this.lineHeight = lineHeight;\n  }\n\n  _createClass(Font, [{\n    key: \"toString\",\n    value: function toString() {\n      return this.value;\n    }\n  }, {\n    key: \"value\",\n    get: function get() {\n      return \"\".concat(this.style, \" \").concat(this.weight, \" \").concat(this.size, \"px/\").concat(this.lineHeight, \" \").concat(this.face);\n    }\n  }]);\n\n  return Font;\n}();","import _construct from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/construct\";\nimport _inherits from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _classCallCheck from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*! Source code licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\nimport { Pt, Group } from \"./Pt\";\nimport { Line, Triangle } from \"./Op\";\nimport { Const } from \"./Util\";\nimport { Num, Geom } from \"./Num\";\nimport { Vec } from \"./LinearAlgebra\";\nexport var Create = /*#__PURE__*/function () {\n  function Create() {\n    _classCallCheck(this, Create);\n  }\n\n  _createClass(Create, null, [{\n    key: \"distributeRandom\",\n    value: function distributeRandom(bound, count) {\n      var dimensions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2;\n      var pts = new Group();\n\n      for (var i = 0; i < count; i++) {\n        var p = [bound.x + Math.random() * bound.width];\n        if (dimensions > 1) p.push(bound.y + Math.random() * bound.height);\n        if (dimensions > 2) p.push(bound.z + Math.random() * bound.depth);\n        pts.push(new Pt(p));\n      }\n\n      return pts;\n    }\n  }, {\n    key: \"distributeLinear\",\n    value: function distributeLinear(line, count) {\n      var ln = Line.subpoints(line, count - 2);\n      ln.unshift(line[0]);\n      ln.push(line[line.length - 1]);\n      return ln;\n    }\n  }, {\n    key: \"gridPts\",\n    value: function gridPts(bound, columns, rows) {\n      var orientation = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [0.5, 0.5];\n      if (columns === 0 || rows === 0) throw new Error(\"grid columns and rows cannot be 0\");\n      var unit = bound.size.$subtract(1).$divide(columns, rows);\n      var offset = unit.$multiply(orientation);\n      var g = new Group();\n\n      for (var r = 0; r < rows; r++) {\n        for (var c = 0; c < columns; c++) {\n          g.push(bound.topLeft.$add(unit.$multiply(c, r)).add(offset));\n        }\n      }\n\n      return g;\n    }\n  }, {\n    key: \"gridCells\",\n    value: function gridCells(bound, columns, rows) {\n      if (columns === 0 || rows === 0) throw new Error(\"grid columns and rows cannot be 0\");\n      var unit = bound.size.$subtract(1).divide(columns, rows);\n      var g = [];\n\n      for (var r = 0; r < rows; r++) {\n        for (var c = 0; c < columns; c++) {\n          g.push(new Group(bound.topLeft.$add(unit.$multiply(c, r)), bound.topLeft.$add(unit.$multiply(c, r).add(unit))));\n        }\n      }\n\n      return g;\n    }\n  }, {\n    key: \"radialPts\",\n    value: function radialPts(center, radius, count) {\n      var angleOffset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : -Const.half_pi;\n      var g = new Group();\n      var a = Const.two_pi / count;\n\n      for (var i = 0; i < count; i++) {\n        g.push(new Pt(center).toAngle(a * i + angleOffset, radius, true));\n      }\n\n      return g;\n    }\n  }, {\n    key: \"noisePts\",\n    value: function noisePts(pts) {\n      var dx = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.01;\n      var dy = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.01;\n      var rows = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var columns = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n      var seed = Math.random();\n      var g = new Group();\n\n      for (var i = 0, len = pts.length; i < len; i++) {\n        var np = new Noise(pts[i]);\n        var r = rows && rows > 0 ? Math.floor(i / rows) : i;\n        var c = columns && columns > 0 ? i % columns : i;\n        np.initNoise(dx * c, dy * r);\n        np.seed(seed);\n        g.push(np);\n      }\n\n      return g;\n    }\n  }, {\n    key: \"delaunay\",\n    value: function delaunay(pts) {\n      return Delaunay.from(pts);\n    }\n  }]);\n\n  return Create;\n}();\nvar __noise_grad3 = [[1, 1, 0], [-1, 1, 0], [1, -1, 0], [-1, -1, 0], [1, 0, 1], [-1, 0, 1], [1, 0, -1], [-1, 0, -1], [0, 1, 1], [0, -1, 1], [0, 1, -1], [0, -1, -1]];\nvar __noise_permTable = [151, 160, 137, 91, 90, 15, 131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23, 190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33, 88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166, 77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244, 102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196, 135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123, 5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42, 223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9, 129, 22, 39, 253, 9, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228, 251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107, 49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254, 138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180];\nexport var Noise = /*#__PURE__*/function (_Pt) {\n  _inherits(Noise, _Pt);\n\n  var _super = _createSuper(Noise);\n\n  function Noise() {\n    var _this;\n\n    _classCallCheck(this, Noise);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.perm = [];\n    _this._n = new Pt(0.01, 0.01);\n    _this.perm = __noise_permTable.concat(__noise_permTable);\n    return _this;\n  }\n\n  _createClass(Noise, [{\n    key: \"initNoise\",\n    value: function initNoise() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      this._n = _construct(Pt, args);\n      return this;\n    }\n  }, {\n    key: \"step\",\n    value: function step() {\n      var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      this._n.add(x, y);\n\n      return this;\n    }\n  }, {\n    key: \"seed\",\n    value: function seed(s) {\n      if (s > 0 && s < 1) s *= 65536;\n      s = Math.floor(s);\n      if (s < 256) s |= s << 8;\n\n      for (var i = 0; i < 255; i++) {\n        var v = i & 1 ? __noise_permTable[i] ^ s & 255 : __noise_permTable[i] ^ s >> 8 & 255;\n        this.perm[i] = this.perm[i + 256] = v;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"noise2D\",\n    value: function noise2D() {\n      var i = Math.max(0, Math.floor(this._n[0])) % 255;\n      var j = Math.max(0, Math.floor(this._n[1])) % 255;\n      var x = this._n[0] % 255 - i;\n      var y = this._n[1] % 255 - j;\n      var n00 = Vec.dot(__noise_grad3[(i + this.perm[j]) % 12], [x, y, 0]);\n      var n01 = Vec.dot(__noise_grad3[(i + this.perm[j + 1]) % 12], [x, y - 1, 0]);\n      var n10 = Vec.dot(__noise_grad3[(i + 1 + this.perm[j]) % 12], [x - 1, y, 0]);\n      var n11 = Vec.dot(__noise_grad3[(i + 1 + this.perm[j + 1]) % 12], [x - 1, y - 1, 0]);\n\n      var _fade = function _fade(f) {\n        return f * f * f * (f * (f * 6 - 15) + 10);\n      };\n\n      var tx = _fade(x);\n\n      return Num.lerp(Num.lerp(n00, n10, tx), Num.lerp(n01, n11, tx), _fade(y));\n    }\n  }]);\n\n  return Noise;\n}(Pt);\nexport var Delaunay = /*#__PURE__*/function (_Group) {\n  _inherits(Delaunay, _Group);\n\n  var _super2 = _createSuper(Delaunay);\n\n  function Delaunay() {\n    var _this2;\n\n    _classCallCheck(this, Delaunay);\n\n    _this2 = _super2.apply(this, arguments);\n    _this2._mesh = [];\n    return _this2;\n  }\n\n  _createClass(Delaunay, [{\n    key: \"delaunay\",\n    value: function delaunay() {\n      var _this3 = this;\n\n      var triangleOnly = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (this.length < 3) return [];\n      this._mesh = [];\n      var n = this.length;\n      var indices = [];\n\n      for (var i = 0; i < n; i++) {\n        indices[i] = i;\n      }\n\n      indices.sort(function (i, j) {\n        return _this3[j][0] - _this3[i][0];\n      });\n      var pts = this.slice();\n\n      var st = this._superTriangle();\n\n      pts = pts.concat(st);\n      var opened = [this._circum(n, n + 1, n + 2, st)];\n      var closed = [];\n      var tris = [];\n\n      for (var _i = 0, len = indices.length; _i < len; _i++) {\n        var c = indices[_i];\n        var edges = [];\n        var j = opened.length;\n        if (!this._mesh[c]) this._mesh[c] = {};\n\n        while (j--) {\n          var circum = opened[j];\n          var radius = circum.circle[1][0];\n          var d = pts[c].$subtract(circum.circle[0]);\n\n          if (d[0] > 0 && d[0] * d[0] > radius * radius) {\n            closed.push(circum);\n            tris.push(circum.triangle);\n            opened.splice(j, 1);\n            continue;\n          }\n\n          if (d[0] * d[0] + d[1] * d[1] - radius * radius > Const.epsilon) {\n            continue;\n          }\n\n          edges.push(circum.i, circum.j, circum.j, circum.k, circum.k, circum.i);\n          opened.splice(j, 1);\n        }\n\n        Delaunay._dedupe(edges);\n\n        j = edges.length;\n\n        while (j > 1) {\n          opened.push(this._circum(edges[--j], edges[--j], c, false, pts));\n        }\n      }\n\n      for (var _i2 = 0, _len3 = opened.length; _i2 < _len3; _i2++) {\n        var o = opened[_i2];\n\n        if (o.i < n && o.j < n && o.k < n) {\n          closed.push(o);\n          tris.push(o.triangle);\n\n          this._cache(o);\n        }\n      }\n\n      return triangleOnly ? tris : closed;\n    }\n  }, {\n    key: \"voronoi\",\n    value: function voronoi() {\n      var vs = [];\n      var n = this._mesh;\n\n      for (var i = 0, len = n.length; i < len; i++) {\n        vs.push(this.neighborPts(i, true));\n      }\n\n      return vs;\n    }\n  }, {\n    key: \"mesh\",\n    value: function mesh() {\n      return this._mesh;\n    }\n  }, {\n    key: \"neighborPts\",\n    value: function neighborPts(i) {\n      var sort = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var cs = new Group();\n      var n = this._mesh;\n\n      for (var k in n[i]) {\n        if (n[i].hasOwnProperty(k)) cs.push(n[i][k].circle[0]);\n      }\n\n      return sort ? Geom.sortEdges(cs) : cs;\n    }\n  }, {\n    key: \"neighbors\",\n    value: function neighbors(i) {\n      var cs = [];\n      var n = this._mesh;\n\n      for (var k in n[i]) {\n        if (n[i].hasOwnProperty(k)) cs.push(n[i][k]);\n      }\n\n      return cs;\n    }\n  }, {\n    key: \"_cache\",\n    value: function _cache(o) {\n      this._mesh[o.i][\"\".concat(Math.min(o.j, o.k), \"-\").concat(Math.max(o.j, o.k))] = o;\n      this._mesh[o.j][\"\".concat(Math.min(o.i, o.k), \"-\").concat(Math.max(o.i, o.k))] = o;\n      this._mesh[o.k][\"\".concat(Math.min(o.i, o.j), \"-\").concat(Math.max(o.i, o.j))] = o;\n    }\n  }, {\n    key: \"_superTriangle\",\n    value: function _superTriangle() {\n      var minPt = this[0];\n      var maxPt = this[0];\n\n      for (var i = 1, len = this.length; i < len; i++) {\n        minPt = minPt.$min(this[i]);\n        maxPt = maxPt.$max(this[i]);\n      }\n\n      var d = maxPt.$subtract(minPt);\n      var mid = minPt.$add(maxPt).divide(2);\n      var dmax = Math.max(d[0], d[1]);\n      return new Group(mid.$subtract(20 * dmax, dmax), mid.$add(0, 20 * dmax), mid.$add(20 * dmax, -dmax));\n    }\n  }, {\n    key: \"_triangle\",\n    value: function _triangle(i, j, k) {\n      var pts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this;\n      return new Group(pts[i], pts[j], pts[k]);\n    }\n  }, {\n    key: \"_circum\",\n    value: function _circum(i, j, k, tri) {\n      var pts = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this;\n\n      var t = tri || this._triangle(i, j, k, pts);\n\n      return {\n        i: i,\n        j: j,\n        k: k,\n        triangle: t,\n        circle: Triangle.circumcircle(t)\n      };\n    }\n  }], [{\n    key: \"_dedupe\",\n    value: function _dedupe(edges) {\n      var j = edges.length;\n\n      while (j > 1) {\n        var b = edges[--j];\n        var a = edges[--j];\n        var i = j;\n\n        while (i > 1) {\n          var n = edges[--i];\n          var m = edges[--i];\n\n          if (a == m && b == n || a == n && b == m) {\n            edges.splice(j, 2);\n            edges.splice(i, 2);\n            break;\n          }\n        }\n      }\n\n      return edges;\n    }\n  }]);\n\n  return Delaunay;\n}(Group);","import _slicedToArray from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*! Source code licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\nimport { Pt, Group } from \"./Pt\";\nimport { Util } from \"./Util\";\nimport { Num, Geom } from \"./Num\";\nexport var Color = /*#__PURE__*/function (_Pt) {\n  _inherits(Color, _Pt);\n\n  var _super = _createSuper(Color);\n\n  function Color() {\n    var _this;\n\n    _classCallCheck(this, Color);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this._mode = \"rgb\";\n    _this._isNorm = false;\n    return _this;\n  }\n\n  _createClass(Color, [{\n    key: \"clone\",\n    value: function clone() {\n      var c = new Color(this);\n      c.toMode(this._mode);\n      return c;\n    }\n  }, {\n    key: \"toMode\",\n    value: function toMode(mode) {\n      var convert = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (convert) {\n        var fname = this._mode.toUpperCase() + \"to\" + mode.toUpperCase();\n\n        if (Color[fname]) {\n          this.to(Color[fname](this, this._isNorm, this._isNorm));\n        } else {\n          throw new Error(\"Cannot convert color with \" + fname);\n        }\n      }\n\n      this._mode = mode;\n      return this;\n    }\n  }, {\n    key: \"normalize\",\n    value: function normalize() {\n      var toNorm = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (this._isNorm == toNorm) return this;\n      var ranges = Color.ranges[this._mode];\n\n      for (var i = 0; i < 3; i++) {\n        this[i] = !toNorm ? Num.mapToRange(this[i], 0, 1, ranges[i][0], ranges[i][1]) : Num.mapToRange(this[i], ranges[i][0], ranges[i][1], 0, 1);\n      }\n\n      this._isNorm = toNorm;\n      return this;\n    }\n  }, {\n    key: \"$normalize\",\n    value: function $normalize() {\n      var toNorm = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      return this.clone().normalize(toNorm);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      var format = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"mode\";\n\n      if (format == \"hex\") {\n        var _hex = function _hex(n) {\n          var s = Math.floor(n).toString(16);\n          return s.length < 2 ? '0' + s : s;\n        };\n\n        return \"#\".concat(_hex(this[0])).concat(_hex(this[1])).concat(_hex(this[2]));\n      } else if (format == \"rgba\") {\n        return \"rgba(\".concat(Math.floor(this[0]), \",\").concat(Math.floor(this[1]), \",\").concat(Math.floor(this[2]), \",\").concat(this.alpha);\n      } else if (format == \"rgb\") {\n        return \"rgb(\".concat(Math.floor(this[0]), \",\").concat(Math.floor(this[1]), \",\").concat(Math.floor(this[2]));\n      } else {\n        return \"\".concat(this._mode, \"(\").concat(this[0], \",\").concat(this[1], \",\").concat(this[2], \",\").concat(this.alpha, \")\");\n      }\n    }\n  }, {\n    key: \"hex\",\n    get: function get() {\n      return this.toString(\"hex\");\n    }\n  }, {\n    key: \"rgb\",\n    get: function get() {\n      return this.toString(\"rgb\");\n    }\n  }, {\n    key: \"rgba\",\n    get: function get() {\n      return this.toString(\"rgba\");\n    }\n  }, {\n    key: \"mode\",\n    get: function get() {\n      return this._mode;\n    }\n  }, {\n    key: \"r\",\n    get: function get() {\n      return this[0];\n    },\n    set: function set(n) {\n      this[0] = n;\n    }\n  }, {\n    key: \"g\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(n) {\n      this[1] = n;\n    }\n  }, {\n    key: \"b\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(n) {\n      this[2] = n;\n    }\n  }, {\n    key: \"h\",\n    get: function get() {\n      return this._mode == \"lch\" ? this[2] : this[0];\n    },\n    set: function set(n) {\n      var i = this._mode == \"lch\" ? 2 : 0;\n      this[i] = n;\n    }\n  }, {\n    key: \"s\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(n) {\n      this[1] = n;\n    }\n  }, {\n    key: \"l\",\n    get: function get() {\n      return this._mode == \"hsl\" ? this[2] : this[0];\n    },\n    set: function set(n) {\n      var i = this._mode == \"hsl\" ? 2 : 0;\n      this[i] = n;\n    }\n  }, {\n    key: \"a\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(n) {\n      this[1] = n;\n    }\n  }, {\n    key: \"c\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(n) {\n      this[1] = n;\n    }\n  }, {\n    key: \"u\",\n    get: function get() {\n      return this[1];\n    },\n    set: function set(n) {\n      this[1] = n;\n    }\n  }, {\n    key: \"v\",\n    get: function get() {\n      return this[2];\n    },\n    set: function set(n) {\n      this[2] = n;\n    }\n  }, {\n    key: \"alpha\",\n    set: function set(n) {\n      if (this.length > 3) this[3] = n;\n    },\n    get: function get() {\n      return this.length > 3 ? this[3] : 1;\n    }\n  }, {\n    key: \"normalized\",\n    get: function get() {\n      return this._isNorm;\n    },\n    set: function set(b) {\n      this._isNorm = b;\n    }\n  }], [{\n    key: \"from\",\n    value: function from() {\n      var p = [1, 1, 1, 1];\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      var c = Util.getArgs(args);\n\n      for (var i = 0, len = p.length; i < len; i++) {\n        if (i < c.length) p[i] = c[i];\n      }\n\n      return new Color(p);\n    }\n  }, {\n    key: \"fromHex\",\n    value: function fromHex(hex) {\n      if (hex[0] == \"#\") hex = hex.substr(1);\n\n      if (hex.length <= 3) {\n        var fn = function fn(i) {\n          return hex[i] || \"F\";\n        };\n\n        hex = \"\".concat(fn(0)).concat(fn(0)).concat(fn(1)).concat(fn(1)).concat(fn(2)).concat(fn(2));\n      }\n\n      var alpha = 1;\n\n      if (hex.length === 8) {\n        alpha = hex.substr(6) && 0xFF / 255;\n        hex = hex.substring(0, 6);\n      }\n\n      var hexVal = parseInt(hex, 16);\n      return new Color(hexVal >> 16, hexVal >> 8 & 0xFF, hexVal & 0xFF, alpha);\n    }\n  }, {\n    key: \"rgb\",\n    value: function rgb() {\n      return Color.from.apply(Color, arguments).toMode(\"rgb\");\n    }\n  }, {\n    key: \"hsl\",\n    value: function hsl() {\n      return Color.from.apply(Color, arguments).toMode(\"hsl\");\n    }\n  }, {\n    key: \"hsb\",\n    value: function hsb() {\n      return Color.from.apply(Color, arguments).toMode(\"hsb\");\n    }\n  }, {\n    key: \"lab\",\n    value: function lab() {\n      return Color.from.apply(Color, arguments).toMode(\"lab\");\n    }\n  }, {\n    key: \"lch\",\n    value: function lch() {\n      return Color.from.apply(Color, arguments).toMode(\"lch\");\n    }\n  }, {\n    key: \"luv\",\n    value: function luv() {\n      return Color.from.apply(Color, arguments).toMode(\"luv\");\n    }\n  }, {\n    key: \"xyz\",\n    value: function xyz() {\n      return Color.from.apply(Color, arguments).toMode(\"xyz\");\n    }\n  }, {\n    key: \"maxValues\",\n    value: function maxValues(mode) {\n      return Color.ranges[mode].zipSlice(1).$take([0, 1, 2]);\n    }\n  }, {\n    key: \"RGBtoHSL\",\n    value: function RGBtoHSL(rgb) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var _ref = !normalizedInput ? rgb.$normalize() : rgb,\n          _ref2 = _slicedToArray(_ref, 3),\n          r = _ref2[0],\n          g = _ref2[1],\n          b = _ref2[2];\n\n      var max = Math.max(r, g, b);\n      var min = Math.min(r, g, b);\n      var h = (max + min) / 2;\n      var s = h;\n      var l = h;\n\n      if (max == min) {\n        h = 0;\n        s = 0;\n      } else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        h = 0;\n\n        if (max === r) {\n          h = (g - b) / d + (g < b ? 6 : 0);\n        } else if (max === g) {\n          h = (b - r) / d + 2;\n        } else if (max === b) {\n          h = (r - g) / d + 4;\n        }\n      }\n\n      return Color.hsl(normalizedOutput ? h / 60 : h * 60, s, l, rgb.alpha);\n    }\n  }, {\n    key: \"HSLtoRGB\",\n    value: function HSLtoRGB(hsl) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var _hsl = _slicedToArray(hsl, 3),\n          h = _hsl[0],\n          s = _hsl[1],\n          l = _hsl[2];\n\n      if (!normalizedInput) h = h / 360;\n      if (s == 0) return Color.rgb(l * 255, l * 255, l * 255, hsl.alpha);\n      var q = l <= 0.5 ? l * (1 + s) : l + s - l * s;\n      var p = 2 * l - q;\n\n      var convert = function convert(t) {\n        t = t < 0 ? t + 1 : t > 1 ? t - 1 : t;\n\n        if (t * 6 < 1) {\n          return p + (q - p) * t * 6;\n        } else if (t * 2 < 1) {\n          return q;\n        } else if (t * 3 < 2) {\n          return p + (q - p) * (2 / 3 - t) * 6;\n        } else {\n          return p;\n        }\n      };\n\n      var sc = normalizedOutput ? 1 : 255;\n      return Color.rgb(sc * convert(h + 1 / 3), sc * convert(h), sc * convert(h - 1 / 3), hsl.alpha);\n    }\n  }, {\n    key: \"RGBtoHSB\",\n    value: function RGBtoHSB(rgb) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var _ref3 = !normalizedInput ? rgb.$normalize() : rgb,\n          _ref4 = _slicedToArray(_ref3, 3),\n          r = _ref4[0],\n          g = _ref4[1],\n          b = _ref4[2];\n\n      var max = Math.max(r, g, b);\n      var min = Math.min(r, g, b);\n      var d = max - min;\n      var h = 0;\n      var s = max === 0 ? 0 : d / max;\n      var v = max;\n\n      if (max != min) {\n        if (max === r) {\n          h = (g - b) / d + (g < b ? 6 : 0);\n        } else if (max === g) {\n          h = (b - r) / d + 2;\n        } else if (max === b) {\n          h = (r - g) / d + 4;\n        }\n      }\n\n      return Color.hsb(normalizedOutput ? h / 60 : h * 60, s, v, rgb.alpha);\n    }\n  }, {\n    key: \"HSBtoRGB\",\n    value: function HSBtoRGB(hsb) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var _hsb = _slicedToArray(hsb, 3),\n          h = _hsb[0],\n          s = _hsb[1],\n          v = _hsb[2];\n\n      if (!normalizedInput) h = h / 360;\n      var i = Math.floor(h * 6);\n      var f = h * 6 - i;\n      var p = v * (1 - s);\n      var q = v * (1 - f * s);\n      var t = v * (1 - (1 - f) * s);\n      var pick = [[v, t, p], [q, v, p], [p, v, t], [p, q, v], [t, p, v], [v, p, q]];\n      var c = pick[i % 6];\n      var sc = normalizedOutput ? 1 : 255;\n      return Color.rgb(sc * c[0], sc * c[1], sc * c[2], hsb.alpha);\n    }\n  }, {\n    key: \"RGBtoLAB\",\n    value: function RGBtoLAB(rgb) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var c = normalizedInput ? rgb.$normalize(false) : rgb;\n      return Color.XYZtoLAB(Color.RGBtoXYZ(c), false, normalizedOutput);\n    }\n  }, {\n    key: \"LABtoRGB\",\n    value: function LABtoRGB(lab) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var c = normalizedInput ? lab.$normalize(false) : lab;\n      return Color.XYZtoRGB(Color.LABtoXYZ(c), false, normalizedOutput);\n    }\n  }, {\n    key: \"RGBtoLCH\",\n    value: function RGBtoLCH(rgb) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var c = normalizedInput ? rgb.$normalize(false) : rgb;\n      return Color.LABtoLCH(Color.RGBtoLAB(c), false, normalizedOutput);\n    }\n  }, {\n    key: \"LCHtoRGB\",\n    value: function LCHtoRGB(lch) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var c = normalizedInput ? lch.$normalize(false) : lch;\n      return Color.LABtoRGB(Color.LCHtoLAB(c), false, normalizedOutput);\n    }\n  }, {\n    key: \"RGBtoLUV\",\n    value: function RGBtoLUV(rgb) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var c = normalizedInput ? rgb.$normalize(false) : rgb;\n      return Color.XYZtoLUV(Color.RGBtoXYZ(c), false, normalizedOutput);\n    }\n  }, {\n    key: \"LUVtoRGB\",\n    value: function LUVtoRGB(luv) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var c = normalizedInput ? luv.$normalize(false) : luv;\n      return Color.XYZtoRGB(Color.LUVtoXYZ(c), false, normalizedOutput);\n    }\n  }, {\n    key: \"RGBtoXYZ\",\n    value: function RGBtoXYZ(rgb) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var c = !normalizedInput ? rgb.$normalize() : rgb.clone();\n\n      for (var i = 0; i < 3; i++) {\n        c[i] = c[i] > 0.04045 ? Math.pow((c[i] + 0.055) / 1.055, 2.4) : c[i] / 12.92;\n        if (!normalizedOutput) c[i] = c[i] * 100;\n      }\n\n      var cc = Color.xyz(c[0] * 0.4124564 + c[1] * 0.3575761 + c[2] * 0.1804375, c[0] * 0.2126729 + c[1] * 0.7151522 + c[2] * 0.0721750, c[0] * 0.0193339 + c[1] * 0.1191920 + c[2] * 0.9503041, rgb.alpha);\n      return normalizedOutput ? cc.normalize() : cc;\n    }\n  }, {\n    key: \"XYZtoRGB\",\n    value: function XYZtoRGB(xyz) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var _ref5 = !normalizedInput ? xyz.$normalize() : xyz,\n          _ref6 = _slicedToArray(_ref5, 3),\n          x = _ref6[0],\n          y = _ref6[1],\n          z = _ref6[2];\n\n      var rgb = [x * 3.2404542 + y * -1.5371385 + z * -0.4985314, x * -0.9692660 + y * 1.8760108 + z * 0.0415560, x * 0.0556434 + y * -0.2040259 + z * 1.0572252];\n\n      for (var i = 0; i < 3; i++) {\n        rgb[i] = rgb[i] < 0 ? 0 : rgb[i] > 0.0031308 ? 1.055 * Math.pow(rgb[i], 1 / 2.4) - 0.055 : 12.92 * rgb[i];\n        rgb[i] = Math.max(0, Math.min(1, rgb[i]));\n        if (!normalizedOutput) rgb[i] = Math.round(rgb[i] * 255);\n      }\n\n      var cc = Color.rgb(rgb[0], rgb[1], rgb[2], xyz.alpha);\n      return normalizedOutput ? cc.normalize() : cc;\n    }\n  }, {\n    key: \"XYZtoLAB\",\n    value: function XYZtoLAB(xyz) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var c = normalizedInput ? xyz.$normalize(false) : xyz.clone();\n      c.divide(Color.D65);\n\n      var fn = function fn(n) {\n        return n > 0.008856 ? Math.pow(n, 1 / 3) : 7.787 * n + 16 / 116;\n      };\n\n      var cy = fn(c[1]);\n      var cc = Color.lab(116 * cy - 16, 500 * (fn(c[0]) - cy), 200 * (cy - fn(c[2])), xyz.alpha);\n      return normalizedOutput ? cc.normalize() : cc;\n    }\n  }, {\n    key: \"LABtoXYZ\",\n    value: function LABtoXYZ(lab) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var c = normalizedInput ? lab.$normalize(false) : lab;\n      var y = (c[0] + 16) / 116;\n      var x = c[1] / 500 + y;\n      var z = y - c[2] / 200;\n\n      var fn = function fn(n) {\n        var nnn = n * n * n;\n        return nnn > 0.008856 ? nnn : (n - 16 / 116) / 7.787;\n      };\n\n      var d = Color.D65;\n      var cc = Color.xyz(Math.max(0, d[0] * fn(x)), Math.max(0, d[1] * fn(y)), Math.max(0, d[2] * fn(z)), lab.alpha);\n      return normalizedOutput ? cc.normalize() : cc;\n    }\n  }, {\n    key: \"XYZtoLUV\",\n    value: function XYZtoLUV(xyz) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var _ref7 = normalizedInput ? xyz.$normalize(false) : xyz,\n          _ref8 = _slicedToArray(_ref7, 3),\n          x = _ref8[0],\n          y = _ref8[1],\n          z = _ref8[2];\n\n      var u = 4 * x / (x + 15 * y + 3 * z);\n      var v = 9 * y / (x + 15 * y + 3 * z);\n      y = y / 100;\n      y = y > 0.008856 ? Math.pow(y, 1 / 3) : 7.787 * y + 16 / 116;\n      var refU = 4 * Color.D65[0] / (Color.D65[0] + 15 * Color.D65[1] + 3 * Color.D65[2]);\n      var refV = 9 * Color.D65[1] / (Color.D65[0] + 15 * Color.D65[1] + 3 * Color.D65[2]);\n      var L = 116 * y - 16;\n      return Color.luv(L, 13 * L * (u - refU), 13 * L * (v - refV), xyz.alpha);\n    }\n  }, {\n    key: \"LUVtoXYZ\",\n    value: function LUVtoXYZ(luv) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var _ref9 = normalizedInput ? luv.$normalize(false) : luv,\n          _ref10 = _slicedToArray(_ref9, 3),\n          l = _ref10[0],\n          u = _ref10[1],\n          v = _ref10[2];\n\n      var y = (l + 16) / 116;\n      var cubeY = y * y * y;\n      y = cubeY > 0.008856 ? cubeY : (y - 16 / 116) / 7.787;\n      var refU = 4 * Color.D65[0] / (Color.D65[0] + 15 * Color.D65[1] + 3 * Color.D65[2]);\n      var refV = 9 * Color.D65[1] / (Color.D65[0] + 15 * Color.D65[1] + 3 * Color.D65[2]);\n      u = u / (13 * l) + refU;\n      v = v / (13 * l) + refV;\n      y = y * 100;\n      var x = -1 * (9 * y * u) / ((u - 4) * v - u * v);\n      var z = (9 * y - 15 * v * y - v * x) / (3 * v);\n      return Color.xyz(x, y, z, luv.alpha);\n    }\n  }, {\n    key: \"LABtoLCH\",\n    value: function LABtoLCH(lab) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var c = normalizedInput ? lab.$normalize(false) : lab;\n      var h = Geom.toDegree(Geom.boundRadian(Math.atan2(c[2], c[1])));\n      return Color.lch(c[0], Math.sqrt(c[1] * c[1] + c[2] * c[2]), h, lab.alpha);\n    }\n  }, {\n    key: \"LCHtoLAB\",\n    value: function LCHtoLAB(lch) {\n      var normalizedInput = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var normalizedOutput = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var c = normalizedInput ? lch.$normalize(false) : lch;\n      var rad = Geom.toRadian(c[2]);\n      return Color.lab(c[0], Math.cos(rad) * c[1], Math.sin(rad) * c[1], lch.alpha);\n    }\n  }]);\n\n  return Color;\n}(Pt);\nColor.D65 = new Pt(95.047, 100, 108.883, 1);\nColor.ranges = {\n  rgb: new Group(new Pt(0, 255), new Pt(0, 255), new Pt(0, 255)),\n  hsl: new Group(new Pt(0, 360), new Pt(0, 1), new Pt(0, 1)),\n  hsb: new Group(new Pt(0, 360), new Pt(0, 1), new Pt(0, 1)),\n  lab: new Group(new Pt(0, 100), new Pt(-128, 127), new Pt(-128, 127)),\n  lch: new Group(new Pt(0, 100), new Pt(0, 100), new Pt(0, 360)),\n  luv: new Group(new Pt(0, 100), new Pt(-134, 220), new Pt(-140, 122)),\n  xyz: new Group(new Pt(0, 100), new Pt(0, 100), new Pt(0, 100))\n};","import _get from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/get\";\nimport _classCallCheck from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*! Source code licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\nimport { MultiTouchSpace } from './Space';\nimport { VisualForm, Font } from \"./Form\";\nimport { Util } from './Util';\nimport { Pt, Bound } from './Pt';\nexport var DOMSpace = /*#__PURE__*/function (_MultiTouchSpace) {\n  _inherits(DOMSpace, _MultiTouchSpace);\n\n  var _super = _createSuper(DOMSpace);\n\n  function DOMSpace(elem, callback) {\n    var _this;\n\n    _classCallCheck(this, DOMSpace);\n\n    _this = _super.call(this);\n    _this.id = \"domspace\";\n    _this._autoResize = true;\n    _this._bgcolor = \"#e1e9f0\";\n    _this._css = {};\n    var _selector = null;\n    var _existed = false;\n    _this.id = \"pts\";\n\n    if (elem instanceof Element) {\n      _selector = elem;\n      _this.id = \"pts_existing_space\";\n    } else {\n      _selector = document.querySelector(elem);\n      _existed = true;\n      _this.id = elem.substr(1);\n    }\n\n    if (!_selector) {\n      _this._container = DOMSpace.createElement(\"div\", \"pts_container\");\n      _this._canvas = DOMSpace.createElement(\"div\", \"pts_element\");\n\n      _this._container.appendChild(_this._canvas);\n\n      document.body.appendChild(_this._container);\n      _existed = false;\n    } else {\n      _this._canvas = _selector;\n      _this._container = _selector.parentElement;\n    }\n\n    setTimeout(_this._ready.bind(_assertThisInitialized(_this), callback), 50);\n    return _this;\n  }\n\n  _createClass(DOMSpace, [{\n    key: \"_ready\",\n    value: function _ready(callback) {\n      if (!this._container) throw new Error(\"Cannot initiate #\".concat(this.id, \" element\"));\n      this._isReady = true;\n\n      this._resizeHandler(null);\n\n      this.clear(this._bgcolor);\n\n      this._canvas.dispatchEvent(new Event(\"ready\"));\n\n      for (var k in this.players) {\n        if (this.players.hasOwnProperty(k)) {\n          if (this.players[k].start) this.players[k].start(this.bound.clone(), this);\n        }\n      }\n\n      this._pointer = this.center;\n      this.refresh(false);\n      if (callback) callback(this.bound, this._canvas);\n    }\n  }, {\n    key: \"setup\",\n    value: function setup(opt) {\n      if (opt.bgcolor) {\n        this._bgcolor = opt.bgcolor;\n      }\n\n      this.autoResize = opt.resize != undefined ? opt.resize : false;\n      return this;\n    }\n  }, {\n    key: \"getForm\",\n    value: function getForm() {\n      return null;\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(b, evt) {\n      this.bound = b;\n      this.styles({\n        width: \"\".concat(b.width, \"px\"),\n        height: \"\".concat(b.height, \"px\")\n      }, true);\n\n      for (var k in this.players) {\n        if (this.players.hasOwnProperty(k)) {\n          var p = this.players[k];\n          if (p.resize) p.resize(this.bound, evt);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_resizeHandler\",\n    value: function _resizeHandler(evt) {\n      var b = Bound.fromBoundingRect(this._container.getBoundingClientRect());\n\n      if (this._autoResize) {\n        this.styles({\n          width: \"100%\",\n          height: \"100%\"\n        }, true);\n      } else {\n        this.styles({\n          width: \"\".concat(b.width, \"px\"),\n          height: \"\".concat(b.height, \"px\")\n        }, true);\n      }\n\n      this.resize(b, evt);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear(bg) {\n      if (bg) this.background = bg;\n      this._canvas.innerHTML = \"\";\n      return this;\n    }\n  }, {\n    key: \"style\",\n    value: function style(key, val) {\n      var update = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      this._css[key] = val;\n      if (update) this._canvas.style[key] = val;\n      return this;\n    }\n  }, {\n    key: \"styles\",\n    value: function styles(_styles) {\n      var update = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      for (var k in _styles) {\n        if (_styles.hasOwnProperty(k)) this.style(k, _styles[k], update);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      window.removeEventListener('resize', this._resizeHandler.bind(this));\n      this.stop();\n      this.removeAll();\n      return this;\n    }\n  }, {\n    key: \"autoResize\",\n    set: function set(auto) {\n      this._autoResize = auto;\n\n      if (auto) {\n        window.addEventListener('resize', this._resizeHandler.bind(this));\n      } else {\n        delete this._css['width'];\n        delete this._css['height'];\n        window.removeEventListener('resize', this._resizeHandler.bind(this));\n      }\n    },\n    get: function get() {\n      return this._autoResize;\n    }\n  }, {\n    key: \"element\",\n    get: function get() {\n      return this._canvas;\n    }\n  }, {\n    key: \"parent\",\n    get: function get() {\n      return this._container;\n    }\n  }, {\n    key: \"ready\",\n    get: function get() {\n      return this._isReady;\n    }\n  }, {\n    key: \"background\",\n    set: function set(bg) {\n      this._bgcolor = bg;\n      this._container.style.backgroundColor = this._bgcolor;\n    },\n    get: function get() {\n      return this._bgcolor;\n    }\n  }], [{\n    key: \"createElement\",\n    value: function createElement() {\n      var elem = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"div\";\n      var id = arguments.length > 1 ? arguments[1] : undefined;\n      var appendTo = arguments.length > 2 ? arguments[2] : undefined;\n      var d = document.createElement(elem);\n      if (id) d.setAttribute(\"id\", id);\n      if (appendTo && appendTo.appendChild) appendTo.appendChild(d);\n      return d;\n    }\n  }, {\n    key: \"setAttr\",\n    value: function setAttr(elem, data) {\n      for (var k in data) {\n        if (data.hasOwnProperty(k)) {\n          elem.setAttribute(k, data[k]);\n        }\n      }\n\n      return elem;\n    }\n  }, {\n    key: \"getInlineStyles\",\n    value: function getInlineStyles(data) {\n      var str = \"\";\n\n      for (var k in data) {\n        if (data.hasOwnProperty(k)) {\n          if (data[k]) str += \"\".concat(k, \": \").concat(data[k], \"; \");\n        }\n      }\n\n      return str;\n    }\n  }]);\n\n  return DOMSpace;\n}(MultiTouchSpace);\nexport var HTMLSpace = /*#__PURE__*/function (_DOMSpace) {\n  _inherits(HTMLSpace, _DOMSpace);\n\n  var _super2 = _createSuper(HTMLSpace);\n\n  function HTMLSpace() {\n    _classCallCheck(this, HTMLSpace);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(HTMLSpace, [{\n    key: \"getForm\",\n    value: function getForm() {\n      return new HTMLForm(this);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(player) {\n      var temp = this._container.querySelectorAll(\".\" + HTMLForm.scopeID(player));\n\n      temp.forEach(function (el) {\n        el.parentNode.removeChild(el);\n      });\n      return _get(_getPrototypeOf(HTMLSpace.prototype), \"remove\", this).call(this, player);\n    }\n  }, {\n    key: \"removeAll\",\n    value: function removeAll() {\n      this._container.innerHTML = \"\";\n      return _get(_getPrototypeOf(HTMLSpace.prototype), \"removeAll\", this).call(this);\n    }\n  }], [{\n    key: \"htmlElement\",\n    value: function htmlElement(parent, name, id) {\n      var autoClass = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      if (!parent || !parent.appendChild) throw new Error(\"parent is not a valid DOM element\");\n      var elem = document.querySelector(\"#\".concat(id));\n\n      if (!elem) {\n        elem = document.createElement(name);\n        elem.setAttribute(\"id\", id);\n        if (autoClass) elem.setAttribute(\"class\", id.substring(0, id.indexOf(\"-\")));\n        parent.appendChild(elem);\n      }\n\n      return elem;\n    }\n  }]);\n\n  return HTMLSpace;\n}(DOMSpace);\nexport var HTMLForm = /*#__PURE__*/function (_VisualForm) {\n  _inherits(HTMLForm, _VisualForm);\n\n  var _super3 = _createSuper(HTMLForm);\n\n  function HTMLForm(space) {\n    var _this2;\n\n    _classCallCheck(this, HTMLForm);\n\n    _this2 = _super3.call(this);\n    _this2._style = {\n      \"filled\": true,\n      \"stroked\": true,\n      \"background\": \"#f03\",\n      \"border-color\": \"#fff\",\n      \"color\": \"#000\",\n      \"border-width\": \"1px\",\n      \"border-radius\": \"0\",\n      \"border-style\": \"solid\",\n      \"opacity\": 1,\n      \"position\": \"absolute\",\n      \"top\": 0,\n      \"left\": 0,\n      \"width\": 0,\n      \"height\": 0\n    };\n    _this2._ctx = {\n      group: null,\n      groupID: \"pts\",\n      groupCount: 0,\n      currentID: \"pts0\",\n      currentClass: \"\",\n      style: {}\n    };\n    _this2._ready = false;\n    _this2._space = space;\n\n    _this2._space.add({\n      start: function start() {\n        _this2._ctx.group = _this2._space.element;\n        _this2._ctx.groupID = \"pts_dom_\" + HTMLForm.groupID++;\n        _this2._ctx.style = Object.assign({}, _this2._style);\n        _this2._ready = true;\n      }\n    });\n\n    return _this2;\n  }\n\n  _createClass(HTMLForm, [{\n    key: \"styleTo\",\n    value: function styleTo(k, v) {\n      var unit = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n      if (this._ctx.style[k] === undefined) throw new Error(\"\".concat(k, \" style property doesn't exist\"));\n      this._ctx.style[k] = \"\".concat(v).concat(unit);\n    }\n  }, {\n    key: \"alpha\",\n    value: function alpha(a) {\n      this.styleTo(\"opacity\", a);\n      return this;\n    }\n  }, {\n    key: \"fill\",\n    value: function fill(c) {\n      if (typeof c == \"boolean\") {\n        this.styleTo(\"filled\", c);\n        if (!c) this.styleTo(\"background\", \"transparent\");\n      } else {\n        this.styleTo(\"filled\", true);\n        this.styleTo(\"background\", c);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"stroke\",\n    value: function stroke(c, width, linejoin, linecap) {\n      if (typeof c == \"boolean\") {\n        this.styleTo(\"stroked\", c);\n        if (!c) this.styleTo(\"border-width\", 0);\n      } else {\n        this.styleTo(\"stroked\", true);\n        this.styleTo(\"border-color\", c);\n        this.styleTo(\"border-width\", (width || 1) + \"px\");\n      }\n\n      return this;\n    }\n  }, {\n    key: \"fillText\",\n    value: function fillText(c) {\n      this.styleTo(\"color\", c);\n      return this;\n    }\n  }, {\n    key: \"cls\",\n    value: function cls(c) {\n      if (typeof c == \"boolean\") {\n        this._ctx.currentClass = \"\";\n      } else {\n        this._ctx.currentClass = c;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"font\",\n    value: function font(sizeOrFont, weight, style, lineHeight, family) {\n      if (typeof sizeOrFont == \"number\") {\n        this._font.size = sizeOrFont;\n        if (family) this._font.face = family;\n        if (weight) this._font.weight = weight;\n        if (style) this._font.style = style;\n        if (lineHeight) this._font.lineHeight = lineHeight;\n      } else {\n        this._font = sizeOrFont;\n      }\n\n      this._ctx.style['font'] = this._font.value;\n      return this;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this._ctx.style = Object.assign({}, this._style);\n      this._font = new Font(10, \"sans-serif\");\n      this._ctx.style['font'] = this._font.value;\n      return this;\n    }\n  }, {\n    key: \"updateScope\",\n    value: function updateScope(group_id, group) {\n      this._ctx.group = group;\n      this._ctx.groupID = group_id;\n      this._ctx.groupCount = 0;\n      this.nextID();\n      return this._ctx;\n    }\n  }, {\n    key: \"scope\",\n    value: function scope(item) {\n      if (!item || item.animateID == null) throw new Error(\"item not defined or not yet added to Space\");\n      return this.updateScope(HTMLForm.scopeID(item), this.space.element);\n    }\n  }, {\n    key: \"nextID\",\n    value: function nextID() {\n      this._ctx.groupCount++;\n      this._ctx.currentID = \"\".concat(this._ctx.groupID, \"-\").concat(this._ctx.groupCount);\n      return this._ctx.currentID;\n    }\n  }, {\n    key: \"point\",\n    value: function point(pt) {\n      var radius = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n      var shape = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"square\";\n      this.nextID();\n      if (shape == \"circle\") this.styleTo(\"border-radius\", \"100%\");\n      HTMLForm.point(this._ctx, pt, radius, shape);\n      return this;\n    }\n  }, {\n    key: \"circle\",\n    value: function circle(pts) {\n      this.nextID();\n      this.styleTo(\"border-radius\", \"100%\");\n      HTMLForm.circle(this._ctx, pts[0], pts[1][0]);\n      return this;\n    }\n  }, {\n    key: \"square\",\n    value: function square(pt, halfsize) {\n      this.nextID();\n      HTMLForm.square(this._ctx, pt, halfsize);\n      return this;\n    }\n  }, {\n    key: \"rect\",\n    value: function rect(pts) {\n      this.nextID();\n      this.styleTo(\"border-radius\", \"0\");\n      HTMLForm.rect(this._ctx, pts);\n      return this;\n    }\n  }, {\n    key: \"text\",\n    value: function text(pt, txt) {\n      this.nextID();\n      HTMLForm.text(this._ctx, pt, txt);\n      return this;\n    }\n  }, {\n    key: \"log\",\n    value: function log(txt) {\n      this.fill(\"#000\").stroke(\"#fff\", 0.5).text([10, 14], txt);\n      return this;\n    }\n  }, {\n    key: \"arc\",\n    value: function arc(pt, radius, startAngle, endAngle, cc) {\n      Util.warn(\"arc is not implemented in HTMLForm\");\n      return this;\n    }\n  }, {\n    key: \"line\",\n    value: function line(pts) {\n      Util.warn(\"line is not implemented in HTMLForm\");\n      return this;\n    }\n  }, {\n    key: \"polygon\",\n    value: function polygon(pts) {\n      Util.warn(\"polygon is not implemented in HTMLForm\");\n      return this;\n    }\n  }, {\n    key: \"space\",\n    get: function get() {\n      return this._space;\n    }\n  }], [{\n    key: \"getID\",\n    value: function getID(ctx) {\n      return ctx.currentID || \"p-\".concat(HTMLForm.domID++);\n    }\n  }, {\n    key: \"scopeID\",\n    value: function scopeID(item) {\n      return \"item-\".concat(item.animateID);\n    }\n  }, {\n    key: \"style\",\n    value: function style(elem, styles) {\n      var st = [];\n      if (!styles[\"filled\"]) st.push(\"background: none\");\n      if (!styles[\"stroked\"]) st.push(\"border: none\");\n\n      for (var k in styles) {\n        if (styles.hasOwnProperty(k) && k != \"filled\" && k != \"stroked\") {\n          var v = styles[k];\n\n          if (v) {\n            if (!styles[\"filled\"] && k.indexOf('background') === 0) {\n              continue;\n            } else if (!styles[\"stroked\"] && k.indexOf('border-width') === 0) {\n              continue;\n            } else {\n              st.push(\"\".concat(k, \": \").concat(v));\n            }\n          }\n        }\n      }\n\n      return HTMLSpace.setAttr(elem, {\n        style: st.join(\";\")\n      });\n    }\n  }, {\n    key: \"rectStyle\",\n    value: function rectStyle(ctx, pt, size) {\n      ctx.style[\"left\"] = pt[0] + \"px\";\n      ctx.style[\"top\"] = pt[1] + \"px\";\n      ctx.style[\"width\"] = size[0] + \"px\";\n      ctx.style[\"height\"] = size[1] + \"px\";\n      return ctx;\n    }\n  }, {\n    key: \"textStyle\",\n    value: function textStyle(ctx, pt) {\n      ctx.style[\"left\"] = pt[0] + \"px\";\n      ctx.style[\"top\"] = pt[1] + \"px\";\n      return ctx;\n    }\n  }, {\n    key: \"point\",\n    value: function point(ctx, pt) {\n      var radius = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 5;\n      var shape = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"square\";\n\n      if (shape === \"circle\") {\n        return HTMLForm.circle(ctx, pt, radius);\n      } else {\n        return HTMLForm.square(ctx, pt, radius);\n      }\n    }\n  }, {\n    key: \"circle\",\n    value: function circle(ctx, pt) {\n      var radius = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n      var elem = HTMLSpace.htmlElement(ctx.group, \"div\", HTMLForm.getID(ctx));\n      HTMLSpace.setAttr(elem, {\n        class: \"pts-form pts-circle \".concat(ctx.currentClass)\n      });\n      HTMLForm.rectStyle(ctx, new Pt(pt).$subtract(radius), new Pt(radius * 2, radius * 2));\n      HTMLForm.style(elem, ctx.style);\n      return elem;\n    }\n  }, {\n    key: \"square\",\n    value: function square(ctx, pt, halfsize) {\n      var elem = HTMLSpace.htmlElement(ctx.group, \"div\", HTMLForm.getID(ctx));\n      HTMLSpace.setAttr(elem, {\n        class: \"pts-form pts-square \".concat(ctx.currentClass)\n      });\n      HTMLForm.rectStyle(ctx, new Pt(pt).$subtract(halfsize), new Pt(halfsize * 2, halfsize * 2));\n      HTMLForm.style(elem, ctx.style);\n      return elem;\n    }\n  }, {\n    key: \"rect\",\n    value: function rect(ctx, pts) {\n      if (!this._checkSize(pts)) return;\n      var elem = HTMLSpace.htmlElement(ctx.group, \"div\", HTMLForm.getID(ctx));\n      HTMLSpace.setAttr(elem, {\n        class: \"pts-form pts-rect \".concat(ctx.currentClass)\n      });\n      HTMLForm.rectStyle(ctx, pts[0], pts[1]);\n      HTMLForm.style(elem, ctx.style);\n      return elem;\n    }\n  }, {\n    key: \"text\",\n    value: function text(ctx, pt, txt) {\n      var elem = HTMLSpace.htmlElement(ctx.group, \"div\", HTMLForm.getID(ctx));\n      HTMLSpace.setAttr(elem, {\n        class: \"pts-form pts-text \".concat(ctx.currentClass)\n      });\n      elem.textContent = txt;\n      HTMLForm.textStyle(ctx, pt);\n      HTMLForm.style(elem, ctx.style);\n      return elem;\n    }\n  }]);\n\n  return HTMLForm;\n}(VisualForm);\nHTMLForm.groupID = 0;\nHTMLForm.domID = 0;","import \"core-js/modules/es.array.reduce\";\nimport _classCallCheck from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _get from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/get\";\nimport _inherits from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*! Source code licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\nimport { VisualForm, Font } from \"./Form\";\nimport { Geom } from './Num';\nimport { Const } from './Util';\nimport { Pt, Group } from './Pt';\nimport { Rectangle } from \"./Op\";\nimport { DOMSpace } from \"./Dom\";\nexport var SVGSpace = /*#__PURE__*/function (_DOMSpace) {\n  _inherits(SVGSpace, _DOMSpace);\n\n  var _super = _createSuper(SVGSpace);\n\n  function SVGSpace(elem, callback) {\n    var _this;\n\n    _classCallCheck(this, SVGSpace);\n\n    _this = _super.call(this, elem, callback);\n    _this._bgcolor = \"#999\";\n\n    if (_this._canvas.nodeName.toLowerCase() != \"svg\") {\n      var s = SVGSpace.svgElement(_this._canvas, \"svg\", \"\".concat(_this.id, \"_svg\"));\n      _this._container = _this._canvas;\n      _this._canvas = s;\n    }\n\n    return _this;\n  }\n\n  _createClass(SVGSpace, [{\n    key: \"getForm\",\n    value: function getForm() {\n      return new SVGForm(this);\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(b, evt) {\n      _get(_getPrototypeOf(SVGSpace.prototype), \"resize\", this).call(this, b, evt);\n\n      SVGSpace.setAttr(this.element, {\n        \"viewBox\": \"0 0 \".concat(this.bound.width, \" \").concat(this.bound.height),\n        \"width\": \"\".concat(this.bound.width),\n        \"height\": \"\".concat(this.bound.height),\n        \"xmlns\": \"http://www.w3.org/2000/svg\",\n        \"version\": \"1.1\"\n      });\n      return this;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(player) {\n      var temp = this._container.querySelectorAll(\".\" + SVGForm.scopeID(player));\n\n      temp.forEach(function (el) {\n        el.parentNode.removeChild(el);\n      });\n      return _get(_getPrototypeOf(SVGSpace.prototype), \"remove\", this).call(this, player);\n    }\n  }, {\n    key: \"removeAll\",\n    value: function removeAll() {\n      this._container.innerHTML = \"\";\n      return _get(_getPrototypeOf(SVGSpace.prototype), \"removeAll\", this).call(this);\n    }\n  }, {\n    key: \"element\",\n    get: function get() {\n      return this._canvas;\n    }\n  }], [{\n    key: \"svgElement\",\n    value: function svgElement(parent, name, id) {\n      if (!parent || !parent.appendChild) throw new Error(\"parent is not a valid DOM element\");\n      var elem = document.querySelector(\"#\".concat(id));\n\n      if (!elem) {\n        elem = document.createElementNS(\"http://www.w3.org/2000/svg\", name);\n        elem.setAttribute(\"id\", id);\n        parent.appendChild(elem);\n      }\n\n      return elem;\n    }\n  }]);\n\n  return SVGSpace;\n}(DOMSpace);\nexport var SVGForm = /*#__PURE__*/function (_VisualForm) {\n  _inherits(SVGForm, _VisualForm);\n\n  var _super2 = _createSuper(SVGForm);\n\n  function SVGForm(space) {\n    var _this2;\n\n    _classCallCheck(this, SVGForm);\n\n    _this2 = _super2.call(this);\n    _this2._style = {\n      \"filled\": true,\n      \"stroked\": true,\n      \"fill\": \"#f03\",\n      \"stroke\": \"#fff\",\n      \"stroke-width\": 1,\n      \"stroke-linejoin\": \"bevel\",\n      \"stroke-linecap\": \"sqaure\",\n      \"opacity\": 1\n    };\n    _this2._ctx = {\n      group: null,\n      groupID: \"pts\",\n      groupCount: 0,\n      currentID: \"pts0\",\n      currentClass: \"\",\n      style: {}\n    };\n    _this2._ready = false;\n    _this2._space = space;\n\n    _this2._space.add({\n      start: function start() {\n        _this2._ctx.group = _this2._space.element;\n        _this2._ctx.groupID = \"pts_svg_\" + SVGForm.groupID++;\n        _this2._ctx.style = Object.assign({}, _this2._style);\n        _this2._ready = true;\n      }\n    });\n\n    return _this2;\n  }\n\n  _createClass(SVGForm, [{\n    key: \"styleTo\",\n    value: function styleTo(k, v) {\n      if (this._ctx.style[k] === undefined) throw new Error(\"\".concat(k, \" style property doesn't exist\"));\n      this._ctx.style[k] = v;\n    }\n  }, {\n    key: \"alpha\",\n    value: function alpha(a) {\n      this.styleTo(\"opacity\", a);\n      return this;\n    }\n  }, {\n    key: \"fill\",\n    value: function fill(c) {\n      if (typeof c == \"boolean\") {\n        this.styleTo(\"filled\", c);\n      } else {\n        this.styleTo(\"filled\", true);\n        this.styleTo(\"fill\", c);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"stroke\",\n    value: function stroke(c, width, linejoin, linecap) {\n      if (typeof c == \"boolean\") {\n        this.styleTo(\"stroked\", c);\n      } else {\n        this.styleTo(\"stroked\", true);\n        this.styleTo(\"stroke\", c);\n        if (width) this.styleTo(\"stroke-width\", width);\n        if (linejoin) this.styleTo(\"stroke-linejoin\", linejoin);\n        if (linecap) this.styleTo(\"stroke-linecap\", linecap);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"cls\",\n    value: function cls(c) {\n      if (typeof c == \"boolean\") {\n        this._ctx.currentClass = \"\";\n      } else {\n        this._ctx.currentClass = c;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"font\",\n    value: function font(sizeOrFont, weight, style, lineHeight, family) {\n      if (typeof sizeOrFont == \"number\") {\n        this._font.size = sizeOrFont;\n        if (family) this._font.face = family;\n        if (weight) this._font.weight = weight;\n        if (style) this._font.style = style;\n        if (lineHeight) this._font.lineHeight = lineHeight;\n      } else {\n        this._font = sizeOrFont;\n      }\n\n      this._ctx.style['font'] = this._font.value;\n      return this;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this._ctx.style = Object.assign({}, this._style);\n      this._font = new Font(10, \"sans-serif\");\n      this._ctx.style['font'] = this._font.value;\n      return this;\n    }\n  }, {\n    key: \"updateScope\",\n    value: function updateScope(group_id, group) {\n      this._ctx.group = group;\n      this._ctx.groupID = group_id;\n      this._ctx.groupCount = 0;\n      this.nextID();\n      return this._ctx;\n    }\n  }, {\n    key: \"scope\",\n    value: function scope(item) {\n      if (!item || item.animateID == null) throw new Error(\"item not defined or not yet added to Space\");\n      return this.updateScope(SVGForm.scopeID(item), this.space.element);\n    }\n  }, {\n    key: \"nextID\",\n    value: function nextID() {\n      this._ctx.groupCount++;\n      this._ctx.currentID = \"\".concat(this._ctx.groupID, \"-\").concat(this._ctx.groupCount);\n      return this._ctx.currentID;\n    }\n  }, {\n    key: \"point\",\n    value: function point(pt) {\n      var radius = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n      var shape = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"square\";\n      this.nextID();\n      SVGForm.point(this._ctx, pt, radius, shape);\n      return this;\n    }\n  }, {\n    key: \"circle\",\n    value: function circle(pts) {\n      this.nextID();\n      SVGForm.circle(this._ctx, pts[0], pts[1][0]);\n      return this;\n    }\n  }, {\n    key: \"arc\",\n    value: function arc(pt, radius, startAngle, endAngle, cc) {\n      this.nextID();\n      SVGForm.arc(this._ctx, pt, radius, startAngle, endAngle, cc);\n      return this;\n    }\n  }, {\n    key: \"square\",\n    value: function square(pt, halfsize) {\n      this.nextID();\n      SVGForm.square(this._ctx, pt, halfsize);\n      return this;\n    }\n  }, {\n    key: \"line\",\n    value: function line(pts) {\n      this.nextID();\n      SVGForm.line(this._ctx, pts);\n      return this;\n    }\n  }, {\n    key: \"polygon\",\n    value: function polygon(pts) {\n      this.nextID();\n      SVGForm.polygon(this._ctx, pts);\n      return this;\n    }\n  }, {\n    key: \"rect\",\n    value: function rect(pts) {\n      this.nextID();\n      SVGForm.rect(this._ctx, pts);\n      return this;\n    }\n  }, {\n    key: \"text\",\n    value: function text(pt, txt) {\n      this.nextID();\n      SVGForm.text(this._ctx, pt, txt);\n      return this;\n    }\n  }, {\n    key: \"log\",\n    value: function log(txt) {\n      this.fill(\"#000\").stroke(\"#fff\", 0.5).text([10, 14], txt);\n      return this;\n    }\n  }, {\n    key: \"space\",\n    get: function get() {\n      return this._space;\n    }\n  }], [{\n    key: \"getID\",\n    value: function getID(ctx) {\n      return ctx.currentID || \"p-\".concat(SVGForm.domID++);\n    }\n  }, {\n    key: \"scopeID\",\n    value: function scopeID(item) {\n      return \"item-\".concat(item.animateID);\n    }\n  }, {\n    key: \"style\",\n    value: function style(elem, styles) {\n      var st = [];\n      if (!styles[\"filled\"]) st.push(\"fill: none\");\n      if (!styles[\"stroked\"]) st.push(\"stroke: none\");\n\n      for (var k in styles) {\n        if (styles.hasOwnProperty(k) && k != \"filled\" && k != \"stroked\") {\n          var v = styles[k];\n\n          if (v) {\n            if (!styles[\"filled\"] && k.indexOf('fill') === 0) {\n              continue;\n            } else if (!styles[\"stroked\"] && k.indexOf('stroke') === 0) {\n              continue;\n            } else {\n              st.push(\"\".concat(k, \": \").concat(v));\n            }\n          }\n        }\n      }\n\n      return DOMSpace.setAttr(elem, {\n        style: st.join(\";\")\n      });\n    }\n  }, {\n    key: \"point\",\n    value: function point(ctx, pt) {\n      var radius = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 5;\n      var shape = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"square\";\n\n      if (shape === \"circle\") {\n        return SVGForm.circle(ctx, pt, radius);\n      } else {\n        return SVGForm.square(ctx, pt, radius);\n      }\n    }\n  }, {\n    key: \"circle\",\n    value: function circle(ctx, pt) {\n      var radius = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n      var elem = SVGSpace.svgElement(ctx.group, \"circle\", SVGForm.getID(ctx));\n      DOMSpace.setAttr(elem, {\n        cx: pt[0],\n        cy: pt[1],\n        r: radius,\n        'class': \"pts-svgform pts-circle \".concat(ctx.currentClass)\n      });\n      SVGForm.style(elem, ctx.style);\n      return elem;\n    }\n  }, {\n    key: \"arc\",\n    value: function arc(ctx, pt, radius, startAngle, endAngle, cc) {\n      var elem = SVGSpace.svgElement(ctx.group, \"path\", SVGForm.getID(ctx));\n      var start = new Pt(pt).toAngle(startAngle, radius, true);\n      var end = new Pt(pt).toAngle(endAngle, radius, true);\n      var diff = Geom.boundAngle(endAngle) - Geom.boundAngle(startAngle);\n      var largeArc = diff > Const.pi ? true : false;\n      if (cc) largeArc = !largeArc;\n      var sweep = cc ? \"0\" : \"1\";\n      var d = \"M \".concat(start[0], \" \").concat(start[1], \" A \").concat(radius, \" \").concat(radius, \" 0 \").concat(largeArc ? \"1\" : \"0\", \" \").concat(sweep, \" \").concat(end[0], \" \").concat(end[1]);\n      DOMSpace.setAttr(elem, {\n        d: d,\n        'class': \"pts-svgform pts-arc \".concat(ctx.currentClass)\n      });\n      SVGForm.style(elem, ctx.style);\n      return elem;\n    }\n  }, {\n    key: \"square\",\n    value: function square(ctx, pt, halfsize) {\n      var elem = SVGSpace.svgElement(ctx.group, \"rect\", SVGForm.getID(ctx));\n      DOMSpace.setAttr(elem, {\n        x: pt[0] - halfsize,\n        y: pt[1] - halfsize,\n        width: halfsize * 2,\n        height: halfsize * 2,\n        'class': \"pts-svgform pts-square \".concat(ctx.currentClass)\n      });\n      SVGForm.style(elem, ctx.style);\n      return elem;\n    }\n  }, {\n    key: \"line\",\n    value: function line(ctx, pts) {\n      if (!this._checkSize(pts)) return;\n      if (pts.length > 2) return SVGForm._poly(ctx, pts, false);\n      var elem = SVGSpace.svgElement(ctx.group, \"line\", SVGForm.getID(ctx));\n      DOMSpace.setAttr(elem, {\n        x1: pts[0][0],\n        y1: pts[0][1],\n        x2: pts[1][0],\n        y2: pts[1][1],\n        'class': \"pts-svgform pts-line \".concat(ctx.currentClass)\n      });\n      SVGForm.style(elem, ctx.style);\n      return elem;\n    }\n  }, {\n    key: \"_poly\",\n    value: function _poly(ctx, pts) {\n      var closePath = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      if (!this._checkSize(pts)) return;\n      var elem = SVGSpace.svgElement(ctx.group, closePath ? \"polygon\" : \"polyline\", SVGForm.getID(ctx));\n      var points = pts.reduce(function (a, p) {\n        return a + \"\".concat(p[0], \",\").concat(p[1], \" \");\n      }, \"\");\n      DOMSpace.setAttr(elem, {\n        points: points,\n        'class': \"pts-svgform pts-polygon \".concat(ctx.currentClass)\n      });\n      SVGForm.style(elem, ctx.style);\n      return elem;\n    }\n  }, {\n    key: \"polygon\",\n    value: function polygon(ctx, pts) {\n      return SVGForm._poly(ctx, pts, true);\n    }\n  }, {\n    key: \"rect\",\n    value: function rect(ctx, pts) {\n      if (!this._checkSize(pts)) return;\n      var elem = SVGSpace.svgElement(ctx.group, \"rect\", SVGForm.getID(ctx));\n      var bound = Group.fromArray(pts).boundingBox();\n      var size = Rectangle.size(bound);\n      DOMSpace.setAttr(elem, {\n        x: bound[0][0],\n        y: bound[0][1],\n        width: size[0],\n        height: size[1],\n        'class': \"pts-svgform pts-rect \".concat(ctx.currentClass)\n      });\n      SVGForm.style(elem, ctx.style);\n      return elem;\n    }\n  }, {\n    key: \"text\",\n    value: function text(ctx, pt, txt) {\n      var elem = SVGSpace.svgElement(ctx.group, \"text\", SVGForm.getID(ctx));\n      DOMSpace.setAttr(elem, {\n        \"pointer-events\": \"none\",\n        x: pt[0],\n        y: pt[1],\n        dx: 0,\n        dy: 0,\n        'class': \"pts-svgform pts-text \".concat(ctx.currentClass)\n      });\n      elem.textContent = txt;\n      SVGForm.style(elem, ctx.style);\n      return elem;\n    }\n  }]);\n\n  return SVGForm;\n}(VisualForm);\nSVGForm.groupID = 0;\nSVGForm.domID = 0;","import _slicedToArray from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _construct from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/construct\";\nimport _inherits from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _classCallCheck from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Backup HD/code/trc-project/node_modules/@babel/runtime/helpers/esm/createClass\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/*! Source code licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\nimport { Pt, Group, Bound } from \"./Pt\";\nimport { Polygon, Circle } from \"./Op\";\nexport var World = /*#__PURE__*/function () {\n  function World(bound) {\n    var friction = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    var gravity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    _classCallCheck(this, World);\n\n    this._lastTime = null;\n    this._gravity = new Pt();\n    this._friction = 1;\n    this._damping = 0.75;\n    this._particles = [];\n    this._bodies = [];\n    this._pnames = [];\n    this._bnames = [];\n    this._bound = Bound.fromGroup(bound);\n    this._friction = friction;\n    this._gravity = typeof gravity === \"number\" ? new Pt(0, gravity) : new Pt(gravity);\n    return this;\n  }\n\n  _createClass(World, [{\n    key: \"body\",\n    value: function body(id) {\n      var idx = id;\n\n      if (typeof id === \"string\" && id.length > 0) {\n        idx = this._bnames.indexOf(id);\n      }\n\n      if (!(idx >= 0)) return undefined;\n      return this._bodies[idx];\n    }\n  }, {\n    key: \"particle\",\n    value: function particle(id) {\n      var idx = id;\n\n      if (typeof id === \"string\" && id.length > 0) {\n        idx = this._pnames.indexOf(id);\n      }\n\n      if (!(idx >= 0)) return undefined;\n      return this._particles[idx];\n    }\n  }, {\n    key: \"bodyIndex\",\n    value: function bodyIndex(name) {\n      return this._bnames.indexOf(name);\n    }\n  }, {\n    key: \"particleIndex\",\n    value: function particleIndex(name) {\n      return this._pnames.indexOf(name);\n    }\n  }, {\n    key: \"update\",\n    value: function update(ms) {\n      var dt = ms / 1000;\n\n      this._updateParticles(dt);\n\n      this._updateBodies(dt);\n    }\n  }, {\n    key: \"drawParticles\",\n    value: function drawParticles(fn) {\n      this._drawParticles = fn;\n    }\n  }, {\n    key: \"drawBodies\",\n    value: function drawBodies(fn) {\n      this._drawBodies = fn;\n    }\n  }, {\n    key: \"add\",\n    value: function add(p) {\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n      if (p instanceof Body) {\n        this._bodies.push(p);\n\n        this._bnames.push(name);\n      } else {\n        this._particles.push(p);\n\n        this._pnames.push(name);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"_index\",\n    value: function _index(fn, id) {\n      var index = 0;\n\n      if (typeof id === \"string\") {\n        index = fn(id);\n        if (index < 0) throw new Error(\"Cannot find index of \".concat(id, \". You can use particleIndex() or bodyIndex() function to check existence by name.\"));\n      } else {\n        index = id;\n      }\n\n      return index;\n    }\n  }, {\n    key: \"removeBody\",\n    value: function removeBody(from) {\n      var count = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      var index = this._index(this.bodyIndex.bind(this), from);\n\n      var param = index < 0 ? [index * -1 - 1, count] : [index, count];\n\n      this._bodies.splice(param[0], param[1]);\n\n      this._bnames.splice(param[0], param[1]);\n\n      return this;\n    }\n  }, {\n    key: \"removeParticle\",\n    value: function removeParticle(from) {\n      var count = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n      var index = this._index(this.particleIndex.bind(this), from);\n\n      var param = index < 0 ? [index * -1 - 1, count] : [index, count];\n\n      this._particles.splice(param[0], param[1]);\n\n      this._pnames.splice(param[0], param[1]);\n\n      return this;\n    }\n  }, {\n    key: \"integrate\",\n    value: function integrate(p, dt, prevDt) {\n      p.addForce(this._gravity);\n      p.verlet(dt, this._friction, prevDt);\n      return p;\n    }\n  }, {\n    key: \"_updateParticles\",\n    value: function _updateParticles(dt) {\n      for (var i = 0, len = this._particles.length; i < len; i++) {\n        var p = this._particles[i];\n        this.integrate(p, dt, this._lastTime);\n        World.boundConstraint(p, this._bound, this._damping);\n\n        for (var k = i + 1; k < len; k++) {\n          if (i !== k) {\n            var p2 = this._particles[k];\n            p.collide(p2, this._damping);\n          }\n        }\n\n        if (this._drawParticles) this._drawParticles(p, i);\n      }\n\n      this._lastTime = dt;\n    }\n  }, {\n    key: \"_updateBodies\",\n    value: function _updateBodies(dt) {\n      for (var i = 0, len = this._bodies.length; i < len; i++) {\n        var bds = this._bodies[i];\n\n        if (bds) {\n          for (var k = 0, klen = bds.length; k < klen; k++) {\n            var bk = bds[k];\n            World.boundConstraint(bk, this._bound, this._damping);\n            this.integrate(bk, dt, this._lastTime);\n          }\n\n          for (var _k = i + 1; _k < len; _k++) {\n            bds.processBody(this._bodies[_k]);\n          }\n\n          for (var m = 0, mlen = this._particles.length; m < mlen; m++) {\n            bds.processParticle(this._particles[m]);\n          }\n\n          bds.processEdges();\n          if (this._drawBodies) this._drawBodies(bds, i);\n        }\n      }\n    }\n  }, {\n    key: \"bound\",\n    get: function get() {\n      return this._bound;\n    },\n    set: function set(bound) {\n      this._bound = bound;\n    }\n  }, {\n    key: \"gravity\",\n    get: function get() {\n      return this._gravity;\n    },\n    set: function set(g) {\n      this._gravity = g;\n    }\n  }, {\n    key: \"friction\",\n    get: function get() {\n      return this._friction;\n    },\n    set: function set(f) {\n      this._friction = f;\n    }\n  }, {\n    key: \"damping\",\n    get: function get() {\n      return this._damping;\n    },\n    set: function set(f) {\n      this._damping = f;\n    }\n  }, {\n    key: \"bodyCount\",\n    get: function get() {\n      return this._bodies.length;\n    }\n  }, {\n    key: \"particleCount\",\n    get: function get() {\n      return this._particles.length;\n    }\n  }], [{\n    key: \"edgeConstraint\",\n    value: function edgeConstraint(p1, p2, dist) {\n      var stiff = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n      var precise = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n      var m1 = 1 / (p1.mass || 1);\n      var m2 = 1 / (p2.mass || 1);\n      var mm = m1 + m2;\n      var delta = p2.$subtract(p1);\n      var distSq = dist * dist;\n      var d = precise ? dist / delta.magnitude() - 1 : distSq / (delta.dot(delta) + distSq) - 0.5;\n      var f = delta.$multiply(d * stiff);\n      p1.subtract(f.$multiply(m1 / mm));\n      p2.add(f.$multiply(m2 / mm));\n      return p1;\n    }\n  }, {\n    key: \"boundConstraint\",\n    value: function boundConstraint(p, rect) {\n      var damping = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0.75;\n      var bound = rect.boundingBox();\n      var np = p.$min(bound[1].subtract(p.radius)).$max(bound[0].add(p.radius));\n\n      if (np[0] === bound[0][0] || np[0] === bound[1][0]) {\n        var c = p.changed.$multiply(damping);\n        p.previous = np.$subtract(new Pt(-c[0], c[1]));\n      } else if (np[1] === bound[0][1] || np[1] === bound[1][1]) {\n        var _c = p.changed.$multiply(damping);\n\n        p.previous = np.$subtract(new Pt(_c[0], -_c[1]));\n      }\n\n      p.to(np);\n    }\n  }]);\n\n  return World;\n}();\nexport var Particle = /*#__PURE__*/function (_Pt) {\n  _inherits(Particle, _Pt);\n\n  var _super = _createSuper(Particle);\n\n  function Particle() {\n    var _this;\n\n    _classCallCheck(this, Particle);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this._mass = 1;\n    _this._radius = 0;\n    _this._force = new Pt();\n    _this._prev = new Pt();\n    _this._lock = false;\n    _this._prev = _this.clone();\n    return _this;\n  }\n\n  _createClass(Particle, [{\n    key: \"size\",\n    value: function size(r) {\n      this._mass = r;\n      this._radius = r;\n      return this;\n    }\n  }, {\n    key: \"addForce\",\n    value: function addForce() {\n      var _this$_force;\n\n      (_this$_force = this._force).add.apply(_this$_force, arguments);\n\n      return this._force;\n    }\n  }, {\n    key: \"verlet\",\n    value: function verlet(dt, friction, lastDt) {\n      if (this._lock) {\n        this.to(this._lockPt);\n      } else {\n        var lt = lastDt ? lastDt : dt;\n\n        var a = this._force.multiply(dt * (dt + lt) / 2);\n\n        var v = this.changed.multiply(friction * dt / lt).add(a);\n        this._prev = this.clone();\n        this.add(v);\n        this._force = new Pt();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"hit\",\n    value: function hit() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      this._prev.subtract(_construct(Pt, args).$divide(Math.sqrt(this._mass)));\n\n      return this;\n    }\n  }, {\n    key: \"collide\",\n    value: function collide(p2) {\n      var damp = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var p1 = this;\n      var dp = p1.$subtract(p2);\n      var distSq = dp.magnitudeSq();\n      var dr = p1.radius + p2.radius;\n\n      if (distSq < dr * dr) {\n        var c1 = p1.changed;\n        var c2 = p2.changed;\n        var dist = Math.sqrt(distSq);\n        var d = dp.$multiply((dist - dr) / dist / 2);\n        var np1 = p1.$subtract(d);\n        var np2 = p2.$add(d);\n        p1.to(np1);\n        p2.to(np2);\n        var f1 = damp * dp.dot(c1) / distSq;\n        var f2 = damp * dp.dot(c2) / distSq;\n        var dm1 = p1.mass / (p1.mass + p2.mass);\n        var dm2 = p2.mass / (p1.mass + p2.mass);\n        c1.add(new Pt(f2 * dp[0] - f1 * dp[0], f2 * dp[1] - f1 * dp[1]).$multiply(dm2));\n        c2.add(new Pt(f1 * dp[0] - f2 * dp[0], f1 * dp[1] - f2 * dp[1]).$multiply(dm1));\n        p1.previous = p1.$subtract(c1);\n        p2.previous = p2.$subtract(c2);\n      }\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return \"Particle: \".concat(this[0], \" \").concat(this[1], \" | previous \").concat(this._prev[0], \" \").concat(this._prev[1], \" | mass \").concat(this._mass);\n    }\n  }, {\n    key: \"mass\",\n    get: function get() {\n      return this._mass;\n    },\n    set: function set(m) {\n      this._mass = m;\n    }\n  }, {\n    key: \"radius\",\n    get: function get() {\n      return this._radius;\n    },\n    set: function set(f) {\n      this._radius = f;\n    }\n  }, {\n    key: \"previous\",\n    get: function get() {\n      return this._prev;\n    },\n    set: function set(p) {\n      this._prev = p;\n    }\n  }, {\n    key: \"force\",\n    get: function get() {\n      return this._force;\n    },\n    set: function set(g) {\n      this._force = g;\n    }\n  }, {\n    key: \"body\",\n    get: function get() {\n      return this._body;\n    },\n    set: function set(b) {\n      this._body = b;\n    }\n  }, {\n    key: \"lock\",\n    get: function get() {\n      return this._lock;\n    },\n    set: function set(b) {\n      this._lock = b;\n      this._lockPt = new Pt(this);\n    }\n  }, {\n    key: \"changed\",\n    get: function get() {\n      return this.$subtract(this._prev);\n    }\n  }, {\n    key: \"position\",\n    set: function set(p) {\n      this.previous.to(this);\n      if (this._lock) this._lockPt = p;\n      this.to(p);\n    }\n  }]);\n\n  return Particle;\n}(Pt);\nexport var Body = /*#__PURE__*/function (_Group) {\n  _inherits(Body, _Group);\n\n  var _super2 = _createSuper(Body);\n\n  function Body() {\n    var _this2;\n\n    _classCallCheck(this, Body);\n\n    _this2 = _super2.call(this);\n    _this2._cs = [];\n    _this2._stiff = 1;\n    _this2._locks = {};\n    _this2._mass = 1;\n    return _this2;\n  }\n\n  _createClass(Body, [{\n    key: \"init\",\n    value: function init(list) {\n      var stiff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var c = new Pt();\n\n      for (var i = 0, len = list.length; i < len; i++) {\n        var p = new Particle(list[i]);\n        p.body = this;\n        c.add(list[i]);\n        this.push(p);\n      }\n\n      this._stiff = stiff;\n      return this;\n    }\n  }, {\n    key: \"autoMass\",\n    value: function autoMass() {\n      this.mass = Math.sqrt(Polygon.area(this)) / 10;\n      return this;\n    }\n  }, {\n    key: \"link\",\n    value: function link(index1, index2, stiff) {\n      if (index1 < 0 || index1 >= this.length) throw new Error(\"index1 is not in the Group's indices\");\n      if (index2 < 0 || index2 >= this.length) throw new Error(\"index1 is not in the Group's indices\");\n      var d = this[index1].$subtract(this[index2]).magnitude();\n\n      this._cs.push([index1, index2, d, stiff || this._stiff]);\n\n      return this;\n    }\n  }, {\n    key: \"linkAll\",\n    value: function linkAll(stiff) {\n      var half = this.length / 2;\n\n      for (var i = 0, len = this.length; i < len; i++) {\n        var n = i >= len - 1 ? 0 : i + 1;\n        this.link(i, n, stiff);\n\n        if (len > 4) {\n          var nd = Math.floor(half / 2) + 1;\n          var n2 = i >= len - nd ? i % len : i + nd;\n          this.link(i, n2, stiff);\n        }\n\n        if (i <= half - 1) {\n          this.link(i, Math.min(this.length - 1, i + Math.floor(half)));\n        }\n      }\n    }\n  }, {\n    key: \"linksToLines\",\n    value: function linksToLines() {\n      var gs = [];\n\n      for (var i = 0, len = this._cs.length; i < len; i++) {\n        var ln = this._cs[i];\n        gs.push(new Group(this[ln[0]], this[ln[1]]));\n      }\n\n      return gs;\n    }\n  }, {\n    key: \"processEdges\",\n    value: function processEdges() {\n      for (var i = 0, len = this._cs.length; i < len; i++) {\n        var _this$_cs$i = _slicedToArray(this._cs[i], 4),\n            m = _this$_cs$i[0],\n            n = _this$_cs$i[1],\n            d = _this$_cs$i[2],\n            s = _this$_cs$i[3];\n\n        World.edgeConstraint(this[m], this[n], d, s);\n      }\n    }\n  }, {\n    key: \"processBody\",\n    value: function processBody(b) {\n      var b1 = this;\n      var b2 = b;\n      var hit = Polygon.hasIntersectPolygon(b1, b2);\n\n      if (hit) {\n        var cv = hit.normal.$multiply(hit.dist);\n        var t;\n        var eg = hit.edge;\n\n        if (Math.abs(eg[0][0] - eg[1][0]) > Math.abs(eg[0][1] - eg[1][1])) {\n          t = (hit.vertex[0] - cv[0] - eg[0][0]) / (eg[1][0] - eg[0][0]);\n        } else {\n          t = (hit.vertex[1] - cv[1] - eg[0][1]) / (eg[1][1] - eg[0][1]);\n        }\n\n        var lambda = 1 / (t * t + (1 - t) * (1 - t));\n        var m0 = hit.vertex.body.mass || 1;\n        var m1 = hit.edge[0].body.mass || 1;\n        var mr0 = m0 / (m0 + m1);\n        var mr1 = m1 / (m0 + m1);\n        eg[0].subtract(cv.$multiply(mr0 * (1 - t) * lambda / 2));\n        eg[1].subtract(cv.$multiply(mr0 * t * lambda / 2));\n        hit.vertex.add(cv.$multiply(mr1));\n      }\n    }\n  }, {\n    key: \"processParticle\",\n    value: function processParticle(b) {\n      var b1 = this;\n      var b2 = b;\n      var hit = Polygon.hasIntersectCircle(b1, Circle.fromCenter(b, b.radius));\n\n      if (hit) {\n        var cv = hit.normal.$multiply(hit.dist);\n        var t;\n        var eg = hit.edge;\n\n        if (Math.abs(eg[0][0] - eg[1][0]) > Math.abs(eg[0][1] - eg[1][1])) {\n          t = (hit.vertex[0] - cv[0] - eg[0][0]) / (eg[1][0] - eg[0][0]);\n        } else {\n          t = (hit.vertex[1] - cv[1] - eg[0][1]) / (eg[1][1] - eg[0][1]);\n        }\n\n        var lambda = 1 / (t * t + (1 - t) * (1 - t));\n        var m0 = hit.vertex.mass || b2.mass || 1;\n        var m1 = hit.edge[0].body.mass || 1;\n        var mr0 = m0 / (m0 + m1);\n        var mr1 = m1 / (m0 + m1);\n        eg[0].subtract(cv.$multiply(mr0 * (1 - t) * lambda / 2));\n        eg[1].subtract(cv.$multiply(mr0 * t * lambda / 2));\n        var c1 = b.changed.add(cv.$multiply(mr1));\n        b.previous = b.$subtract(c1);\n      }\n    }\n  }, {\n    key: \"mass\",\n    get: function get() {\n      return this._mass;\n    },\n    set: function set(m) {\n      this._mass = m;\n\n      for (var i = 0, len = this.length; i < len; i++) {\n        this[i].mass = this._mass;\n      }\n    }\n  }], [{\n    key: \"fromGroup\",\n    value: function fromGroup(list) {\n      var stiff = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var autoLink = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var autoMass = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      var b = new Body().init(list);\n      if (autoLink) b.linkAll(stiff);\n      if (autoMass) b.autoMass();\n      return b;\n    }\n  }]);\n\n  return Body;\n}(Group);","import React, { useState, useCallback } from \"react\"\nimport { QuickStartCanvas } from \"react-pts-canvas\"\nimport { Create, Group, Const, Circle } from \"pts\"\n\nconst createLines = space => {\n  var ps = Create.distributeRandom(space, 100)\n  return ps.map(item => {\n    return new Group(\n      item,\n      item\n        .clone()\n        .toAngle(\n          Math.random() * Const.pi,\n          (Math.random() * space.size.y) / 1 + 10,\n          true\n        )\n    )\n  })\n}\n\nexport default function Canvas() {\n  const [lines, setLines] = useState([])\n  const [space, setSpace] = useState(null)\n\n  const onResize = useCallback(space => {\n    setSpace(space)\n    setLines(createLines(space.bound))\n  }, [])\n\n  const onStart = useCallback((bound, space) => {\n    setSpace(space)\n    setLines(createLines(bound))\n  }, [])\n\n  const onAnimate = useCallback(() => {\n    const form = space.getForm()\n    console.log(form)\n    const range = Circle.fromCenter(space.pointer, 20)\n    form.stroke(\"#fff\").lines(lines)\n    lines.forEach(line => {\n      const inPath = Circle.intersectRay2D(range, line)\n      const inLine = Circle.intersectLine2D(range, line)\n\n      if (inPath.length > 1) {\n        form\n          .stroke(\"rgba(44,84,53,.10)\")\n          .line(line.concat(inPath[1], inPath[0]))\n        form.stroke(\"#BEC6C4\").line(line)\n        form.fillOnly(\"#000\").points(inPath, 6, \"circle\")\n      }\n\n      if (inLine.length > 0) {\n        form.stroke(\"#000\").line(line)\n        form.fillOnly(\"#000\").points(inLine, 12, \"circle\")\n      }\n    })\n  }, [lines, space])\n\n  return (\n    <QuickStartCanvas\n      background=\"#E4E1E5\"\n      onStart={onStart}\n      onResize={onResize}\n      onAnimate={onAnimate}\n      style={{\n        width: \"100%\",\n      }}\n    />\n  )\n}\n"],"sourceRoot":""}